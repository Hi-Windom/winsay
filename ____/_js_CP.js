/*!
*                    .::::.
*                  .::::::::.
*                 :::::::::::  winsay v2.0
*             ..:::::::::::'
*           '::::::::::::'
*             .::::::::::
*        '::::::::::::::..
*             ..::::::::::::.
*           .''::::::::::::::::
*            ::::'':::::::::'        .:::.
*           ::::'   ':::::'       .::::::::.
*         .::::'      ::::     .:::::::'::::.
*        .:::'       :::::  .:::::::::' ':::::.
*       .::'        :::::.:::::::::'      ':::::.
*      .::'         ::::::::::::::'         ''::::.
*  ...:::           ::::::::::::'              ''::.
* '''' ':.          ':::::::::'                  ::::..
*                    '.:::::'                    ':'''''..
*
 *
 * https://github.com/Hi-Windom/winsay
 * QQ 694357845
 *
 * For the brave souls who get this far: You are the chosen ones,
 * the valiant knights of programming who toil away, without rest,
 * fixing our most awful code. To you, true saviors, kings of men,
 * I say this: never gonna give you up, never gonna let you down,
 * never gonna run around and desert you. Never gonna make you cry,
 * never gonna say goodbye. Never gonna tell a lie and hurt you.
 *
 */
import{C as e,a,b as t,c as o,d as i,e as n,f as s,g as r}from"../com-53dc43b8.js";import{i as c,b as l,m as _,n as d,l as y,通 as p,o as b,p as w,q as m,T as u,r as C,t as S,v as g,w as f,u as h,x as I,R as B,S as v,y as k,z as x,B as T,C as V,D as M,c as E}from"../localforage-c05ff5e1.js";var L=null,$=null;const H=async(e,a)=>{document.documentElement.style.setProperty(e,a)},A=async e=>{document.documentElement.style.removeProperty(e)};async function D(){return"Bazaar"===await C("SC_winsay_cp_about__checkAPI")?window.winsay.localVersion.useBazaar:window.winsay.localVersion.useGithub}async function P(){return new Promise((function(e){var a=new XMLHttpRequest;a.open("POST","http://127.0.0.1:6806/api/file/getFile",!0),a.setRequestHeader("Content-type","application/json");var t={path:`/conf/appearance/themes/${u}/theme.json`};a.send(JSON.stringify(t)),a.onreadystatechange=()=>{if(4===a.readyState&&200===a.status){var t=a.responseText;e(JSON.parse(t))}}})).then((async function(e){window.winsay.localVersion.useGithub=e.version,window.winsay.localVersion.useBazaar=window.siyuan.config.appearance.themeVer,window.winsay.localVersion.version=await D(),window.winsay.localVersion.vinfoHTML=`当前版本 v<span>${window.winsay.localVersion.version}</span>\n    <div class="b3-label__text"><a href="https://gitee.com/soltus/Sofill/blob/main/CHANGELOG/winsay.md" target="_blank">浏览更新历史</a></div>`,setTimeout((()=>{document.getElementById("sc-custom-container-placehold").children[0].innerHTML=`${u} v${window.winsay.localVersion.version} CP`,document.getElementById("SC_winsay_cp_version").innerHTML=window.winsay.localVersion.vinfoHTML}),100)}))}async function q(e,a){let t=await V(window.location.host,{}),o={};t.data.packages.forEach((e=>{"Sofill-"===e.name&&(o=e)})),1===E(o.version,e)?(console.warn("集市有新版本发布"),await y.setItem("SC_winsay_latest_checked_version",o.version),p(`集市有新版本发布：<br>${e} => ${o.version}<br> `),async function(e){if(document.body.classList.contains("body--mobile")&&!document.body.classList.contains("client--browser"))setTimeout((async()=>{"true"===await C("SC_winsay_cp_about__AutoToUpdateMobile")&&window.open(`http://0.0.0.0:6806/stage/build/desktop/?action=next&name=update-winsay&args=${encodeURIComponent(window.siyuan.config.localIPs[0]+":6806")}`,"_blank")}),500);else{document.querySelector("#toolbar #barSetting").click(),document.querySelector('.b3-tab-bar:not(.sc-custom-nav) [data-name="bazaar"]').click(),setTimeout((()=>{document.querySelector(`#configBazaarTheme [class="b3-card__actions"][data-name="${e}"]>[data-type="install-t"]`).click()}),1e3)}}("Sofill-")):!1===a&&p("真棒👍，主题已是最新版",800)}async function N(e=!1){let t=await C("SC_winsay_cp_about__checkAPI"),o=await D();if("Github"===t)await async function(e,t){await V(window.location.host,{}),await M(window.location.host,{}),new Promise((function(e){var a=`https://api.github.com/repos/Hi-Windom/${_}/releases/latest`,t=new XMLHttpRequest;t.open("GET",a,!0),t.setRequestHeader("Content-type","application/json"),t.send(null),t.onreadystatechange=()=>{if(4===t.readyState&&200===t.status){var a=t.responseText;e(JSON.parse(a))}}})).then((async function(o){let i=o.tag_name;if("true"===await C("SC_winsay_cp_about__AutoCheckIgnoreSVN")){let a=e.split(".");a.splice(-1),e=a.join(".");let t=i.split(".");t.splice(-1),i=t.join(".")}if(1===E(i,e)){console.warn("Github 有新版本发布");let t=new a({isCancel:!0,dragable:!1,XML:r,success(){console.log("点击了确定"),window.open(`https://github.com/Hi-Windom/${_}/releases/download/${i}/${u}__${i}.zip`,"_blank"),window.open(`https://github.com/Hi-Windom/${_}/releases/tag/${i}`,"_blank")},cancel(){console.log("点击了取消")},maskable:!0});await t.open((()=>{var a=o.body.replace(/(http:\/\/|https:\/\/)((\w|=|\?|\.|\/|&|-)+)/g,"<a href='$1$2'>$1$2</a>");document.getElementById("UpdateInfo").innerHTML=`${e} > ${i}<br><span class="fn__space"></span><div class="p" style="max-height: 250px;white-space: break-spaces;word-break: break-all;overflow: scroll;">${a}</div>`,document.getElementById("CoverWarming").innerHTML="下载链接能否访问取决于你的网络"})),await y.setItem("SC_winsay_latest_checked_version",i)}else!1===t&&p("真棒👍，主题已是最新版",800)}))}(o,e);else await q(o,e)}async function F(e,a,t,o){if(null==document.getElementById(t)){const i=document.createElement("button");i.id=t,i.className=o,i.ariaLabel="主题设置（实验性）",i.style.paddingRight="0",i.innerHTML='<svg class="b3-menu__icon Sofill-CDUI-btn__icon" "=""><use xlink:href="#iconSettings"></use></svg><span class="b3-menu__label">主题设置</span>',e.insertAdjacentElement(a,i),document.getElementById(t).onclick=async()=>{$.open(),await P(),document.getElementById("sofill_preview").setAttribute("src",`${S}preview.png`)}}}async function W(){await g("SC_winsay_cp_search__layout",(async function(e){m(e)&&document.getElementById("search__layout")?document.getElementById("search__layout").remove():h("search__layout",`${S}style/sweet/sugar/search/${e}`)})),await f(document.getElementById("SC_winsay_cp_search__index"),(()=>{h("search__index",`${S}style/sweet/sugar/search/index.css`)}),(()=>{I(`${S}style/sweet/sugar/search/index.css`,"css")})),await f(document.getElementById("SC_winsay_cp_search__disable_tips"),(()=>{var e=document.getElementById("search__disable_tips");e&&e.remove()}),(()=>{h("search__disable_tips",`${S}style/sweet/sugar/search/tips.css`)}))}async function z(){await async function(){await g("SC_winsay_cp_editor__block__popover--open__PinSense",(async function(e){if(m(e))H("--SCC-Variables-block__popover--open__PinSense_1","unset"),H("--SCC-Variables-block__popover--open__PinSense_2","var(--b3-dialog-shadow)");else switch(e){case"2":H("--SCC-Variables-block__popover--open__PinSense_2","var(--b3-theme-secondary) -2px -2px 5.8px 1px,var(--b3-theme-primary) 0 0 0 1px,var(--b3-theme-primary-light) 0 0 3px 1px,var(--b3-theme-primary-lighter) 0 0 13px 2px,var(--b3-theme-primary-lightest) 0 0 2px 4px"),H("--SCC-Variables-block__popover--open__PinSense_1","unset");break;case"1":H("--SCC-Variables-block__popover--open__PinSense_2","var(--b3-dialog-shadow)"),H("--SCC-Variables-block__popover--open__PinSense_1","var(--b3-theme-surface-lighter)")}})),await g("SC_winsay_cp_editor__BlockTable_MinWidth",(async function(e){m(e)?H("--SCC-Variables-BlockTable-minWidth","unset"):H("--SCC-Variables-BlockTable-minWidth",e)})),await g("SC_winsay_cp_editor__BlockTable_MaxWidth",(async function(e){m(e)?H("--SCC-Variables-BlockTable-maxWidth","unset"):H("--SCC-Variables-BlockTable-maxWidth",e)})),await g("SC_winsay_cp_editor__BlockTable_FontSize",(async function(e){m(e)?H("--SCC-Variables-BlockTable-fontSize","unset"):H("--SCC-Variables-BlockTable-fontSize",e)})),await g("SC_winsay_cp_editor__BlockTable_TextAlign",(async function(e){m(e)?H("--SCC-Variables-BlockTable-text_align","unset"):H("--SCC-Variables-BlockTable-text_align",e)})),await f(document.getElementById("SC_winsay_cp_editor__BlockTable_Margin"),(()=>{H("--SCC-Variables-BlockTable-margin","0 auto")}),(()=>{H("--SCC-Variables-BlockTable-margin","inherit")})),await g("SC_winsay_cp_editor__Block-List-LightUpLineMode",(async function(e){if(m(e))H("--SCC-Variables-BlockList__beforeColor","var(--b3-theme-surface-lighter)");else switch(e){case"1":H("--SCC-Variables-BlockList__beforeColor","var(--b3-theme-background-light)"),h("BlockListHoverALL","");break;case"2":H("--SCC-Variables-BlockList__beforeColor","var(--b3-theme-background-light)"),h("BlockListHoverALL",`${S}style/sweet/sugar/editor/Block-List-HoverALL.css`);break;case"3":H("--SCC-Variables-BlockList__beforeColor","var(--b3-scroll-color)");break;default:H("--SCC-Variables-BlockList__beforeColor","var(--b3-theme-surface-lighter)")}})),await g("SC_winsay_cp_editor__layout-center_protyle-toolbar_position",(async function(e){var a=m(e)?"":e;h("layout-center_protyle-toolbar_position",`${S}style/sweet/sugar/editor/${a}`)})),await g("SC_winsay_cp_editor__protyle-attr-scale",(async function(e){m(e)||H("--SCC-Variables-protyle-attr-scale",e)})),await g("SC_winsay_cp_editor__DocWidthMode",(async function(e){clearInterval(window.winsay.storage.It_DocWidthMode),m(e)?window.winsay.storage.SC_winsay_cp_editor__DocWidthMode__previousValue!==e&&e&&""!==e&&window.location.reload():(window.winsay.storage.SC_winsay_cp_editor__DocWidthMode__previousValue=e,window.winsay.storage.It_DocWidthMode=setInterval((()=>{var a=document.querySelectorAll("#layouts .layout__center .protyle-wysiwyg.protyle-wysiwyg--attr"),t=document.querySelectorAll("#layouts .layout__center .protyle-title.protyle-wysiwyg--attr");a.forEach((function(a){a.style.setProperty("padding",e),a.style.setProperty("margin","0 auto"),"1in 0.5in"===e?a.style.setProperty("width","800px"):"0.42in"===e||"0.41in"===e?a.style.setProperty("width","1118px"):"0.40in"===e?a.style.setProperty("width","1598px"):a.style.removeProperty("width")})),t.forEach((function(a){a.style.setProperty("margin",e)}))}),1e3))})),await g("SC_winsay_cp_editor__Doc_bgColor",(async function(e){clearInterval(window.winsay.storage.SC_winsay_cp_T__t2),m(e)?window.winsay.storage.SC_winsay_cp_editor__DocWidthMode__previousValue!==e&&e&&""!==e&&window.location.reload():window.winsay.storage.SC_winsay_cp_T__t2=setInterval((()=>{document.querySelectorAll("#layouts .layout__center .protyle-wysiwyg.protyle-wysiwyg--attr").forEach((a=>{a.style.setProperty("background-color",e)}))}),1e3)})),await g("SC_winsay_cp_editor__ListAutoIndent_mode",(async function(e){m(e)||"2"!==e?m(e)||"1"!==e?(H("--SCC-Variables-List-Item-margin","18px"),H("--SCC-Variables-List-Item-padding","16px")):(H("--SCC-Variables-List-Item-margin","max(min(18px,1cqw),8px)"),H("--SCC-Variables-List-Item-padding","min(16px,0.58cqw)")):(H("--SCC-Variables-List-Item-margin","max(min(18px,0.58em),8px)"),H("--SCC-Variables-List-Item-padding","min(16px,0.31em)"))})),await g("SC_winsay_cp_editor__img-bg-color",(async function(e){m(e)||("true"===await y.getItem("SC_winsay_cp_editor__img-bg-color_always")?(H("--SCC-Variables-IMG-bg-color_hover",e),H("--SCC-Variables-IMG-bg-color",e)):(H("--SCC-Variables-IMG-bg-color_hover",e),H("--SCC-Variables-IMG-bg-color","transparent")))})),await f(document.getElementById("SC_winsay_cp_editor__img-bg-color_always"),(async()=>{var e=await C("SC_winsay_cp_editor__img-bg-color");H("--SCC-Variables-IMG-bg-color_hover",e),H("--SCC-Variables-IMG-bg-color",e)}),(async()=>{var e=await C("SC_winsay_cp_editor__img-bg-color");H("--SCC-Variables-IMG-bg-color_hover",e),H("--SCC-Variables-IMG-bg-color","transparent")})),await f(document.getElementById("SC_winsay_cp_editor__HintHint-index"),(()=>{h("HintHint-index",`${S}style/sweet/sugar/editor/HintHint-index.css`)}),(()=>{I(`${S}style/sweet/sugar/editor/HintHint-index.css`,"css")})),await f(document.getElementById("SC_winsay_cp_editor__LH_Adaptive"),(()=>{h("LH_Adaptive",`${S}style/sweet/LH-Adaptive.css`),document.getElementById("BP__SC_winsay_cp_editor__LH_Adaptive").classList.add("fn__none")}),(()=>{I(`${S}style/sweet/LH-Adaptive.css`,"css"),document.getElementById("BP__SC_winsay_cp_editor__LH_Adaptive").classList.remove("fn__none")})),await f(document.getElementById("SC_winsay_cp_editor__BreadcrumbsMode-Adaptive"),(()=>{h("docBreadcrumb_Adaptive",`${S}style/sweet/MI-Breadcrumb-Adaptive.css`)}),(()=>{I(`${S}style/sweet/MI-Breadcrumb-Adaptive.css`,"css")})),await f(document.getElementById("SC_winsay_cp_editor__AreoBg-Filter"),(()=>{h("AreoBg-Filter",`${S}style/sweet/AreoBg-Filter.css`)}),(()=>{I(`${S}style/sweet/AreoBg-Filter.css`,"css")})),await g("SC_winsay_cp_editor__LH_Adaptive__pIndent",(async function(e){m(e)||(H("--SCC-Variables-MI-Doc-pIndent",`${B(-2,e,12)}rem`),document.getElementById("SC_winsay_cp_editor__LH_Adaptive__pIndent").value=B(-2,e,12).toString())})),await g("SC_winsay_cp_editor__dynamicLoadBlocks",(async function(e){m(e)||(window.siyuan.config.editor.dynamicLoadBlocks=B(48,e,1024),document.getElementById("SC_winsay_cp_editor__dynamicLoadBlocks").value=B(48,e,1024).toString())})),await g("SC_winsay_cp_editor__LH_Adaptive__LH",(async function(e){if(!m(e)){H("--SCC-Variables-MI-Doc-LH",`${e}`),document.getElementById("SC_winsay_cp_editor__LH_Adaptive__LH__label").setAttribute("aria-label",`${e}`),await y.setItem("SC_winsay_cp_editor__LH_Adaptive__LH__label",e);let a=document.querySelector("#SC-CP");"body--mobile"===l&&"none"!==a.style.display&&p(`新值：${e}`)}})),await g("SC_winsay_cp_editor__LH_Adaptive__marginTop",(async function(e){m(e)||(H("--SCC-Variables-MI-Doc-marginTop",B(10,e,500)/100+"rem"),document.getElementById("SC_winsay_cp_editor__LH_Adaptive__marginTop").value=B(10,e,500).toString())})),await g("SC_winsay_cp_editor__LH_Adaptive__marginBottom",(async function(e){m(e)||(H("--SCC-Variables-MI-Doc-marginBottom",B(10,e,500)/100+"rem"),document.getElementById("SC_winsay_cp_editor__LH_Adaptive__marginBottom").value=B(10,e,500).toString())})),await g("SC_winsay_cp_editor__LH_Adaptive__lSpacing",(async function(e){if(!m(e)){H("--SCC-Variables-MI-Doc-lSpacing",`${e}rem`),document.getElementById("SC_winsay_cp_editor__LH_Adaptive__lSpacing__label").setAttribute("aria-label",`${e}`),await y.setItem("SC_winsay_cp_editor__LH_Adaptive__lSpacing__label",e);let a=document.querySelector("#SC-CP");"body--mobile"===l&&"none"!==a.style.display&&p(`新值：${e}`)}})),await g("SC_winsay_cp_editor__BlockScrollBar-opacity",(async function(e){if(!m(e)){H("--SCC-Variables-MI-BlockScrollBar-opacity-hover",e);let a=document.querySelector("#editor .protyle-scroll");switch(H("--SCC-Variables-MI-BlockScrollBar-display","block"),e){case"0.88":a?h("Android-mobile-BlockScrollBarShow",`${S}style/sweet/sugar/editor/Android-mobile-BlockScrollBarFocusShow.css`):H("--SCC-Variables-MI-BlockScrollBar-opacity","0");break;case"1":a?h("Android-mobile-BlockScrollBarShow",`${S}style/sweet/sugar/editor/Android-mobile-BlockScrollBarAlwaysShow.css`):H("--SCC-Variables-MI-BlockScrollBar-opacity","0.58");break;case"-1":H("--SCC-Variables-MI-BlockScrollBar-display","none");break;default:H("--SCC-Variables-MI-BlockScrollBar-opacity","0");let e=document.querySelector("#Android-mobile-BlockScrollBarShow");e&&e.remove()}}})),await g("SC_winsay_cp_editor__BlockScrollBar_Hposition",(async function(e){if(!m(e))switch(e){case"L31":H("--SCC-Variables-MI-BlockScrollBar-right","unset"),H("--SCC-Variables-MI-BlockScrollBar-left","31px"),H("--SCC-Variables-MI-BlockScrollBar-tooltips-top","-100%");break;case"L13":H("--SCC-Variables-MI-BlockScrollBar-right","unset"),H("--SCC-Variables-MI-BlockScrollBar-left","13px"),H("--SCC-Variables-MI-BlockScrollBar-tooltips-top","-100%");break;case"R31":H("--SCC-Variables-MI-BlockScrollBar-right","31px"),H("--SCC-Variables-MI-BlockScrollBar-left","unset"),H("--SCC-Variables-MI-BlockScrollBar-tooltips-top","100%");break;default:H("--SCC-Variables-MI-BlockScrollBar-right","13px"),H("--SCC-Variables-MI-BlockScrollBar-left","unset"),H("--SCC-Variables-MI-BlockScrollBar-tooltips-top","100%")}})),await g("SC_winsay_cp_editor__Block-Inline-link__block-ref-content",(async function(e){if(m(e))H("--SCC-Variables-Block-Inline-link__block-ref__before","none"),H("--SCC-Variables-Block-Inline-link__block-ref__after","none");else{var a=e.split(" ")[0],t=e.split(" ")[1];H("--SCC-Variables-Block-Inline-link__block-ref__before",`'${a}'`),H("--SCC-Variables-Block-Inline-link__block-ref__after",`'${t}'`)}})),await g("SC_winsay_cp_editor__Block-List-Task__item-done__text-color",(async function(e){m(e)||"auto"!==e?(H("--SCC-Variables-Block-List-Task__item-done-color","var(--b3-theme-on-background)"),H("--SCC-Variables-Block-List-Task__item-done-backdrop-filter","none")):(H("--SCC-Variables-Block-List-Task__item-done-color","var(--b3-theme-secondary)"),H("--SCC-Variables-Block-List-Task__item-done-backdrop-filter","brightness(1.58) blur(13px)"))})),await f(document.getElementById("SC_winsay_cp_editor__FocusEnhanc_inlineCode"),(()=>{H("--SCC-Variables-Block-Inline-span__code__before-content","'<'"),H("--SCC-Variables-Block-Inline-span__code__after-content","'>'")}),(()=>{A("--SCC-Variables-Block-Inline-span__code__before-content"),A("--SCC-Variables-Block-Inline-span__code__after-content")})),await f(document.getElementById("SC_winsay_cp_editor__TapAlert_docReadOnly"),(()=>{window.winsay.cp.TapAlert_docReadOnly=!0}),(()=>{window.winsay.cp.TapAlert_docReadOnly=!1})),await f(document.getElementById("SC_winsay_cp_editor__FocusEnhanc_refWave"),(()=>{H("--SCC-Variables-span-ref-animation-icon","var(--SCC-baseComponent-span-ref-animation-icon)")}),(()=>{A("--SCC-Variables-span-ref-animation-icon")})),await f(document.getElementById("SC_winsay_cp_editor__FocusEnhanc_NodeHeading"),(()=>{h("FocusEnhanc_NodeHeading",`${S}style/sweet/sugar/editor/NodeHeading-FocusEnhanc.css`)}),(()=>{I(`${S}style/sweet/sugar/editor/NodeHeading-FocusEnhanc.css`,"css")})),await f(document.getElementById("SC_winsay_cp_editor__FocusEnhanc_DocNameArea"),(()=>{h("FocusEnhanc_DocNameArea",`${S}style/sweet/sugar/editor/MI-Dynamic.css`)}),(()=>{I(`${S}style/sweet/sugar/editor/MI-Dynamic.css`,"css")})),await f(document.getElementById("SC_winsay_cp_editor__FocusEnhanc_BlockHoverShadow"),(()=>{h("FocusEnhanc_BlockHoverShadow",`${S}style/sweet/sugar/editor/BlockHoverShadow.css`)}),(()=>{I(`${S}style/sweet/sugar/editor/BlockHoverShadow.css`,"css")})),await f(document.getElementById("SC_winsay_cp_editor__FocusEnhanc_SearchInputShadow"),(()=>{h("SearchInputShadow",`${S}style/sweet/sugar/editor/SearchInputShadow.css`)}),(()=>{I(`${S}style/sweet/sugar/editor/SearchInputShadow.css`,"css")})),await f(document.getElementById("SC_winsay_cp_editor__NodeHeadingFoldedShadow"),(()=>{h("NodeHeadingFoldedShadow",`${S}style/sweet/sugar/editor/NodeHeading-foldedShadow.css`)}),(()=>{I(`${S}style/sweet/sugar/editor/NodeHeading-foldedShadow.css`,"css")})),await f(document.getElementById("SC_winsay_cp_editor__ShowBreadcrumbAnytime"),(()=>{H("--SCC-Variables-breadcrumb--hide-opacity","1")}),(()=>{A("--SCC-Variables-breadcrumb--hide-opacity")})),await f(document.getElementById("SC_winsay_cp_editor__showDocCreatedDate"),(()=>{import("../index-e7988012.js")}),(()=>{})),await g("SC_winsay_cp_editor__HintHintMaxWidth",(async function(e){m(e)||H("--SCC-Variables-HintHint-MaxWidth",`${e}`)})),await g("SC_winsay_cp_editor__HintHintMaxHeight",(async function(e){m(e)||H("--SCC-Variables-HintHint-MaxHeight",`${e}`)}))}(),await async function(){"body--mobile"!==l&&(await f(document.getElementById("NoSync__SC_winsay_cp_appearance__AutoTranslate"),(()=>{if(window.siyuan.config.lang){var e=document.getElementsByTagName("head")[0],a=document.createElement("script");a.type="text/javascript",a.async=!0,a.id="AutoTranslate",a.src="https://res.zvo.cn/translate/translate.js",a.onload=a.onratechange=()=>{let e;e.selectLanguageTag.show=!1,e.selectLanguageTag.languages="zh-CN,id,ms,el,it,es,pt-PT,ja,nl,en,ru,fr,se,sv,ko,zh-TW,pt-BR,cs,th,la,da",e.execute()},e.appendChild(a),document.getElementById("layouts").parentElement.style.visibility="hidden",document.getElementById("NoSync__SC_winsay_cp_appearance__AutoTranslate_label").style.display="flex"}}),(()=>{let e=document.getElementById("AutoTranslate");e&&(void 0).changeLanguage("zh-CN"),document.getElementById("layouts").parentElement.style.visibility="visible",document.querySelectorAll(".translateSelectLanguage").forEach((e=>{e.remove()})),document.getElementById("NoSync__SC_winsay_cp_appearance__AutoTranslate_label").style.display="none",e&&e.remove()})),await f(document.getElementById("SC_winsay_cp_appearance__DockBgColorFilter"),(()=>{let e=document.querySelector("#dockLeft"),a=document.querySelector("#dockRight"),t=document.querySelector("#status");e.style.setProperty("background-image","linear-gradient(to top,#cccccc16,#ffffff06)"),a.style.setProperty("background-image","linear-gradient(to top left,#cccccc16,#ffffff06)"),t.style.setProperty("background-image","linear-gradient(to top right,#cccccc16,#ffffff06)")}),(()=>{let e=document.querySelector("#dockLeft"),a=document.querySelector("#dockRight"),t=document.querySelector("#status");e.style.removeProperty("background-image"),a.style.removeProperty("background-image"),t.style.removeProperty("background-image")}))),await g("SC_winsay_cp_appearance__KeynesOpacity",(async function(e){m(e)||H("--SCC-Variables-KeynesOpacity",e)})),await g("SC_winsay_cp_appearance__TabBarSize",(async function(e){m(e)||(H("--SCC-Variables-MI-TabBar-FontSize",e),H("--SCC-Variables-MI-TabBar-MinHeight",3*parseInt(e)))})),await g("SC_winsay_cp_appearance__TabBarStyleFeel",(async function(e){if(m(e))H("--SCC-Variables-BlockList__beforeColor","var(--b3-theme-surface-lighter)");else switch(e){case"3":H("--SCC-Variables-TabBar-item__focus-box-shadow","rgba(131, 131, 131, 0.4) 0px 2px 4px, rgba(131, 131, 131, 0.3) 0px 7px 3px -3px, rgba(131, 131, 131, 0.2) 0px -3px 0px inset"),H("--SCC-Variables-TabBar-item-box-shadow","rgba(131, 131, 131, 0.4) 0px 2px 4px, rgba(131, 131, 131, 0.3) 0px 7px 3px -3px, rgba(131, 131, 131, 0.2) 0px -3px 0px inset"),H("--SCC-Variables-TabBar-V__item-box-shadow","rgb(131 131 131 / 30%) 0px 1px 1px, rgb(131 131 131 / 20%) 0px 2px 2px -2px, rgb(131 131 131 / 20%) 0px -1px 0px inset"),H("--SCC-Variables-TabBar-border-bottom","2px ridge var(--b3-theme-primary-light)"),H("--SCC-Variables-TabBar-margin-bottom","3px");break;case"2":H("--SCC-Variables-TabBar-item__focus-box-shadow","rgba(131, 131, 131, 0.4) 0px 2px 4px, rgba(131, 131, 131, 0.3) 0px 7px 3px -3px, rgba(131, 131, 131, 0.2) 0px -3px 0px inset"),H("--SCC-Variables-TabBar-item-box-shadow","rgba(131, 131, 131, 0.4) 0px 2px 4px, rgba(131, 131, 131, 0.3) 0px 7px 3px -3px, rgba(131, 131, 131, 0.2) 0px -3px 0px inset"),H("--SCC-Variables-TabBar-V__item-box-shadow","rgb(131 131 131 / 30%) 0px 1px 1px, rgb(131 131 131 / 20%) 0px 2px 2px -2px, rgb(131 131 131 / 20%) 0px -1px 0px inset"),H("--SCC-Variables-TabBar-border-bottom","none"),H("--SCC-Variables-TabBar-margin-bottom","3px");break;default:H("--SCC-Variables-TabBar-item__focus-box-shadow","rgb(131 131 131 / 1%) -1px 1px 1px, rgb(131 131 131 / 11%) -1px -2px 13px -1px, rgb(131 131 131 / 3%) 0px -1px 0px inset"),H("--SCC-Variables-TabBar-item-box-shadow","rgb(131 131 131 / 1%) -1px 1px 1px, rgb(131 131 131 / 11%) -1px -2px 13px -1px, rgb(131 131 131 / 3%) 0px -1px 0px inset"),H("--SCC-Variables-TabBar-V__item-box-shadow","none"),H("--SCC-Variables-TabBar-border-bottom","1px solid var(--b3-theme-primary-light)"),H("--SCC-Variables-TabBar-margin-bottom","0px")}})),await g("SC_winsay_cp_appearance__TabBar_item__textShadow",(async function(e){m(e)||H("--SCC-Variables-TabBar_item__textShadow","2"===e?"-1px 1px 13px var(--SCC-Orange-Windom)":"none")})),await g("SC_winsay_cp_appearance__TabBarMode",(async function(e){var a=m(e)?"MI-TabBar-D.css":e;h("TabBar",`${S}style/sweet/${a}`)})),await f(document.getElementById("SC_winsay_cp_appearance__TabBarV_AutoFolded"),(()=>{H("--SCC-Variables-MI-TabBarV_Auto-width","2rem")}),(()=>{H("--SCC-Variables-MI-TabBarV_Auto-width","max(186px, 13vw)")})),await f(document.getElementById("SC_winsay_cp_appearance__ToolBarMode"),(()=>{H("--SCC-Variables-MI-ToolBar-height-max","11px"),H("--SCC-Variables-MI-ToolBar-child-visibility","hidden"),H("--SCC-Variables-MI-ToolBar-svg-height","0px"),H("--SCC-Variables-MI-ToolBar-svg-hover-height","14px"),H("--SCC-Variables-MI-ToolBar-docName-opacity","0")}),(async()=>{H("--SCC-Variables-MI-ToolBar-height-max","unset"),H("--SCC-Variables-MI-ToolBar-child-visibility","visible");var e=await C("SC_winsay_cp_appearance__ToolBarMode__height");m(e)?(H("--SCC-Variables-MI-ToolBar-height","26px"),H("--SCC-Variables-MI-ToolBar-svg-height","14px"),H("--SCC-Variables-MI-ToolBar-svg-hover-height","14px")):(H("--SCC-Variables-MI-ToolBar-height",e),H("--SCC-Variables-MI-ToolBar-svg-height",parseInt(e)/2+1+"px"),H("--SCC-Variables-MI-ToolBar-svg-hover-height",parseInt(e)/2+1+"px")),H("--SCC-Variables-MI-ToolBar-docName-opacity","0.77")})),await g("SC_winsay_cp_appearance__ToolBarMode__height",(async function(e){m(e)||(H("--SCC-Variables-MI-ToolBar-height",e),H("--SCC-Variables-MI-ToolBar-svg-height",parseInt(e)/2+1+"px"),H("--SCC-Variables-MI-ToolBar-svg-hover-height",parseInt(e)/2+1+"px"))})),await g("SC_winsay_cp_appearance__ToolBarMode__NotFocus__bgColor",(async function(e){m(e)||H("--b3-toolbar-background",e)})),await f(document.getElementById("SC_winsay_cp_appearance__ToolBarMode__HideList__docName"),(()=>{H("--SCC-Variables-MI-ToolBar-docName-opacity","0")}),(()=>{H("--SCC-Variables-MI-ToolBar-docName-opacity","0.77")})),await f(document.getElementById("SC_winsay_cp_appearance__ToolBarMode__HideList__VIP"),(()=>{H("--SCC-Variables-MI-ToolBar-VIP-opacity","0")}),(()=>{H("--SCC-Variables-MI-ToolBar-VIP-opacity","0.77")})),await f(document.getElementById("SC_winsay_cp_appearance__ToolBarMode__HideList__windowX"),(()=>{H("--SCC-Variables-MI-ToolBar-windowX-opacity","0")}),(()=>{H("--SCC-Variables-MI-ToolBar-windowX-opacity","0.77")})),await f(document.getElementById("SC_winsay_cp_appearance__ToolBarMode__HideList__Other"),(()=>{H("--SCC-Variables-MI-ToolBar-Other-opacity","0")}),(()=>{H("--SCC-Variables-MI-ToolBar-Other-opacity","0.77")})),await f(document.getElementById("SC_winsay_cp_appearance__ShowWebIcon"),(()=>{h("ShowWebIcon",`${S}style/link/web.css`)}),(()=>{I(`${S}style/link/web.css`,"css")})),await f(document.getElementById("SC_winsay_cp_appearance__ShowFileIcon"),(()=>{h("ShowFileIcon",`${S}style/link/file.css`)}),(()=>{I(`${S}style/link/file.css`,"css")})),await g("SC_winsay_cp_appearance__status_msg_opacity",(async function(e){m(e)||H("--SCC-Variables-MI-status__msg_opacity",e)})),await f(document.getElementById("SC_winsay_cp_appearance__strengthen_backlinkList_panel_border"),(()=>{H("--SCC-Variables-backlinkList_panel_box-shadow","rgb(6 24 44 / 8%) -31px -13px 131px 12px, rgb(186 186 186 / 22%) 12px -23px 111px -5px inset")}),(()=>{A("--SCC-Variables-backlinkList_panel_box-shadow")})),await f(document.getElementById("SC_winsay_cp_appearance__strengthen_layout-tab-container"),(()=>{H("--SCC-Variables-MI-LayoutTabContainer_bgColor","linear-gradient(95deg, transparent, var(--b3-theme-surface-lighter), transparent)")}),(()=>{A("--SCC-Variables-MI-LayoutTabContainer_bgColor")})),await f(document.getElementById("SC_winsay_cp_appearance__SYSetting-AssetsIMG-Sticky"),(()=>{h("SYSetting-AssetsIMG-Sticky",`${S}style/sweet/sugar/appearance/SYSetting-AssetsIMG-Sticky.css`)}),(()=>{let e=document.getElementById("SYSetting-AssetsIMG-Sticky");e&&e.remove()}))}(),await async function(){await g("SC_winsay_cp_about__checkTime",(async function(e){m(e)||"Once"!==e||(await P(),"none"===document.querySelector("#SC-CP").style.display&&"true"===await C("SC_winsay_cp_about__AutoCheckSilently")?setTimeout((()=>{N(!0)}),31e3):setTimeout((()=>{N(!1)}),13e3))})),await g("SC_winsay_cp_about__checkAPI",(async function(e){if(!m(e)){let e=await D();e&&(document.querySelector("#SC_winsay_cp_version > span").innerHTML=e)}}))}(),await async function(){await g("SC_winsay_cp_custom__EXTmaxOpenTabCount",(async function(e){if(m(e)){let e=await y.getItem("SC_winsay_cp_custom__EXTmaxOpenTabCount__origin");m(e)||(window.siyuan.config.fileTree.maxOpenTabCount=parseInt(e),y.removeItem("SC_winsay_cp_custom__EXTmaxOpenTabCount__origin"))}else{let a=await y.getItem("SC_winsay_cp_custom__EXTmaxOpenTabCount__origin");m(a)&&await y.setItem("SC_winsay_cp_custom__EXTmaxOpenTabCount__origin",window.siyuan.config.fileTree.maxOpenTabCount),window.siyuan.config.fileTree.maxOpenTabCount=parseInt(e)}})),await g("SC_winsay_cp_custom__root_filter_light",(async function(e){if(!m(e))switch(e){case"5":H("--SCC-Variables-root-filter-light","brightness(0.6) opacity(0.85) grayscale(0.13) saturate(1.31) contrast(1.31)");break;case"4":H("--SCC-Variables-root-filter-light","brightness(0.7) opacity(0.88) grayscale(0.3) saturate(1.31) contrast(1.86)");break;case"3":H("--SCC-Variables-root-filter-light","brightness(0.9) grayscale(1) contrast(1.1)");break;case"2":H("--SCC-Variables-root-filter-light","saturate(1.3) brightness(0.77) contrast(1.58)");break;case"1":H("--SCC-Variables-root-filter-light","brightness(0.9) saturate(1.31) contrast(1.31)");break;default:H("--SCC-Variables-root-filter-light","none")}})),await g("SC_winsay_cp_custom__root_filter_dark",(async function(e){if(!m(e))switch(e){case"5":H("--SCC-Variables-root-filter-dark","invert(77%) contrast(1.13) brightness(0.99)");break;case"4":H("--SCC-Variables-root-filter-dark","brightness(0.58) opacity(0.98) saturate(1.38) contrast(0.97)");break;case"3":H("--SCC-Variables-root-filter-dark","brightness(0.9) grayscale(1) contrast(1.1)");break;case"2":H("--SCC-Variables-root-filter-dark","saturate(1.58) brightness(1.05) contrast(0.95)");break;case"1":H("--SCC-Variables-root-filter-dark","brightness(1.05) saturate(1.13) contrast(1.03)");break;default:H("--SCC-Variables-root-filter-dark","none")}})),await f(document.getElementById("SC_winsay_cp_custom__filter_timer"),(async()=>{window.winsay.storage.It_filterTimer&&clearInterval(window.winsay.storage.It_filterTimer),window.winsay.storage.It_filterTimer=setInterval((async()=>{if(v.isDuringTime("18:00","6:00")){let e=document.documentElement.style.getPropertyValue("--SCC-Variables-root-filter-light"),a=document.documentElement.style.getPropertyValue("--SCC-Variables-root-filter-dark");await y.setItem("SC_winsay_cp_custom__root_Lfilter_daily",e),await y.setItem("SC_winsay_cp_custom__root_Dfilter_daily",a),H("--SCC-Variables-root-filter-light",await y.getItem("SC_winsay_cp_custom__root_Lfilter_daily")),H("--SCC-Variables-root-filter-dark",await y.getItem("SC_winsay_cp_custom__root_Dfilter_daily"))}else H("--SCC-Variables-root-filter-light",""),H("--SCC-Variables-root-filter-dark","")}),3e3)}),(()=>{window.winsay.storage.It_filterTimer&&clearInterval(window.winsay.storage.It_filterTimer);let e=document.querySelector("#SC_winsay_cp_custom__root_filter_light"),a=document.querySelector("#SC_winsay_cp_custom__root_filter_dark");if(!m(e)&&!m(a)){let t=new Event("change",{bubbles:!0}),o=e._valueTracker;o&&o.setValue(""),e.dispatchEvent(t);let i=new Event("change",{bubbles:!0}),n=a._valueTracker;n&&n.setValue(""),a.dispatchEvent(i)}})),await g("SC_winsay_cp_custom__defaultS",(async function(e){})),await g("SC_winsay_cp_custom__LS",(async function(e){m(e)||("light"===k?await y.setItem(x,e).then((e=>{import("../switchLD-855beacf.js").then((async e=>{await e.iterLC()}))})):await y.getItem("SC_winsay_cp_custom__defaultS_auto"))})),await g("SC_winsay_cp_custom__DS",(async function(e){"dark"!==k||m(e)||await y.setItem(T,e).then((e=>{import("../switchLD-855beacf.js").then((async e=>{await e.iterDC()}))}))}))}(),await async function(){await g("SC_winsay_cp_assets__PCards",(async function(e){m(e)&&document.getElementById("assets__PCards")?document.getElementById("assets__PCards").remove():h("assets__PCards",`${S}style/sweet/sugar/assets/${e}`)}))}(),await async function(){await f(document.getElementById("SC_winsay_cp_filetree__Hide_untitle"),(()=>{H("--SCC-Variables-MI-DocTree-Untitle-opacity","0")}),(()=>{H("--SCC-Variables-MI-DocTree-Untitle-opacity","1")})),await f(document.getElementById("SC_winsay_cp_filetree__Hide_item_action_more"),(()=>{H("--SCC-Variables-MI-DocTree-item-action-more-display","none")}),(()=>{A("--SCC-Variables-MI-DocTree-item-action-more-display")})),await f(document.getElementById("SC_winsay_cp_filetree__HideSomeIcon2SeeSee"),(()=>{H("--SCC-Varibales-DocTree-icon-MaxWidth","0")}),(()=>{A("--SCC-Varibales-DocTree-icon-MaxWidth")})),await f(document.getElementById("SC_winsay_cp_filetree__ChangeIconAvailability"),(()=>{H("--SCC-Variables-ChangeIconAvailability","none")}),(()=>{A("--SCC-Variables-ChangeIconAvailability")})),await f(document.getElementById("SC_winsay_cp_filetree__DyeingNameAvailability"),(()=>{A("--SCC-Variables-DyeingName-Notebook"),A("--SCC-Variables-DyeingName-Doc")}),(()=>{H("--SCC-Variables-DyeingName-Notebook","var(--SCC-baseComponent-text-color-2)"),H("--SCC-Variables-DyeingName-Doc","var(--SCC-baseComponent-text-color-1)")})),await f(document.getElementById("SC_winsay_cp_filetree__Adaptive_display"),(()=>{h("MI-DocTree-Adaptive",`${S}style/sweet/MI-DocTree-Adaptive.css`),document.getElementById("BP__SC_winsay_cp_filetree__Adaptive_display").classList.add("fn__none")}),(()=>{I(`${S}style/sweet/MI-DocTree-Adaptive.css`,"css"),document.getElementById("BP__SC_winsay_cp_filetree__Adaptive_display").classList.remove("fn__none")})),await g("SC_winsay_cp_filetree__docFontsize",(async function(e){m(e)||(H("--SCC-Variables-MI-DocTree-docFontsize",`${e}pt`),document.getElementById("SC_winsay_cp_filetree__docFontsize__label").setAttribute("aria-label",`${e}`),await y.setItem("SC_winsay_cp_filetree__docFontsize__label",e))})),await g("SC_winsay_cp_filetree__nbFontsize",(async()=>{var e=await C("SC_winsay_cp_filetree__nbFontsize");m(e)||(H("--SCC-Variables-MI-DocTree-nbFontsize",`${e}pt`),document.getElementById("SC_winsay_cp_filetree__nbFontsize__label").setAttribute("aria-label",`${e}`),await y.setItem("SC_winsay_cp_filetree__nbFontsize__label",e))})),await g("SC_winsay_cp_filetree__nbMargin",(async function(e){m(e)||(H("--SCC-Variables-MI-DocTree-nbMargin",`${e}em`),document.getElementById("SC_winsay_cp_filetree__nbMargin__label").setAttribute("aria-label",`${e}`),await y.setItem("SC_winsay_cp_filetree__nbMargin__label",e))}))}(),await W(),await W(),await async function(){await f(document.getElementById("SC_winsay_cp_system__SelfProtection"),(()=>{let e=null;window.winsay.storage.It_SelfProtector&&clearInterval(window.winsay.storage.It_SelfProtector),window.winsay.storage.It_SelfProtector=setInterval((async()=>{window.siyuan.config.appearance.hideStatusBar&&(null==document.getElementById("Info")&&(e=new a({isCancel:!0,dragable:!1,XML:s,success(){console.log("点击了确定");let e=!1,a=document.querySelector("#toolbar #barSetting"),t=document.querySelector('.b3-tab-bar:not(.sc-custom-nav) [data-name="appearance"]');null==t&&(e=!0),e&&a.click(),t.click(),setTimeout((()=>{document.querySelector("#hideStatusBar").click()}),200),e&&setTimeout((()=>{document.elementFromPoint(1,1).click()}),200)},cancel(){console.log("点击了取消")},maskable:!0})),e&&await e.open((()=>{document.getElementById("Info").innerHTML="检测到底部状态栏被隐藏，主题设置入口不可用！是否立即开启？",document.getElementById("CoverWarming").innerHTML="若要禁用此提醒，请在主题设置中关闭【主题自我保护】"})));try{m("")}catch(e){console.error(e),alert("主题自我保护检测到异常：Sofill- 内核已被篡改，若重载无效请重新安装")}}),3e4)}),(()=>{window.winsay.storage.It_SelfProtector&&clearInterval(window.winsay.storage.It_SelfProtector)})),await f(document.getElementById("SC_winsay_cp_system__Ball"),(()=>{if("body--mobile"===l){let e=document.querySelector("#Sofill-MobileBall");e&&(e.style.display="none")}}),(()=>{if("body--mobile"===l){let e=document.querySelector("#Sofill-MobileBall");e?e.style.display="block":p("Sofill-MobileBall not found")}}))}()}async function O(){!function(){if(setTimeout((()=>{F(document.querySelector("#barDock > .b3-menu").children[0],"beforebegin","Sofill-CDUI-2","Sofill-CDUI-btn b3-menu__item")}),500),"body--mobile"===l){const e=document.getElementById("sidebar"),a=document.getElementById("menu");if(null==document.getElementById("Sofill-CDUI-1")){const t=document.createElement("svg");t.setAttribute("data-type",""),t.id="Sofill-CDUI-1",t.className="Sofill-CDUI-btn toolbar__icon",t.innerHTML='<svg id="CP_ep1" viewBox="0 0 32 32">\n      <path d="M25.143 10.667h-1.524v-3.048c0-4.206-3.413-7.619-7.619-7.619s-7.619 3.413-7.619 7.619v3.048h-1.524c-1.676 0-3.048 1.371-3.048 3.048v15.238c0 1.676 1.371 3.048 3.048 3.048h18.286c1.676 0 3.048-1.371 3.048-3.048v-15.238c0-1.676-1.371-3.048-3.048-3.048zM11.428 7.619c0-2.53 2.042-4.571 4.571-4.571s4.571 2.042 4.571 4.571v3.048h-9.143v-3.048zM25.143 28.952h-18.286v-15.238h18.286v15.238zM16 24.381c1.676 0 3.048-1.371 3.048-3.048s-1.371-3.048-3.048-3.048-3.048 1.371-3.048 3.048 1.371 3.048 3.048 3.048z"></path>\n    </svg>';const o=document.createElement("div");o.id="Sofill-CDUI-2",o.className="Sofill-CDUI-btn b3-list-item b3-list-item--big",o.innerHTML='<span class="b3-list-item__icon b3-list-item__graphic">🏳️&zwj;🌈</span><span class="b3-list-item__text">主题设置</span>',e.children[0].insertAdjacentElement("beforeend",t),document.querySelector("#Sofill-CDUI-1").addEventListener("click",(async e=>{$.open(),await P(),e.stopPropagation()})),document.querySelector("#toolbarMore").addEventListener("click",(e=>{setTimeout((()=>{a.insertBefore(o,a.children[0]),document.querySelector("#Sofill-CDUI-2").addEventListener("click",(async e=>{$.open(),await P()}))}),100)}))}}else{var e=document.querySelector("#barHelp");if(e?(e.addEventListener("click",(e=>{let a=e.target,t=a.parentNode,o=t.parentNode,i=o.parentNode;"toolbarVIP"===o.id||"toolbarVIP"===i.id?(document.querySelector("#toolbar #barSetting").click(),document.querySelector('.b3-tab-bar:not(.sc-custom-nav) [data-name="account"]').click(),e.stopPropagation()):"barMode"===t.id||"barMode"===o.id?(document.querySelector("#toolbar #barMode").click(),e.stopPropagation()):t.classList.contains("b3-menu__item")||o.classList.contains("b3-menu__item")?console.log(a.innerHTML):"barTopHelp"===a.id||"barTopHelp"===t.id?a.id="barHelp":e.stopPropagation()}),!0),e.setAttribute("class","toolbar__item"),e.children[0].innerHTML='<use xlink:href="#iconMore"></use>',F(e.children[1],"beforeend","Sofill-CDUI-1","Sofill-CDUI-btn b3-menu__item")):setTimeout((()=>{F(document.querySelector("#barDock > .b3-menu").children[0],"beforebegin","Sofill-CDUI-2","Sofill-CDUI-btn b3-menu__item")}),100),e&&null==document.getElementById("sc_drawer")){var a=document.createElement("div");a.id="sc_drawer",a.style.display="flex",a.style.flexDirection="row-reverse",a.style.borderBottom="2px dashed var(--b3-theme-surface-lighter)",a.style.minHeight="2rem",setTimeout((()=>{a.setAttribute("data-themeInfo",`${_}`)}),1e3),e.children[1].insertAdjacentElement("afterbegin",a)}if(document.querySelector("body.android.body--desktop")){let e='<svg><use xlink:href="#iconQuit"></use></svg>',a=document.querySelector("#toolbar"),t=document.createElement("div");t.id="barQuit",t.className="toolbar__item b3-tooltips b3-tooltips__sw",t.setAttribute("aria-label","退出 Quit"),t.innerHTML=e,a.insertAdjacentElement("beforeend",t),t.onclick=()=>{document.body.classList.contains("client--browser")?(document.querySelector("#toolbar #barSetting").click(),document.querySelector('.b3-tab-bar:not(.sc-custom-nav) [data-name="about"]').click(),setTimeout((()=>{document.querySelector("#menuSafeQuit").click(),document.elementFromPoint(1,1).click()}),500)):window.location.href="siyuan://api/system/exit"}}}}(),await async function(){let e=await y.getItem("SC_winsay_cp_custom-nav-bind-id");m(e)||(document.getElementById(e).checked=!0);document.querySelectorAll("input[id^='sc-custom-nav-bind-id'][type='radio']").forEach((async e=>{e.addEventListener("click",(async()=>{e.checked&&!0===e.checked&&await y.setItem("SC_winsay_cp_custom-nav-bind-id",e.id)}))}))}(),await z(),await async function(){let e=document.querySelector("#SC-CP");e?await d(e):console.error("CP_dialog not found")}(),await async function(){document.getElementById("SC_winsay_cp_system__ClearlocalStorage").addEventListener("click",(async()=>{new a({isCancel:!0,dragable:!1,XML:t,success(){console.log("点击了确定");var e=0;y.length().then((a=>{for(var t=0;t<a;t++)y.key(t).then((a=>{(a.startsWith("winsay_")||a.startsWith("SC_winsay_"))&&(y.removeItem(a),console.log(`${a} removed`),e++)}))})),p(`已清理 ${e} 项<br>页面即将刷新`),setTimeout((()=>{window.location.reload()}),3e3)},cancel(){console.log("点击了取消")},maskable:!0}).open()})),document.getElementById("SC_winsay_cp_system__ResetAllSettings").addEventListener("click",(async()=>{new a({isCancel:!0,dragable:!1,XML:o,success(){console.log("点击了确定");var e=0;y.length().then((a=>{for(var t=0;t<a;t++)y.key(t).then((a=>{a.startsWith("SC_winsay_cp")&&(y.removeItem(a),console.log(`${a} removed`),e++)}))})),p(`已重置 ${e} 项<br>页面即将刷新`),setTimeout((()=>{window.location.reload()}),3e3)},cancel(){console.log("点击了取消")},maskable:!0}).open()})),document.getElementById("SC_winsay_cp_system__Refresh").addEventListener("click",(async()=>{setTimeout((()=>{window.location.reload()}),300)})),document.getElementById("SC_winsay_cp_system__ShowDebugInfo").addEventListener("click",(async()=>{setTimeout((()=>{new a({isCancel:!0,dragable:!1,XML:i,success(){console.log("点击了确定")},cancel(){console.log("点击了取消")},maskable:!1}).open((()=>{document.getElementById("UpdateInfo").innerHTML=`\n<div style="max-height: 58vh;overflow: auto;white-space: nowrap;">\nlocalIPs  <br><code class="fn__code">${window.siyuan.config.localIPs}</code><br><br>\napi.token  <br><code class="fn__code">${window.siyuan.config.api.token}</code><br><br>\nsystem.homeDir  <br><code class="fn__code">${window.siyuan.config.system.homeDir}</code><br><br>\nsystem.workspaceDir  <br><code class="fn__code">${window.siyuan.config.system.workspaceDir}</code><br><br>\nsystem.confDir  <br><code class="fn__code">${window.siyuan.config.system.confDir}</code><br><br>\nsystem.dataDir  <br><code class="fn__code">${window.siyuan.config.system.dataDir}</code><br><br>\nappearance.darkThemes  <br><code class="fn__code">${window.siyuan.config.appearance.darkThemes}</code><br><br>\nappearance.lightThemes  <br><code class="fn__code">${window.siyuan.config.appearance.lightThemes}</code><br><br>\nappearance.mode  <br><code class="fn__code">${window.siyuan.config.appearance.mode}</code><br><br>\nappearance.themeDark  <br><code class="fn__code">${window.siyuan.config.appearance.themeDark}</code><br><br>\nappearance.themeLight  <br><code class="fn__code">${window.siyuan.config.appearance.themeLight}</code><br><br>\nappearance.themeVer  <br><code class="fn__code">${window.siyuan.config.appearance.themeVer}</code><br><br>\nappearance.blockRefTextLeft  <br><code class="fn__code">${window.siyuan.config.export.blockRefTextLeft}</code><br><br>\nappearance.blockRefTextRight  <br><code class="fn__code">${window.siyuan.config.export.blockRefTextRight}</code><br><br>\nfileTree.maxOpenTabCount（页签打开最大数量）  <br><code class="fn__code">${window.siyuan.config.fileTree.maxOpenTabCount}</code><br><br>\nsystem.fixedPort（是否固定端口）  <br><code class="fn__code">${window.siyuan.config.system.fixedPort}</code><br><br>\nappearance.hideStatusBar（修改没有效果，仅用于判断是否隐藏底部状态栏）  <br><code class="fn__code">${window.siyuan.config.appearance.hideStatusBar}</code><br><br>\nappearance.customCSS（是否开启自定义主题）  <br><code class="fn__code">${window.siyuan.config.appearance.customCSS}</code>\n</div>\n`,console.warn(window.siyuan.languages)}))}),300)})),document.getElementById("SC__exportData").addEventListener("click",(async()=>{var e=document.querySelector("#SC__exportData_a"),a=0,t=0,o={winsay:{},sy_editor:{},sy_keymap:{}};y.length().then((e=>{for(var i=0;i<e;i++)y.key(i).then((e=>{if(e.startsWith("winsay_")||e.startsWith("SC_winsay_"))try{y.getItem(e).then((a=>{o.winsay[e]=a})),t++}catch(a){console.error(`${e} is not a valid value for ${a}`),o.winsay[e]=null}finally{a++}}))}));let i=await y.getItem("SC_winsay_cp__exportData__EXT_sy_editor");o.sy_editor="true"===i?window.siyuan.config.editor:"禁用了附加这部分数据";let n=await y.getItem("SC_winsay_cp__exportData__EXT_sy_keymap");if(o.sy_keymap="true"===n?window.siyuan.config.keymap:"禁用了附加这部分数据","true"===await y.getItem("SC_winsay_cp__exportData__EXT_sy_sync")?(o.sy_sync=window.siyuan.config.sync,o.sy_repo=window.siyuan.config.repo):(o.sy_sync="禁用了附加这部分数据",o.sy_repo="禁用了附加这部分数据"),b())document.body.classList.contains("user--Sub")?(w.putFile(`/data/snippets/Sofill-ConfigData__${Date.now()}.json`,JSON.stringify(o)),p(`导出 ${t}/${a}<br>【订阅用户权益生效提示】备份已保存到同步文件夹 ${window.siyuan.config.system.dataDir}/snippets/`)):p("平台受限，仅支持订阅用户导出");else{var s=new Blob([JSON.stringify(o)]);e.href=URL.createObjectURL(s),e.download="Sofill-ConfigData.json",e.click(),p(`导出 ${t}/${a}`),L&&document.body.classList.contains("user--Sub")&&L.writeFile(`${window.siyuan.config.system.dataDir}/snippets/Sofill-ConfigData__${Date.now()}.json`,JSON.stringify(o),"utf-8",(function(e){e?console.error(e):(console.log("Write successfully~~"),p(`【订阅用户权益生效提示】备份已保存到同步文件夹 ${window.siyuan.config.system.dataDir}/snippets/`))}))}})),document.getElementById("SC__importData").addEventListener("click",(async()=>{var e=document.querySelector("#SC__importData_i");e.onchange=()=>{if(""===this.value||this.files.length<1)return console.warn("Oops..."),!1;var e=0,t=0,o={},i=0,s=new FileReader;s.readAsText(this.files[0]),s.onload=async function(s){var r=s.target.result;try{r=JSON.parse(r)}catch(e){return void p(`无效数据 ${e}`,3e3)}for(var c in console.log(r),r)if(o[c]={},"winsay"===c)for(var l in r[c])e+=1,r[c][l]!==await y.getItem(l)&&(t+=1,o[c][l]=`${await y.getItem(l)} => ${r[c][l]}`);console.warn("================================ Changes Preview ================================"),console.log(o),console.warn("================================================================================");let _=new a({isCancel:!0,dragable:!1,XML:n,success(){for(var a in console.log("点击了确定"),r)if(o[a]={},"winsay"===a)for(var n in r[a])try{y.setItem(n,r[a][n]).then((e=>{i+=1,console.warn(`${n} updated`)}))}catch(e){console.error(e)}p(`导入成功 ${i}/${e}，覆盖 ${t} 项`)},cancel(){console.log("点击了取消")},maskable:!0});await _.open((()=>{document.getElementById("CoverWarming").innerHTML=`影响 ${t}/${e} 项`}))}},e.value=""})),document.getElementById("SC_winsay_cp__checkUpdateBtn").addEventListener("click",(async()=>{N()}))}()}c()&&(L=require("fs"),require("path")),null==document.getElementById("SC-CP")&&($=new e({isCancel:!0,dragable:!1,maskable:!0})),window.winsay.localVersion={},window.winsay.localVersion.version="",window.winsay.localVersion.useBazaar="",window.winsay.localVersion.useGithub="",window.winsay.localVersion.vinfoHTML="",window.winsay.storage.SC_winsay_cp_editor__DocWidthMode__previousValue="null",window.winsay.storage.SC_winsay_cp_T__t2=null,window.winsay.storage.It_DocWidthMode=null,window.winsay.storage.It_SelfProtector=null,window.winsay.storage.It_filterTimer=null,setTimeout((async()=>{await O()}),0);
