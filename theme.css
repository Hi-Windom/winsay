@import url("style/root.css");
@import url("style/begin-setting.css");
@import url("style/TextColorMenu.css");
@import url("style/CodeBlock.css");
@import url("style/TabBar.css");
@import url("style/Printer.css");
@import url("style/NodeHeading-biaoti.css");
@import url("style/Task.css");

@keyframes menu {
    0% {opacity: 0.13;}
    50% { transform: scale(1.01);opacity: 0.5;}
    100% { transform: scale(1);}
}
@keyframes item-focus {
    0% { transform: scale(.01);opacity: 0.5;}
    100% { transform: scale(1); }
}
@keyframes flex-column{
    0% { transform: scale(1,.86);transform-origin: 0 0 ;opacity: 0;}
    100% { transform: scale(1,1);transform-origin: 0 0 ;}
}
@keyframes tree-list{
    0% { transform: scale(1,1);transform-origin: 0 0 ;opacity: 0;}
    33% { transform: scale(1,1.01);transform-origin: 0 0 ;opacity: 0.58;}
    77% { transform: scale(1,1.01);transform-origin: 0 0 ;opacity: 0.85;}
    100% { transform: scale(1,1); transform-origin: 0 0 ;}
}
.layout__wnd--active .layout-tab-bar .item--focus::after{
	animation: item-focus 0.2s ease-in-out;
}
.protyle-util{
    animation: menu 0.2s ease-in-out;
}
/*侧栏展开动画*/
#layouts>.fn__flex>.fn__flex-column>.fn__flex>div[data-type=wnd]>.layout-tab-container>.fn__flex-column{animation: flex-column  0.13s ease-in-out;}
.b3-list-item--hide-action{
    animation: tree-list  0.13s ease-in;
}

/*引用块弹出框*/
.block__popover {
    min-height: 13vh;
    max-height: 58vh;
}
.block__popover--open{
	animation: menu 0.13s ease-in-out;
    opacity: .96;
    box-shadow: rgb(38, 57, 77) 0px 20px 30px -10px !important;
}
.block__popover--open:hover {
    opacity: 1;
    box-shadow: rgba(85, 91, 255,0.31) 0px 0px 0px 3px, rgba(31, 193, 27,0.38) 0px 0px 0px 6px, rgba(255, 217, 19,0.58) 0px 0px 0px 9px, rgba(255, 156, 85,0.96) 0px 0px 58px 12px, rgba(255, 85, 85,0.88) 0px 0px 0px 15px !important;
}
.block__popover--open:hover *:not(span){
    background-color: var(--SCC-White) !important;
}
/* 当前打开文档右上角【更多】按钮位置和大小微调 */
.protyle-breadcrumb > button svg {
    scale: 1.31 !important;
    margin-right: 20px;
    margin-top: 10px;
}

/* 【设置】-【账户】界面美化 */
.config-account__name a {
    color: var(--SCC-Orange-Windom);
    text-shadow: 2px 2px 2px #737373;
}
.ft__center > a > span > big {
    color: var(--SCC-Orange-Windom);
    text-shadow: 1px 1px 1px #320b11;
}
.ft__center > a:hover > span > big {
    color: var(--SCC-Blue-186);
    text-shadow: none;
}

/* 优化块级清除样式按钮显示效果 */
.b3-menu__label > div[aria-label="清除样式"] span {
    color:var(--b3-theme-background);
}
.b3-menu__submenu--row button:nth-last-child(2) {
    background-color:var(--b3-theme-surface-lighter) !important;
    margin-top: 8px!important;
    margin-bottom: 8px!important;
}
[aria-label="清除样式"]:after{
	content:"Clear Block Style";
	color:var(--SCC-Gray-Soledar);
    opacity: .58;
	position:absolute;
	left:30px;
    font-size: .77rem;
	bottom:-3px;
}
[aria-label="清除样式"]:hover:after{
	content:"Clear Block Style";
	color: var(--b3-theme-on-background);
    opacity: 1;
	position:absolute;
	left:30px;
    font-size: .77rem;
	bottom:-3px;
}

/* 搜索击中高亮应显著区分于文本背景色 */
.b3-list mark, .protyle-wysiwyg [data-node-id] span[data-type=search-mark] {
    background-color: var(--SCC-Green-186-light);
    color: var(--b3-theme-on-background);
}

/* 默认颜色加粗样式应当保留原颜色 */
.b3-typography span[data-type=strong],
.protyle-wysiwyg span[data-type=strong]
{
    color: inherit !important;
    font-weight: bold;
}

/* 减少左下角元素对视线的抢夺 */
#barDock svg {
    opacity: .58;
    scale: 1.13 !important;
    margin-left: 5px;
    margin-right: 22px;
    margin-bottom: 5px;
}
#barDock:hover svg {
    opacity: 1;
}
.status__msg {
    opacity: .3;
}
.status__msg:hover {
    opacity: .9;
}
/* 减少右下角元素对视线的抢夺 */
#barFeedback, #barLock, #barDebug, #barHelp {
    opacity: .13;
}
#barFeedback:hover, #barLock:hover, #barDebug:hover, #barHelp:hover {
    opacity: 1;
}
.status__counter{
    opacity: .58;
}
.status__counter:hover{
    opacity: 1;
}

/* 避免搜索框阴影样式被遮挡 */
.search__header {
    z-index: 99;
}

/* 设置面板关闭按钮 */
.fn__a {
    color: var(--SCC-Cyan-186-light);
}
.fn__a:hover {
    color: var(--SCC-Cyan-186);
}
/* 搜索图标 */
.b3-form__icon-icon, .search__arrowdown {
    color: var(--SCC-Blue-186-light);
}

/* 按钮的样式 */
.b3-button--outline {
    color: var(--SCC-White);
    background-color: var(--SCColor);
    box-shadow: rgba(254,239,234,0.13) 0px 2px 1px, rgba(254,239,234,0.13) 0px 4px 4px, rgba(254,239,234,0.13) 0px 8px 4px, rgba(254,239,234,0.13) 0px 6px 8px;
}
.b3-button--outline:focus, .b3-button--outline:hover {
    color: var(--SCC-Purple-Soledar);
    background-color: var(--b3-theme-primary-lightest);
    box-shadow: rgba(254,239,234, 0.4) 0px 3px, rgba(0,6,85, 0.3) 0px 5px, rgba(72,69,80, 0.1) 0px 8px;
}
/* 输入框样式 */
.b3-text-field, .pcr-app .pcr-interaction .pcr-result {
    border: 1px;
    border-radius: 4px;
    box-shadow: rgba(128,81,231,0.31) 3px 3px 6px 0px inset, rgba(255, 255, 255, 0.5) -3px -3px 6px 1px inset;
    padding: 4px 8px;
    line-height: 20px;
    box-sizing: border-box;
    color: var(--b3-theme-on-background);
    transition: box-shadow 120ms 0ms cubic-bezier(0, 0, 0.2, 1);
    background-color: var(--b3-theme-background);
}
.b3-text-field:hover {
    box-shadow: rgba(6, 24, 44, 0.4) 0px 0px 0px 2px, rgba(6, 24, 44, 0.65) 0px 4px 6px -1px, rgba(255, 255, 255, 0.08) 0px 1px 0px inset;
}
.b3-text-field:focus {
    box-shadow: rgba(0, 0, 0, 0.25) 0px 14px 28px, rgba(0, 0, 0, 0.22) 0px 10px 10px;
}
/* 选择框样式 */
.b3-dialog--open .b3-dialog__container .b3-select {
    border: 1px solid var(--SCC-Purple-186-light);
    padding-top: 0px !important;
    padding-bottom: 0px !important;
    box-shadow: rgba(6, 24, 44, 0.4) 0px 0px 0px 2px, rgba(6, 24, 44, 0.65) 0px 4px 6px -1px, rgba(255, 255, 255, 0.08) 0px 1px 0px inset;
}
/* 检查框样式 */
.b3-switch:checked {
    background-color: var(--SCC-Purple-186-light);
}
.b3-switch:checked:after {
    background-color: var(--SCC-Purple-186);
    border-color: var(--SCC-Purple-186);
}

/* 嵌入内容块 embed */
.protyle-wysiwyg__embed {
    /* box-shadow: rgba(6, 24, 44, 0.31) 0px 0px 1px 2px, rgba(6, 24, 44, 0.13) 0px 2px 2px -1px inset; */
    border-radius: 6px;
    opacity: .86;
    background: var(--SCC-Gray-HellisePotter);
    box-shadow: inset 9px 9px 29px #cacfde, inset -9px -9px 29px #f2f7ff;
}
.protyle-wysiwyg__embed:hover, .protyle-wysiwyg [data-node-id].sb:hover {
    box-shadow: rgba(6, 24, 44, 0.31) 0px 0px 1px 2px inset;
    border-radius: 6px;
    opacity: 1;
}
/* 隐藏 NodeBlockQueryEmbed 左边缘细线 */
.protyle-wysiwyg [data-node-id].render-node[data-type=NodeBlockQueryEmbed] {
    border-left: 1px dashed transparent !important;
}

/* 普通标签tag样式 */
.protyle-wysiwyg [data-node-id]:not([data-type="NodeHeading"]) span[data-type~=tag] {
    background-color: var(--SCC-White-light);
    transition: all .2s cubic-bezier(0.645, 0.045, 0.355, 1);
    color: var(--text-focus);
    border-radius: 5px;
    position: relative;
    padding: .1rem .3rem .1rem .1rem;
    font-size: 85%;
    box-shadow: var(--SCColor) 3.6em 0px 0px -2.2em inset,0px 0px 0px 1px inset;
    border: none;
    margin: .2rem;
}
/* 普通标签tag样式的前缀部分 */
.protyle-wysiwyg [data-node-id]:not([data-type="NodeHeading"]) span[data-type~=tag]::before {
    content: "#";
    color: var(--SCC-White);
    display: inline-block;
    margin-right: .2rem;
    padding: .2rem;
}
/* 标题中标签tag样式在 NodeHeading-biaoti.css 中定义 */


/* 解决特定缩放下出现意外滚动条 */
.fn__flex-column {
    overflow: hidden;
}

/* 删除线 */
.b3-typography s,
.b3-typography span[data-type=s],
.protyle-wysiwyg s,
.protyle-wysiwyg span[data-type=s] {
    text-decoration: line-through;
    text-decoration-color: var(--b3-protyle-inline-s-color);
    color: var(--b3-protyle-inline-s-color);
}

/* kbd 按键的样式 */
.b3-typography kbd, .b3-typography span[data-type~=kbd], .protyle-wysiwyg kbd, .protyle-wysiwyg span[data-type~=kbd]{
    border-radius: 6px;
    color: var(--SCC-Black-186);
    background-color: var(--SCC-White-light);
    vertical-align: 2px;
    /* box-shadow: rgba(191,250,226, 0.4) 0px 2px, rgba(72,69,80,0.3) 0px 4px; // Sofill+ 备选方案 */
    box-shadow: rgba(254,239,234, 0.4) 0px 3px, rgba(0,6,85, 0.3) 0px 5px;
    border: 0px solid;
    margin-right: 2px;
    font-family: var(--b3-font-family);
}

/* 行内代码样式 */
span[data-type=code] {
    border-radius: 6px;
    color: var(--SCC-White);
    background-color: var(--SCC-primary-light) !important;
    vertical-align: 2px;
    box-shadow: rgba(0, 0, 0, 0.4) 0px 2px 4px, rgba(0, 0, 0, 0.3) 0px 3px 2px -3px, rgba(0, 0, 0, 0.2) 0px -3px 0px inset;
    border: 0px solid;
    margin-right: 2px;
    font-family: var(--b3-font-family-code);
}
span[data-type=code]::before {
    content: "<";
    color: var(--SCC-White-lighter);
    display: inline-block;
    margin-right: .1rem;
    padding: 0;
}
span[data-type=code]::after {
    content: ">";
    color: var(--SCC-White-lighter);
    display: inline-block;
    margin-left: .1rem;
    padding: 0;
}

/* 双链样式 */
.protyle-wysiwyg [data-node-id] span[data-type~=block-ref]::before {
    /*前半部分的符号*/
    content: "⁅⁅";
    color: var(--SCC-Red-WPS);
    font-weight: bold;
    display: inline-block;
    width: 1.31em;
    text-align: center;
  }
  .protyle-wysiwyg [data-node-id] span[data-type~=block-ref]::after {
    /*后半部分的符号*/
    content: "⁆⁆";
    color: var(--SCC-Red-WPS);
    /* font-size: 1em; */
    /* margin-right: 0.5em; */
    font-weight: bold;
    display: inline-block;
    width: 1.31em;
    /* text-align: left; */
    text-align: center;
  }
  .protyle-wysiwyg [data-node-id] span[data-type~=block-ref]:hover {
    padding-bottom: 3px;
    animation: waveMove 1s infinite linear;
    background: var(--custom-span-ref-animation-icon) repeat-x 0 100%;
    background-size: 16px auto;
  }


@media screen and (min-width: 960px) {

    /* 隐藏左上角设置按钮，鼠标悬浮时显示 */
    #toolbar .toolbar__item svg {
        opacity: 0;
    }

    #toolbar:hover svg {
        opacity: 0.58;
    }
    #toolbar .toolbar__item:hover svg {
        opacity: 1;
        color: var(--SCC-Red-Firole);
    }
    /* windowControls 视觉效果优化 */
    #windowControls svg {
        opacity: 1 !important;
    }
    /* 优化右上角窗口关闭按钮焦点样式 */
    #closeWindow:hover svg {
        color: var(--SCC-Gray-HellisePotter) !important;
    }

    /* 代码块顶部添加风格元素 */
    .code-block::after {
        content: ' ';
        position: absolute;
        background: #ff0000;
        box-shadow: 57px 0 #0070c0, 113px 0 #ff3399, 170px 0 #912997;
        border-radius: var(--b3-border-radius-round);
        top: 10px;
        left: 38px;
        height: 3px;
        width: 58px;
       z-index: 1;
    }

}
@media screen and (max-width: 960px) {
    /* 代码块顶部添加风格元素 ，适配手机端*/
    .code-block::after {
        content: ' ';
        position: absolute;
        background: #ff0000;
        box-shadow: 13px 0 #0070c0, 26px 0 #ff3399, 39px 0 #912997;
        border-radius: var(--b3-border-radius-round);
        top: 10px;
        left: 13px;
        height: 3px;
        width: 13px;
       z-index: 1;
    }
    /* 代码块行号，适配手机端 */
    .protyle-linenumber__rows {
        padding: 22px 4px;
        width: 1.3em;
    }
    .protyle-linenumber {
        margin-left: 1.3em;
    }
    /* 宽度过小时隐藏 */
    ul.layout-tab-bar li [title="新建文档"], ul.layout-tab-bar li [title="更多"]  {
        display: none;
    }
}
.b3-typography, .protyle-wysiwyg {
    overflow: hidden;
}

/* 表格100%宽度 */
.protyle-wysiwyg table,
.b3-typography table {
    display: table;
    width: 100%;
    font-size: 90%;
}

.b3-typography table tr,
.protyle-wysiwyg table tr {
    background-color: transparent;
}

/*设置表格表头样式*/
table th {
    font-weight: bold;
    text-align: center;
    background-color: var(--SCC-Red-WPS-lighter) !important;
}

/* 设置表格内部边框 */
th, td {
    border: 0.25pt solid var(--SCC-Red-WPS) !important;
    border-collapse: collapse;
}

/* 表格奇偶行不同颜色 */
tbody tr:nth-child(2n) {
    background-color: var(--SCC-White-light) !important;
}

tbody tr:nth-child(2n + 1) {
    background-color: var(--SCC-White) !important;
}

/* 侧边栏引用计数 */
.counter {
    color: var(--SCC-Red-WPS);
    background-color: var(--SCC-Purple-186-lightest);
    border-radius: 13px;
}
/* 文档内引用计数 */
.protyle-attr--refcount {
    right: 0px;
    top: 0px;
    position: absolute;
    line-height: 16px;
    padding: 0 4px;
    margin-top: 0px;
    margin-right: 0px;
    color: var(--SCC-Red-WPS);
    border-radius: 13px;
    font-size: 12px;
    user-select: none;
    cursor: pointer;
    height: 16px;
    background-color: var(--SCC-Purple-186-lightest);
}
/* -------------------------------------------------代码块样式--------------------------------------------------- */
.code-block {
    border-radius: 7px !important;
    background-color: transparent !important;
    border: 0.1em solid var(--b3-border-color) !important;
    margin-left: 4px !important;
}
/* 代码块主体部分设置 */
.protyle-reset .hljs,
.protyle-wysiwyg .hljs, .b3-typography .hljs {
    padding-top: 4px !important;
    padding-bottom: 4px !important;
    padding-left: 16px;
    font-family: var(--b3-font-family-code);
    background-size: 20px 20px;
    background-image: none !important;
    background: transparent !important;
    border-top-right-radius: 4px;
    /* background-color: var(--b3-theme-background2); */
    /* z-index: -1; */
}
/*  代码块行数 */
.protyle-linenumber__rows {
    margin-top: 32px !important;
    padding: 4px;
    background-color: transparent !important;
    margin-bottom: 0px;
    font-family: var(--b3-font-family-code);
    border-top-left-radius: 4px;
}



/* 搜索界面标签页中文字居中 */
.b3-dialog--open .b3-dialog__container span.item__text {
    padding: 4px !important;
}

/* 给设置界面选择的地方加上边框 */
.b3-dialog--open .b3-dialog__container .b3-select {
    border: 1px solid var(--SCC-Purple-186-lighter);
}
/* 设置左侧选中样式 */
li.b3-list-item--focus.b3-list-item.b3-list-item--big, li.b3-list-item--focus.b3-list-item.b3-list-item--big svg.b3-list-item__graphic {
    color: var(--SCC-Blue-186);
}

/* 集市主题详情页 */
.config-bazaar__readme {
    background-color: var(--b3-theme-background);
    z-index: 99;
}


/* PDF */
.textLayer,
.pdf__resize {
    /* dark 蓝色、紫色背景显示不清楚，文档位于 https://github.com/siyuan-note/siyuan/issues/5351 */
    mix-blend-mode: multiply;
}

.b3-typography div.hljs, .protyle-wysiwyg div.hljs {
    background-color: #f8f9fa;
}

