/*!
*
*   █████▒█    ██  ▄████▄   ██ ▄█▀       ██████╗ ██╗   ██╗ ██████╗
* ▓██   ▒ ██  ▓██▒▒██▀ ▀█   ██▄█▒        ██╔══██╗██║   ██║██╔════╝
* ▒████ ░▓██  ▒██░▒▓█    ▄ ▓███▄░        ██████╔╝██║   ██║██║  ███╗
* ░▓█▒  ░▓▓█  ░██░▒▓▓▄ ▄██▒▓██ █▄        ██╔══██╗██║   ██║██║   ██║
* ░▒█░   ▒▒█████▓ ▒ ▓███▀ ░▒██▒ █▄       ██████╔╝╚██████╔╝╚██████╔╝
*  ▒ ░   ░▒▓▒ ▒ ▒ ░ ░▒ ▒  ░▒ ▒▒ ▓▒       ╚═════╝  ╚═════╝  ╚═════╝
*  ░     ░░▒░ ░ ░   ░  ▒   ░ ░▒ ▒░
*  ░ ░    ░░░ ░ ░ ░        ░ ░░ ░
*           ░     ░ ░      ░  ░
*
* winsay v2.0
* https://github.com/Hi-Windom/winsay
* QQ 694357845
*
* For the brave souls who get this far: You are the chosen ones,
* the valiant knights of programming who toil away, without rest,
* fixing our most awful code. To you, true saviors, kings of men,
* I say this: never gonna give you up, never gonna let you down,
* never gonna run around and desert you. Never gonna make you cry,
* never gonna say goodbye. Never gonna tell a lie and hurt you.
*
*/
"use strict";const e=document.getElementById("themeStyle"),n="theme-color-style";var t="Sofill";t=window.siyuan.config.appearance.mode?window.siyuan.config.appearance.themeDark:window.siyuan.config.appearance.themeLight;var a="winsay";switch(t){case"Sofill+":a="lanco";break;case"Sofill=":a="lili"}const i={STYLE_COLOR:"custom-id-style-theme-color",BUTTON_TOOLBAR_CHANGE_COLOR:"custom-id-button-toolbar-change-color"},o=["root.css","root-L-Blue.css","root-L-Red.css","root-L-Pink.css","root-L-Green.css","root-L-Yellow.css"],s="root.css",r=["root-D-BlackGoldBlue.css","root-D-InkGreenPurple.css"],l="root-D-BlackGoldBlue.css",c="SC_winsay_cp_custom__LS",_="SC_winsay_cp_custom__DS";var d=function*(e){for(let n=0;;n=(n+1)%e.length)yield e[n]},u=function*(e){for(let n=0;;n=(n+1)%e.length)yield e[n]},f=(()=>{let e=new URL(window.location.href);switch(!0){case e.pathname.startsWith("/stage/build/app"):return"body--app";case e.pathname.startsWith("/stage/build/desktop"):return"body--desktop";case e.pathname.startsWith("/stage/build/mobile"):return"body--mobile";default:return null}})();window.siyuan.config.api.token;const p="Sofill-";window.winsay={cp:{awaitInitItem:0,inited:0,listened:0},funs:{},ekits:{},where:{themeRoot:window.lili?`${window.lili.where.themeRoot}eHiWindom/winsay/`:`/appearance/themes/${p}/`,localThemeName:window.lili?"winsay":p},storage:{}};let b="";if(1===window.siyuan.config.appearance.mode)document.body.classList.add("mode--dark"),window.lili||(window.winsay.where.localThemeName=window.siyuan.config.appearance.themeDark,b=new URL(e.href).pathname.replace("theme.css",""));else document.body.classList.add("mode--light"),window.lili||(window.winsay.where.localThemeName=window.siyuan.config.appearance.themeLight,b=new URL(e.href).pathname.replace("theme.css",""));window.siyuan.config.system.confDir;const v=`${b}style-S2/`
/*!
* sofill v1.0.66
* https://github.com/Hi-Windom/Sofill
* https://www.npmjs.com/package/sofill
*/;function y(e,n,t=null){var a=document.createElement(n);return t&&(a.id=t),e.appendChild(a),a}const m=e=>{document.body.classList.add(e)},h=e=>{document.body.classList.remove(e)},w=e=>document.body.classList.contains(e),g=(e,n)=>{document.documentElement.style.setProperty(e,n)},S=e=>{document.documentElement.style.removeProperty(e)};
/*!
* sofill v1.0.66
* https://github.com/Hi-Windom/Sofill
* https://www.npmjs.com/package/sofill
*/
var C="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function x(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var I={};
/*!
* sofill v1.0.66
* https://github.com/Hi-Windom/Sofill
* https://www.npmjs.com/package/sofill
*/
function k(e,n){const t=e.split("."),a=n.split("."),i=t.length,o=a.length,s=Math.min(i,o);let r=0;for(;r<s;r++){let e=parseInt(t[r]),n=parseInt(a[r]);if(e>n)return 1;if(e<n)return-1}if(i>o){for(let e=r;e<i;e++)if(0!==parseInt(t[e]))return 1;return 0}if(i<o){for(let e=r;e<o;e++)if(0!==parseInt(a[e]))return-1;return 0}return 0}({get exports(){return I},set exports(e){I=e}}).exports=function e(n,t,a){function i(s,r){if(!t[s]){if(!n[s]){if(!r&&x)return x(s);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=t[s]={exports:{}};n[s][0].call(c.exports,(function(e){var t=n[s][1][e];return i(t||e)}),c,c.exports,e,n,t,a)}return t[s].exports}for(var o=x,s=0;s<a.length;s++)i(a[s]);return i}({1:[function(e,n,t){(function(e){var t,a,i=e.MutationObserver||e.WebKitMutationObserver;if(i){var o=0,s=new i(_),r=e.document.createTextNode("");s.observe(r,{characterData:!0}),t=function(){r.data=o=++o%2}}else if(e.setImmediate||void 0===e.MessageChannel)t="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var n=e.document.createElement("script");n.onreadystatechange=function(){_(),n.onreadystatechange=null,n.parentNode.removeChild(n),n=null},e.document.documentElement.appendChild(n)}:function(){setTimeout(_,0)};else{var l=new e.MessageChannel;l.port1.onmessage=_,t=function(){l.port2.postMessage(0)}}var c=[];function _(){var e,n;a=!0;for(var t=c.length;t;){for(n=c,c=[],e=-1;++e<t;)n[e]();t=c.length}a=!1}function d(e){1!==c.push(e)||a||t()}n.exports=d}).call(this,void 0!==C?C:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,n,t){var a=e(1);function i(){}var o={},s=["REJECTED"],r=["FULFILLED"],l=["PENDING"];function c(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,e!==i&&f(this,e)}function _(e,n,t){this.promise=e,"function"==typeof n&&(this.onFulfilled=n,this.callFulfilled=this.otherCallFulfilled),"function"==typeof t&&(this.onRejected=t,this.callRejected=this.otherCallRejected)}function d(e,n,t){a((function(){var a;try{a=n(t)}catch(n){return o.reject(e,n)}a===e?o.reject(e,new TypeError("Cannot resolve promise with itself")):o.resolve(e,a)}))}function u(e){var n=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof n)return function(){n.apply(e,arguments)}}function f(e,n){var t=!1;function a(n){t||(t=!0,o.reject(e,n))}function i(n){t||(t=!0,o.resolve(e,n))}function s(){n(i,a)}var r=p(s);"error"===r.status&&a(r.value)}function p(e,n){var t={};try{t.value=e(n),t.status="success"}catch(e){t.status="error",t.value=e}return t}function b(e){return e instanceof this?e:o.resolve(new this(i),e)}function v(e){var n=new this(i);return o.reject(n,e)}function y(e){var n=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var t=e.length,a=!1;if(!t)return this.resolve([]);for(var s=new Array(t),r=0,l=-1,c=new this(i);++l<t;)_(e[l],l);return c;function _(e,i){function l(e){s[i]=e,++r!==t||a||(a=!0,o.resolve(c,s))}n.resolve(e).then(l,(function(e){a||(a=!0,o.reject(c,e))}))}}function m(e){var n=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var t=e.length,a=!1;if(!t)return this.resolve([]);for(var s=-1,r=new this(i);++s<t;)l(e[s]);return r;function l(e){n.resolve(e).then((function(e){a||(a=!0,o.resolve(r,e))}),(function(e){a||(a=!0,o.reject(r,e))}))}}n.exports=c,c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,n){if("function"!=typeof e&&this.state===r||"function"!=typeof n&&this.state===s)return this;var t=new this.constructor(i);return this.state!==l?d(t,this.state===r?e:n,this.outcome):this.queue.push(new _(t,e,n)),t},_.prototype.callFulfilled=function(e){o.resolve(this.promise,e)},_.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},_.prototype.callRejected=function(e){o.reject(this.promise,e)},_.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},o.resolve=function(e,n){var t=p(u,n);if("error"===t.status)return o.reject(e,t.value);var a=t.value;if(a)f(e,a);else{e.state=r,e.outcome=n;for(var i=-1,s=e.queue.length;++i<s;)e.queue[i].callFulfilled(n)}return e},o.reject=function(e,n){e.state=s,e.outcome=n;for(var t=-1,a=e.queue.length;++t<a;)e.queue[t].callRejected(n);return e},c.resolve=b,c.reject=v,c.all=y,c.race=m},{1:1}],3:[function(e,n,t){(function(n){"function"!=typeof n.Promise&&(n.Promise=e(2))}).call(this,void 0!==C?C:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,n,t){var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function o(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}var s=o();function r(){try{if(!s||!s.open)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),n="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||n)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}function l(e,n){e=e||[],n=n||{};try{return new Blob(e,n)}catch(i){if("TypeError"!==i.name)throw i;for(var t=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),a=0;a<e.length;a+=1)t.append(e[a]);return t.getBlob(n.type)}}"undefined"==typeof Promise&&e(3);var c=Promise;function _(e,n){n&&e.then((function(e){n(null,e)}),(function(e){n(e)}))}function d(e,n,t){"function"==typeof n&&e.then(n),"function"==typeof t&&e.catch(t)}function u(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function f(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var p="local-forage-detect-blob-support",b=void 0,v={},y=Object.prototype.toString,m="readonly",h="readwrite";function w(e){for(var n=e.length,t=new ArrayBuffer(n),a=new Uint8Array(t),i=0;i<n;i++)a[i]=e.charCodeAt(i);return t}function g(e){return new c((function(n){var t=e.transaction(p,h),a=l([""]);t.objectStore(p).put(a,"key"),t.onabort=function(e){e.preventDefault(),e.stopPropagation(),n(!1)},t.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),t=navigator.userAgent.match(/Edge\//);n(t||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))}function S(e){return"boolean"==typeof b?c.resolve(b):g(e).then((function(e){return b=e}))}function C(e){var n=v[e.name],t={};t.promise=new c((function(e,n){t.resolve=e,t.reject=n})),n.deferredOperations.push(t),n.dbReady?n.dbReady=n.dbReady.then((function(){return t.promise})):n.dbReady=t.promise}function x(e){var n=v[e.name].deferredOperations.pop();if(n)return n.resolve(),n.promise}function I(e,n){var t=v[e.name].deferredOperations.pop();if(t)return t.reject(n),t.promise}function k(e,n){return new c((function(t,a){if(v[e.name]=v[e.name]||V(),e.db){if(!n)return t(e.db);C(e),e.db.close()}var i=[e.name];n&&i.push(e.version);var o=s.open.apply(s,i);n&&(o.onupgradeneeded=function(n){var t=o.result;try{t.createObjectStore(e.storeName),n.oldVersion<=1&&t.createObjectStore(p)}catch(t){if("ConstraintError"!==t.name)throw t;console.warn('The database "'+e.name+'" has been upgraded from version '+n.oldVersion+" to version "+n.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),o.onerror=function(e){e.preventDefault(),a(o.error)},o.onsuccess=function(){var n=o.result;n.onversionchange=function(e){e.target.close()},t(n),x(e)}}))}function B(e){return k(e,!1)}function E(e){return k(e,!0)}function T(e,n){if(!e.db)return!0;var t=!e.db.objectStoreNames.contains(e.storeName),a=e.version<e.db.version,i=e.version>e.db.version;if(a&&(e.version!==n&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),i||t){if(t){var o=e.db.version+1;o>e.version&&(e.version=o)}return!0}return!1}function A(e){return new c((function(n,t){var a=new FileReader;a.onerror=t,a.onloadend=function(t){var a=btoa(t.target.result||"");n({__local_forage_encoded_blob:!0,data:a,type:e.type})},a.readAsBinaryString(e)}))}function L(e){return l([w(atob(e.data))],{type:e.type})}function D(e){return e&&e.__local_forage_encoded_blob}function M(e){var n=this,t=n._initReady().then((function(){var e=v[n._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return d(t,e,e),t}function N(e){C(e);for(var n=v[e.name],t=n.forages,a=0;a<t.length;a++){var i=t[a];i._dbInfo.db&&(i._dbInfo.db.close(),i._dbInfo.db=null)}return e.db=null,B(e).then((function(n){return e.db=n,T(e)?E(e):n})).then((function(a){e.db=n.db=a;for(var i=0;i<t.length;i++)t[i]._dbInfo.db=a})).catch((function(n){throw I(e,n),n}))}function O(e,n,t,a){void 0===a&&(a=1);try{var i=e.db.transaction(e.storeName,n);t(null,i)}catch(i){if(a>0&&(!e.db||"InvalidStateError"===i.name||"NotFoundError"===i.name))return c.resolve().then((function(){if(!e.db||"NotFoundError"===i.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),E(e)})).then((function(){return N(e).then((function(){O(e,n,t,a-1)}))})).catch(t);t(i)}}function V(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function R(e){var n=this,t={db:null};if(e)for(var a in e)t[a]=e[a];var i=v[t.name];i||(i=V(),v[t.name]=i),i.forages.push(n),n._initReady||(n._initReady=n.ready,n.ready=M);var o=[];function s(){return c.resolve()}for(var r=0;r<i.forages.length;r++){var l=i.forages[r];l!==n&&o.push(l._initReady().catch(s))}var _=i.forages.slice(0);return c.all(o).then((function(){return t.db=i.db,B(t)})).then((function(e){return t.db=e,T(t,n._defaultConfig.version)?E(t):e})).then((function(e){t.db=i.db=e,n._dbInfo=t;for(var a=0;a<_.length;a++){var o=_[a];o!==n&&(o._dbInfo.db=t.db,o._dbInfo.version=t.version)}}))}function P(e,n){var t=this;e=u(e);var a=new c((function(n,a){t.ready().then((function(){O(t._dbInfo,m,(function(i,o){if(i)return a(i);try{var s=o.objectStore(t._dbInfo.storeName).get(e);s.onsuccess=function(){var e=s.result;void 0===e&&(e=null),D(e)&&(e=L(e)),n(e)},s.onerror=function(){a(s.error)}}catch(e){a(e)}}))})).catch(a)}));return _(a,n),a}function H(e,n){var t=this,a=new c((function(n,a){t.ready().then((function(){O(t._dbInfo,m,(function(i,o){if(i)return a(i);try{var s=o.objectStore(t._dbInfo.storeName).openCursor(),r=1;s.onsuccess=function(){var t=s.result;if(t){var a=t.value;D(a)&&(a=L(a));var i=e(a,t.key,r++);void 0!==i?n(i):t.continue()}else n()},s.onerror=function(){a(s.error)}}catch(e){a(e)}}))})).catch(a)}));return _(a,n),a}function j(e,n,t){var a=this;e=u(e);var i=new c((function(t,i){var o;a.ready().then((function(){return o=a._dbInfo,"[object Blob]"===y.call(n)?S(o.db).then((function(e){return e?n:A(n)})):n})).then((function(n){O(a._dbInfo,h,(function(o,s){if(o)return i(o);try{var r=s.objectStore(a._dbInfo.storeName);null===n&&(n=void 0);var l=r.put(n,e);s.oncomplete=function(){void 0===n&&(n=null),t(n)},s.onabort=s.onerror=function(){var e=l.error?l.error:l.transaction.error;i(e)}}catch(e){i(e)}}))})).catch(i)}));return _(i,t),i}function z(e,n){var t=this;e=u(e);var a=new c((function(n,a){t.ready().then((function(){O(t._dbInfo,h,(function(i,o){if(i)return a(i);try{var s=o.objectStore(t._dbInfo.storeName).delete(e);o.oncomplete=function(){n()},o.onerror=function(){a(s.error)},o.onabort=function(){var e=s.error?s.error:s.transaction.error;a(e)}}catch(e){a(e)}}))})).catch(a)}));return _(a,n),a}function $(e){var n=this,t=new c((function(e,t){n.ready().then((function(){O(n._dbInfo,h,(function(a,i){if(a)return t(a);try{var o=i.objectStore(n._dbInfo.storeName).clear();i.oncomplete=function(){e()},i.onabort=i.onerror=function(){var e=o.error?o.error:o.transaction.error;t(e)}}catch(e){t(e)}}))})).catch(t)}));return _(t,e),t}function F(e){var n=this,t=new c((function(e,t){n.ready().then((function(){O(n._dbInfo,m,(function(a,i){if(a)return t(a);try{var o=i.objectStore(n._dbInfo.storeName).count();o.onsuccess=function(){e(o.result)},o.onerror=function(){t(o.error)}}catch(e){t(e)}}))})).catch(t)}));return _(t,e),t}function q(e,n){var t=this,a=new c((function(n,a){e<0?n(null):t.ready().then((function(){O(t._dbInfo,m,(function(i,o){if(i)return a(i);try{var s=o.objectStore(t._dbInfo.storeName),r=!1,l=s.openKeyCursor();l.onsuccess=function(){var t=l.result;t?0===e||r?n(t.key):(r=!0,t.advance(e)):n(null)},l.onerror=function(){a(l.error)}}catch(e){a(e)}}))})).catch(a)}));return _(a,n),a}function W(e){var n=this,t=new c((function(e,t){n.ready().then((function(){O(n._dbInfo,m,(function(a,i){if(a)return t(a);try{var o=i.objectStore(n._dbInfo.storeName).openKeyCursor(),s=[];o.onsuccess=function(){var n=o.result;n?(s.push(n.key),n.continue()):e(s)},o.onerror=function(){t(o.error)}}catch(e){t(e)}}))})).catch(t)}));return _(t,e),t}function U(e,n){n=f.apply(this,arguments);var t=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||t.name,e.storeName=e.storeName||t.storeName);var a,i=this;if(e.name){var o=e.name===t.name&&i._dbInfo.db?c.resolve(i._dbInfo.db):B(e).then((function(n){var t=v[e.name],a=t.forages;t.db=n;for(var i=0;i<a.length;i++)a[i]._dbInfo.db=n;return n}));a=e.storeName?o.then((function(n){if(n.objectStoreNames.contains(e.storeName)){var t=n.version+1;C(e);var a=v[e.name],i=a.forages;n.close();for(var o=0;o<i.length;o++){var r=i[o];r._dbInfo.db=null,r._dbInfo.version=t}var l=new c((function(n,a){var i=s.open(e.name,t);i.onerror=function(e){i.result.close(),a(e)},i.onupgradeneeded=function(){i.result.deleteObjectStore(e.storeName)},i.onsuccess=function(){var e=i.result;e.close(),n(e)}}));return l.then((function(e){a.db=e;for(var n=0;n<i.length;n++){var t=i[n];t._dbInfo.db=e,x(t._dbInfo)}})).catch((function(n){throw(I(e,n)||c.resolve()).catch((function(){})),n}))}})):o.then((function(n){C(e);var t=v[e.name],a=t.forages;n.close();for(var i=0;i<a.length;i++)a[i]._dbInfo.db=null;var o=new c((function(n,t){var a=s.deleteDatabase(e.name);a.onerror=function(){var e=a.result;e&&e.close(),t(a.error)},a.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},a.onsuccess=function(){var e=a.result;e&&e.close(),n(e)}}));return o.then((function(e){t.db=e;for(var n=0;n<a.length;n++)x(a[n]._dbInfo)})).catch((function(n){throw(I(e,n)||c.resolve()).catch((function(){})),n}))}))}else a=c.reject("Invalid arguments");return _(a,n),a}var G={_driver:"asyncStorage",_initStorage:R,_support:r(),iterate:H,getItem:P,setItem:j,removeItem:z,clear:$,length:F,key:q,keys:W,dropInstance:U};function X(){return"function"==typeof openDatabase}var Y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Q="~~local_forage_type~",K=/^~~local_forage_type~([^~]+)~/,J="__lfsc__:",Z=J.length,ee="arbf",ne="blob",te="si08",ae="ui08",ie="uic8",oe="si16",se="si32",re="ur16",le="ui32",ce="fl32",_e="fl64",de=Z+ee.length,ue=Object.prototype.toString;function fe(e){var n,t,a,i,o,s=.75*e.length,r=e.length,l=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);var c=new ArrayBuffer(s),_=new Uint8Array(c);for(n=0;n<r;n+=4)t=Y.indexOf(e[n]),a=Y.indexOf(e[n+1]),i=Y.indexOf(e[n+2]),o=Y.indexOf(e[n+3]),_[l++]=t<<2|a>>4,_[l++]=(15&a)<<4|i>>2,_[l++]=(3&i)<<6|63&o;return c}function pe(e){var n,t=new Uint8Array(e),a="";for(n=0;n<t.length;n+=3)a+=Y[t[n]>>2],a+=Y[(3&t[n])<<4|t[n+1]>>4],a+=Y[(15&t[n+1])<<2|t[n+2]>>6],a+=Y[63&t[n+2]];return t.length%3==2?a=a.substring(0,a.length-1)+"=":t.length%3==1&&(a=a.substring(0,a.length-2)+"=="),a}function be(e,n){var t="";if(e&&(t=ue.call(e)),e&&("[object ArrayBuffer]"===t||e.buffer&&"[object ArrayBuffer]"===ue.call(e.buffer))){var a,i=J;e instanceof ArrayBuffer?(a=e,i+=ee):(a=e.buffer,"[object Int8Array]"===t?i+=te:"[object Uint8Array]"===t?i+=ae:"[object Uint8ClampedArray]"===t?i+=ie:"[object Int16Array]"===t?i+=oe:"[object Uint16Array]"===t?i+=re:"[object Int32Array]"===t?i+=se:"[object Uint32Array]"===t?i+=le:"[object Float32Array]"===t?i+=ce:"[object Float64Array]"===t?i+=_e:n(new Error("Failed to get type for BinaryArray"))),n(i+pe(a))}else if("[object Blob]"===t){var o=new FileReader;o.onload=function(){var t=Q+e.type+"~"+pe(this.result);n(J+ne+t)},o.readAsArrayBuffer(e)}else try{n(JSON.stringify(e))}catch(t){console.error("Couldn't convert value into a JSON string: ",e),n(null,t)}}function ve(e){if(e.substring(0,Z)!==J)return JSON.parse(e);var n,t=e.substring(de),a=e.substring(Z,de);if(a===ne&&K.test(t)){var i=t.match(K);n=i[1],t=t.substring(i[0].length)}var o=fe(t);switch(a){case ee:return o;case ne:return l([o],{type:n});case te:return new Int8Array(o);case ae:return new Uint8Array(o);case ie:return new Uint8ClampedArray(o);case oe:return new Int16Array(o);case re:return new Uint16Array(o);case se:return new Int32Array(o);case le:return new Uint32Array(o);case ce:return new Float32Array(o);case _e:return new Float64Array(o);default:throw new Error("Unkown type: "+a)}}var ye={serialize:be,deserialize:ve,stringToBuffer:fe,bufferToString:pe};function me(e,n,t,a){e.executeSql("CREATE TABLE IF NOT EXISTS "+n.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],t,a)}function he(e){var n=this,t={db:null};if(e)for(var a in e)t[a]="string"!=typeof e[a]?e[a].toString():e[a];var i=new c((function(e,a){try{t.db=openDatabase(t.name,String(t.version),t.description,t.size)}catch(e){return a(e)}t.db.transaction((function(i){me(i,t,(function(){n._dbInfo=t,e()}),(function(e,n){a(n)}))}),a)}));return t.serializer=ye,i}function we(e,n,t,a,i,o){e.executeSql(t,a,i,(function(e,s){s.code===s.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[n.storeName],(function(e,r){r.rows.length?o(e,s):me(e,n,(function(){e.executeSql(t,a,i,o)}),o)}),o):o(e,s)}),o)}function ge(e,n){var t=this;e=u(e);var a=new c((function(n,a){t.ready().then((function(){var i=t._dbInfo;i.db.transaction((function(t){we(t,i,"SELECT * FROM "+i.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,t){var a=t.rows.length?t.rows.item(0).value:null;a&&(a=i.serializer.deserialize(a)),n(a)}),(function(e,n){a(n)}))}))})).catch(a)}));return _(a,n),a}function Se(e,n){var t=this,a=new c((function(n,a){t.ready().then((function(){var i=t._dbInfo;i.db.transaction((function(t){we(t,i,"SELECT * FROM "+i.storeName,[],(function(t,a){for(var o=a.rows,s=o.length,r=0;r<s;r++){var l=o.item(r),c=l.value;if(c&&(c=i.serializer.deserialize(c)),void 0!==(c=e(c,l.key,r+1)))return void n(c)}n()}),(function(e,n){a(n)}))}))})).catch(a)}));return _(a,n),a}function Ce(e,n,t,a){var i=this;e=u(e);var o=new c((function(o,s){i.ready().then((function(){void 0===n&&(n=null);var r=n,l=i._dbInfo;l.serializer.serialize(n,(function(n,c){c?s(c):l.db.transaction((function(t){we(t,l,"INSERT OR REPLACE INTO "+l.storeName+" (key, value) VALUES (?, ?)",[e,n],(function(){o(r)}),(function(e,n){s(n)}))}),(function(n){if(n.code===n.QUOTA_ERR){if(a>0)return void o(Ce.apply(i,[e,r,t,a-1]));s(n)}}))}))})).catch(s)}));return _(o,t),o}function xe(e,n,t){return Ce.apply(this,[e,n,t,1])}function Ie(e,n){var t=this;e=u(e);var a=new c((function(n,a){t.ready().then((function(){var i=t._dbInfo;i.db.transaction((function(t){we(t,i,"DELETE FROM "+i.storeName+" WHERE key = ?",[e],(function(){n()}),(function(e,n){a(n)}))}))})).catch(a)}));return _(a,n),a}function ke(e){var n=this,t=new c((function(e,t){n.ready().then((function(){var a=n._dbInfo;a.db.transaction((function(n){we(n,a,"DELETE FROM "+a.storeName,[],(function(){e()}),(function(e,n){t(n)}))}))})).catch(t)}));return _(t,e),t}function Be(e){var n=this,t=new c((function(e,t){n.ready().then((function(){var a=n._dbInfo;a.db.transaction((function(n){we(n,a,"SELECT COUNT(key) as c FROM "+a.storeName,[],(function(n,t){var a=t.rows.item(0).c;e(a)}),(function(e,n){t(n)}))}))})).catch(t)}));return _(t,e),t}function Ee(e,n){var t=this,a=new c((function(n,a){t.ready().then((function(){var i=t._dbInfo;i.db.transaction((function(t){we(t,i,"SELECT key FROM "+i.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,t){var a=t.rows.length?t.rows.item(0).key:null;n(a)}),(function(e,n){a(n)}))}))})).catch(a)}));return _(a,n),a}function Te(e){var n=this,t=new c((function(e,t){n.ready().then((function(){var a=n._dbInfo;a.db.transaction((function(n){we(n,a,"SELECT key FROM "+a.storeName,[],(function(n,t){for(var a=[],i=0;i<t.rows.length;i++)a.push(t.rows.item(i).key);e(a)}),(function(e,n){t(n)}))}))})).catch(t)}));return _(t,e),t}function Ae(e){return new c((function(n,t){e.transaction((function(a){a.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(t,a){for(var i=[],o=0;o<a.rows.length;o++)i.push(a.rows.item(o).name);n({db:e,storeNames:i})}),(function(e,n){t(n)}))}),(function(e){t(e)}))}))}function Le(e,n){n=f.apply(this,arguments);var t=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||t.name,e.storeName=e.storeName||t.storeName);var a,i=this;return _(a=e.name?new c((function(n){var a;a=e.name===t.name?i._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?n({db:a,storeNames:[e.storeName]}):n(Ae(a))})).then((function(e){return new c((function(n,t){e.db.transaction((function(a){function i(e){return new c((function(n,t){a.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){n()}),(function(e,n){t(n)}))}))}for(var o=[],s=0,r=e.storeNames.length;s<r;s++)o.push(i(e.storeNames[s]));c.all(o).then((function(){n()})).catch((function(e){t(e)}))}),(function(e){t(e)}))}))})):c.reject("Invalid arguments"),n),a}var De={_driver:"webSQLStorage",_initStorage:he,_support:X(),iterate:Se,getItem:ge,setItem:xe,removeItem:Ie,clear:ke,length:Be,key:Ee,keys:Te,dropInstance:Le};function Me(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}function Ne(e,n){var t=e.name+"/";return e.storeName!==n.storeName&&(t+=e.storeName+"/"),t}function Oe(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(e){return!0}}function Ve(){return!Oe()||localStorage.length>0}function Re(e){var n=this,t={};if(e)for(var a in e)t[a]=e[a];return t.keyPrefix=Ne(e,n._defaultConfig),Ve()?(n._dbInfo=t,t.serializer=ye,c.resolve()):c.reject()}function Pe(e){var n=this,t=n.ready().then((function(){for(var e=n._dbInfo.keyPrefix,t=localStorage.length-1;t>=0;t--){var a=localStorage.key(t);0===a.indexOf(e)&&localStorage.removeItem(a)}}));return _(t,e),t}function He(e,n){var t=this;e=u(e);var a=t.ready().then((function(){var n=t._dbInfo,a=localStorage.getItem(n.keyPrefix+e);return a&&(a=n.serializer.deserialize(a)),a}));return _(a,n),a}function je(e,n){var t=this,a=t.ready().then((function(){for(var n=t._dbInfo,a=n.keyPrefix,i=a.length,o=localStorage.length,s=1,r=0;r<o;r++){var l=localStorage.key(r);if(0===l.indexOf(a)){var c=localStorage.getItem(l);if(c&&(c=n.serializer.deserialize(c)),void 0!==(c=e(c,l.substring(i),s++)))return c}}}));return _(a,n),a}function ze(e,n){var t=this,a=t.ready().then((function(){var n,a=t._dbInfo;try{n=localStorage.key(e)}catch(e){n=null}return n&&(n=n.substring(a.keyPrefix.length)),n}));return _(a,n),a}function $e(e){var n=this,t=n.ready().then((function(){for(var e=n._dbInfo,t=localStorage.length,a=[],i=0;i<t;i++){var o=localStorage.key(i);0===o.indexOf(e.keyPrefix)&&a.push(o.substring(e.keyPrefix.length))}return a}));return _(t,e),t}function Fe(e){var n=this.keys().then((function(e){return e.length}));return _(n,e),n}function qe(e,n){var t=this;e=u(e);var a=t.ready().then((function(){var n=t._dbInfo;localStorage.removeItem(n.keyPrefix+e)}));return _(a,n),a}function We(e,n,t){var a=this;e=u(e);var i=a.ready().then((function(){void 0===n&&(n=null);var t=n;return new c((function(i,o){var s=a._dbInfo;s.serializer.serialize(n,(function(n,a){if(a)o(a);else try{localStorage.setItem(s.keyPrefix+e,n),i(t)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||o(e),o(e)}}))}))}));return _(i,t),i}function Ue(e,n){if(n=f.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var t=this.config();e.name=e.name||t.name,e.storeName=e.storeName||t.storeName}var a,i=this;return a=e.name?new c((function(n){e.storeName?n(Ne(e,i._defaultConfig)):n(e.name+"/")})).then((function(e){for(var n=localStorage.length-1;n>=0;n--){var t=localStorage.key(n);0===t.indexOf(e)&&localStorage.removeItem(t)}})):c.reject("Invalid arguments"),_(a,n),a}var Ge={_driver:"localStorageWrapper",_initStorage:Re,_support:Me(),iterate:je,getItem:He,setItem:We,removeItem:qe,clear:Pe,length:Fe,key:ze,keys:$e,dropInstance:Ue},Xe=function(e,n){return e===n||"number"==typeof e&&"number"==typeof n&&isNaN(e)&&isNaN(n)},Ye=function(e,n){for(var t=e.length,a=0;a<t;){if(Xe(e[a],n))return!0;a++}return!1},Qe=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},Ke={},Je={},Ze={INDEXEDDB:G,WEBSQL:De,LOCALSTORAGE:Ge},en=[Ze.INDEXEDDB._driver,Ze.WEBSQL._driver,Ze.LOCALSTORAGE._driver],nn=["dropInstance"],tn=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(nn),an={description:"",driver:en.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function on(e,n){e[n]=function(){var t=arguments;return e.ready().then((function(){return e[n].apply(e,t)}))}}function sn(){for(var e=1;e<arguments.length;e++){var n=arguments[e];if(n)for(var t in n)n.hasOwnProperty(t)&&(Qe(n[t])?arguments[0][t]=n[t].slice():arguments[0][t]=n[t])}return arguments[0]}var rn=function(){function e(n){for(var t in i(this,e),Ze)if(Ze.hasOwnProperty(t)){var a=Ze[t],o=a._driver;this[t]=o,Ke[o]||this.defineDriver(a)}this._defaultConfig=sn({},an),this._config=sn({},this._defaultConfig,n),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":a(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var n in e){if("storeName"===n&&(e[n]=e[n].replace(/\W/g,"_")),"version"===n&&"number"!=typeof e[n])return new Error("Database version must be a number.");this._config[n]=e[n]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,n,t){var a=new c((function(n,t){try{var a=e._driver,i=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void t(i);for(var o=tn.concat("_initStorage"),s=0,r=o.length;s<r;s++){var l=o[s];if((!Ye(nn,l)||e[l])&&"function"!=typeof e[l])return void t(i)}var d=function(){for(var n=function(e){return function(){var n=new Error("Method "+e+" is not implemented by the current driver"),t=c.reject(n);return _(t,arguments[arguments.length-1]),t}},t=0,a=nn.length;t<a;t++){var i=nn[t];e[i]||(e[i]=n(i))}};d();var u=function(t){Ke[a]&&console.info("Redefining LocalForage driver: "+a),Ke[a]=e,Je[a]=t,n()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(u,t):u(!!e._support):u(!0)}catch(e){t(e)}}));return d(a,n,t),a},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,n,t){var a=Ke[e]?c.resolve(Ke[e]):c.reject(new Error("Driver not found."));return d(a,n,t),a},e.prototype.getSerializer=function(e){var n=c.resolve(ye);return d(n,e),n},e.prototype.ready=function(e){var n=this,t=n._driverSet.then((function(){return null===n._ready&&(n._ready=n._initDriver()),n._ready}));return d(t,e,e),t},e.prototype.setDriver=function(e,n,t){var a=this;Qe(e)||(e=[e]);var i=this._getSupportedDrivers(e);function o(){a._config.driver=a.driver()}function s(e){return a._extend(e),o(),a._ready=a._initStorage(a._config),a._ready}function r(e){return function(){var n=0;function t(){for(;n<e.length;){var i=e[n];return n++,a._dbInfo=null,a._ready=null,a.getDriver(i).then(s).catch(t)}o();var r=new Error("No available storage method found.");return a._driverSet=c.reject(r),a._driverSet}return t()}}var l=null!==this._driverSet?this._driverSet.catch((function(){return c.resolve()})):c.resolve();return this._driverSet=l.then((function(){var e=i[0];return a._dbInfo=null,a._ready=null,a.getDriver(e).then((function(e){a._driver=e._driver,o(),a._wrapLibraryMethodsWithReady(),a._initDriver=r(i)}))})).catch((function(){o();var e=new Error("No available storage method found.");return a._driverSet=c.reject(e),a._driverSet})),d(this._driverSet,n,t),this._driverSet},e.prototype.supports=function(e){return!!Je[e]},e.prototype._extend=function(e){sn(this,e)},e.prototype._getSupportedDrivers=function(e){for(var n=[],t=0,a=e.length;t<a;t++){var i=e[t];this.supports(i)&&n.push(i)}return n},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,n=tn.length;e<n;e++)on(this,tn[e])},e.prototype.createInstance=function(n){return new e(n)},e}(),ln=new rn;n.exports=ln},{3:3}]},{},[4])(4);const B=e=>new Promise((n=>setTimeout(n,e))),E=(()=>{switch(window.siyuan?.config.appearance.mode){case 0:return"light";case 1:return"dark";default:return null}})();function T(e){return"string"!=typeof e||null===e||""===e||"null"===e||"NULL"===e}function A(e,n,t){var a=parseInt(e,10),i=parseInt(n,10),o=parseInt(t,10),s=i<o?i:o;return a>s?a:s}function L(e,n){for(var t="js"===n?"script":"css"===n?"link":"none",a="js"===n?"src":"css"===n?"href":"none",i=document.getElementsByTagName(t),o=i.length;o>=0;o--)null!=i[o]?.getAttribute(a)&&-1!==i[o].getAttribute(a).indexOf(e)&&i[o].parentNode.removeChild(i[o])}function D(e,n=null){let t=document.createElement("link");n&&(t.id=n),t.type="text/css",t.rel="stylesheet",t.href=e,document.head.appendChild(t)}function M(e,n){let t=document.getElementById(e);t?t.setAttribute("href",n):D(n,e)}function N(e,n="module",t=!1,a=!1){const i=document.createElement("script");return n&&(i.type=n),t&&(i.async=!0),a&&(i.defer=!0),i.src=e,document.head.appendChild(i),i}
/*!
* sofill v1.0.66
* https://github.com/Hi-Windom/Sofill
* https://www.npmjs.com/package/sofill
*/
async function O(e,n={}){let t=null;return await fetch(e,{body:JSON.stringify(n),method:"POST",headers:{Authorization:`Token '${window.siyuan?.config.api.token}'`}}).then((function(e){t=e.json()})),console.log(t),t}async function V(e){let n=await e;return 0===n.code?n.data:null}
/*!
* sofill v1.0.66
* https://github.com/Hi-Windom/Sofill
* https://www.npmjs.com/package/sofill
*/
class R{_max;_count;_taskQueue;constructor(e){this._max=e,this._count=0,this._taskQueue=[]}call(e,...n){return new Promise(((t,a)=>{const i=this._createTask(e,n,t,a);this._count>=this._max?this._taskQueue.push(i):i()}))}_createTask(e,n,t,a){return()=>{e(...n).then(t).catch(a).finally((()=>{if(this._count--,this._taskQueue.length){this._taskQueue.shift()()}})),this._count++}}}async function P(e){const n=async e=>{document.getElementById(e).type,console.log(`${e} binded successfully`)},t=async e=>{if(!T(e))return await n(e),I.getItem(e).then((async n=>{const t=document.getElementById(e);if(T(n))switch(t.type){case"select-one":case"select-multiple":t.bindIDB=t.options[0].value;break;case"number":case"range":t.bindIDB=0;break;default:t.bindIDB=""}else t.bindIDB=n;console.log(`${e} inited successfully with value \`${n}\``)}));console.warn(e)},a=async(e,n)=>{const t=e.length;let a=0;for(;a<t;)await n(e[a]),a++};let i=0,o=e.querySelectorAll("select:not([id^='NoSync'])"),s=e.querySelectorAll("input[id^='SC_winsay_cp']:not([type='checkbox'])"),r=e.querySelectorAll("input[type='checkbox']:not([id^='NoSync'])");i+=o.length,i+=s.length,i+=r.length,console.warn(i),window.winsay.cp.awaitInitItem=i,await a(o,(async e=>{await t(e.id),window.winsay.cp.awaitInitItem-=1,window.winsay.cp.inited+=1})),await a(s,(async e=>{await t(e.id),window.winsay.cp.awaitInitItem-=1,window.winsay.cp.inited+=1})),await a(r,(async e=>{await(async e=>{if(!T(e.id))return await n(e.id),I.getItem(e.id).then((async n=>{T(n)?e.bindIDB="false":e.bindIDB="true",console.log(`${e.id} inited successfully with value \`${n}\``)}));console.warn(e)})(e),window.winsay.cp.awaitInitItem-=1,window.winsay.cp.inited+=1}))}const H=async e=>{let n=document.getElementById(e);return"checkbox"===n.type||"radio"===n.type?n.checked:n.value};async function j(e,n){document.getElementById(e).addEventListener("change",(async e=>{"function"==typeof n&&await n(e.target.bindIDB)})),window.winsay.cp.listened+=1,console.log(`${e} listen successfully`)}async function z(e,n,t){e.addEventListener("click",(async()=>{e.checked&&!0===e.checked?n():t()})),window.winsay.cp.listened+=1,console.log(`${e.id} listen successfully`)}const $={isDuringDate:function(e,n){const t=new Date,a=new Date(e),i=new Date(n);return t>=a&&t<=i},isDuringTime:function(e,n){const t=new Date,a=new Date(`${t.getFullYear()}-${t.getMonth()+1}-${t.getDate()} ${e}`),i=new Date(`${t.getFullYear()}-${t.getMonth()+1}-${t.getDate()} ${n}`);if(a<=i){if(a<=t&&t<=i)return!0}else if(a<=t||t<=i)return!0;return!1}};function F(e,n){const t=new URL(e).search.slice(1).split("&");for(let e=0;e<t.length;e++){const a=t[e].split("=");if(a[0]===n)return a[1]}}function q(){if(document.activeElement.classList.contains("protyle-wysiwyg")){let e=window.getSelection()?.focusNode?.parentElement;for(;null!=e&&null==e?.dataset?.nodeId;)e=e.parentElement;return e}return null}function W(){let e=q();return e?e.dataset.nodeId:null}function U(){return document.querySelector("div.layout__wnd--active div.protyle:not(.fn__none) > div.protyle-content > div.protyle-wysiwyg[data-doc-type]")||document.querySelector("#editor > div.protyle-content >  div.protyle-wysiwyg[data-doc-type]")||null}function G(){for(var e=U();null!=e&&!1===e.classList.contains("protyle-background");)e=e.previousElementSibling;return e||null}function X(){let e=G();return e?e.dataset.nodeId:null}var Y={sql:Q};async function Q(e){return V(O("/api/query/sql",{stmt:e}))}var K={getBlockAttrs:async function(e){return V(O("/api/attr/getBlockAttrs",{id:e}))},setBlockAttrs:async function(e,n){return V(O("/api/attr/setBlockAttrs",{id:e,attrs:n}))},queryBlockById:async function(e){let n=`select * from blocks where id ='${e}'`;return(await Q(n))[0]}};var J={getBazaarTheme:Z,getInstalledTheme:ee};async function Z(e,n){return O("http://"+e+"/api/bazaar/getBazaarTheme",n)}async function ee(e,n){return O("http://"+e+"/api/bazaar/getInstalledTheme",n)}var ne={getBlockKramdown:async function(e){return V(O("/api/block/getBlockKramdown",{id:e}))},getBlockBreadcrumb:async function(e){return V(O("/api/block/getBlockBreadcrumb",{id:e}))},insertBlock:async function(e,n,t){let a="/api/block/insertBlock";return V(O(a,t={previousID:e,dataType:n,data:t}))},prependBlock:async function(e,n,t){let a="/api/block/prependBlock";return V(O(a,t={parentID:e,dataType:n,data:t}))},appendBlock:async function(e,n,t){let a="/api/block/appendBlock";return V(O(a,t={parentID:e,dataType:n,data:t}))},deleteBlock:async function(e){return V(O("/api/block/deleteBlock",{id:e}))},updateBlock:async function(e,n,t){let a="/api/block/updateBlock";return V(O(a,t={id:e,dataType:n,data:t}))}};var te={exportMdContent:async function(e){return V(O("/api/export/exportMdContent",{id:e}))}};var ae=Object.freeze({__proto__:null,getFile:async function(e){const n=await fetch("/api/file/getFile",{method:"POST",headers:{Authorization:`Token ${window.siyuan?.config.api.token}`},body:JSON.stringify({path:e})});return 200===n.status?n:null},putFile:async function(e,n,t=!1,a=Date.now()){let i=new Blob([n]),o=new File([i],e.split("/").pop()),s=new FormData;s.append("path",e),s.append("file",o),s.append("isDir",t.toString()),s.append("modTime",a.toString());const r=await fetch("/api/file/putFile",{body:s,method:"POST",headers:{Authorization:`Token ${window.siyuan?.config.api.token}`}});return 200===r.status?await r.json():null}}),ie={createDocWithMd:async function(e,n,t){return V(O("/api/filetree/createDocWithMd",{notebook:e,path:n,markdown:t}))},removeDoc:async function(e,n){return V(O("/api/filetree/removeDoc",{notebook:e,path:n}))},renameDoc:async function(e,n,t){return V(O("/api/filetree/renameDoc",{notebook:e,path:n,title:t}))},moveDoc:async function(e,n,t,a){return V(O("/api/filetree/moveDoc",{fromNotebook:e,fromPath:n,toNotebook:t,toPath:a}))},getHPathByPath:async function(e,n){let t={Notebook:e,Path:n};return V(O("/api/filetree/getHPathByPath",t))},getHPathByID:async function(e){return V(O("/api/filetree/getHPathByID",{id:e}))},listDocsByPath:async function(e){return V(O("/api/filetree/listDocsByPath",{path:e}))},getDoc:async function(e){return V(O("/api/filetree/getDoc",{id:e,k:"",mode:2,size:36}))},searchDocs:async function(e){return V(O("/api/filetree/searchDocs",{k:e}))}};var oe={getLocalGraph:async function(e,n,t,a){return V(O("/api/graph/getLocalGraph",{id:n,k:e,conf:t,reqId:a}))},getGraph:async function(e,n,t){return V(O("/api/graph/getGraph",{k:e,conf:n,reqId:t}))}};var se={createNotebook:async function(e){return V(O("/api/notebook/createNotebook",{name:e}))},removeNotebook:async function(e){return V(O("/api/notebook/removeNotebook",{notebook:e}))},setNotebookConf:async function(e){return V(O("/api/notebook/setNotebookConf",{notebook:e}))},getNotebookConf:async function(e){return V(O("/api/notebook/getNotebookConf",{notebook:e}))},openNotebook:async function(e){return V(O("/api/notebook/openNotebook",{notebook:e}))},closeNotebook:async function(e){return V(O("/api/notebook/closeNotebook",{notebook:e}))},renameNotebook:async function(e,n){return V(O("/api/notebook/renameNotebook",{notebook:e,name:n}))}};function re(e,n=7e3){return V(O("/api/notification/pushMsg",{msg:e,timeout:n}))}var le={getDocOutline:async function(e){return V(O("/api/outline/getDocOutline",{id:e}))}};var ce={getBacklink:async function(e){return V(O("/api/ref/getBacklink",{id:e,beforeLen:10,k:"",mk:""}))}};var _e={searchEmbedBlock:async function(e,n){return V(O("/api/search/searchEmbedBlock",{stmt:n,excludeIDs:e}))},searchBlock:async function(e){return V(O("/api/search/searchBlock",{query:e}))},searchTemplate:async function(e){return V(O("/api/search/searchTemplate",{k:e}))}};var de={getTag:async function(){return V(O("/api/tag/getTag",{}))}};var ue={docSaveAsTemplate:async function(e,n=!1){return V(O("/api/template/docSaveAsTemplate",{id:e,overwrite:n}))},renderTemplate:async function(e){return V(O("/api/template/render",e))}};function fe(e,n,t=null){e||console.error("指定元素对象不存在！"),n||console.error("未指定字符串！");var a=document.createElement(n);return t&&(a.id=t),e.parentElement.insertBefore(a,e),a}var pe=Object.freeze({__proto__:null,AI:{},Account:{},AddEvent:function(e,n,t){e.addEventListener?e.addEventListener(n,t,!1):e.attachEvent?e.attachEvent("on"+n,t):e["on"+n]=t},Asset:{},Attr:K,Av:{},Bazaar:J,Block:ne,Bookmark:{},CopyDOM:function(e,n){var t=document.querySelector(e),a=document.querySelector(n),i=t.cloneNode(!0);a.appendChild(i)},Export:te,File:ae,Filetree:ie,Format:{},Graph:oe,History:{},Import:{},Inbox:{},LimitPromise:R,LocalStorage:class{_MAX;limitP;constructor(e){this._MAX=e,this.limitP=new R(this._MAX)}async getItem(e,n=null){return await this.limitP.call(this.GetItem,e)}async setItem(e,n,t=null){return await this.limitP.call(this.SetItem,e,n,t)}async removeItem(e,n=null){return await this.limitP.call(this.RemoveItem,e,n)}async GetItem(e){return e?await I.getItem(e).catch((function(e){console.warn(e)})):void console.error("Uncaught (in promise) TypeError: Cannot read properties of undefined (reading 'getItem')")}async SetItem(e,n,t){return await I.setItem(e,n).then((function(e){console.log(e)})).catch((function(e){console.warn(e)}))}async RemoveItem(e,n){return await I.removeItem(e).then((()=>{console.log("Key is cleared!")})).catch((function(e){console.warn(e)}))}},Lute:{},MoveChildren:function(e,n){for(var t=document.querySelector(e),a=t.children,i=t.childElementCount,o=document.querySelector(n),s=0;s<i;s++)o.appendChild(a[0])},MoveDOM:function(e,n){var t=document.querySelector(e);document.querySelector(n).appendChild(t)},Notebook:se,Outline:le,Query:Y,RangeLimitedInt:A,Ref:ce,Repo:{},Riff:{},Search:_e,Setting:{},Snippet:{},SofillDate:$,Storage:{},Sync:{},System:{},Tag:de,Template:ue,addURLParam:function(e,n={v:window.siyuan?.config.appearance.themeVer}){let t;switch(!0){case e.startsWith("//"):t=new URL(`https:${e}`);break;case e.startsWith("http://"):case e.startsWith("https://"):t=new URL(e);break;case e.startsWith("/"):t=new URL(e,window.location.origin);break;default:t=new URL(e,window.location.origin+window.location.pathname)}for(let[e,a]of Object.entries(n))t.searchParams.set(e,a);switch(!0){case e.startsWith("//"):return t.href.substring(t.protocol.length);case e.startsWith("http://"):case e.startsWith("https://"):return t.href;case e.startsWith("/"):return t.href.substring(t.origin.length);default:return t.href.substring((window.location.origin+window.location.pathname).length)}},addinsertCreateElement:y,bodyAC:m,bodyCC:w,bodyRC:h,checkedChange:z,compareVersion:k,diguiTooONE:function(e,n){return null==e||null==n?null:function e(t){var a=t.children;if(a.length=0)return null;for(let t=0;t<a.length;t++){const o=a[t];if(n(o))return o;var i=e(o);if(null!=i)return i}return null}(e)},eRemoveProperty:S,eSetProperty:g,genUUID:()=>([1e7].toString()+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(e=>(parseInt(e,10)^window.crypto.getRandomValues(new Uint32Array(1))[0]&15>>parseInt(e,10)/4).toString(16))),getActualWidthOfChars:function(e,n){const{size:t,family:a="Microsoft YaHei"}=n,i=document.createElement("canvas").getContext("2d");i.font=`${t}px ${a}`;const o=i.measureText(e),s=Math.abs(o.actualBoundingBoxLeft)+Math.abs(o.actualBoundingBoxRight);return Math.max(o.width,s)},getBazaarTheme:Z,getFocusedBlock:q,getFocusedBlockID:W,getFocusedDoc:U,getFocusedDocBackground:G,getFocusedDocID:X,getFocusedID:function(){return W()||X()||null},getInstalledTheme:ee,getNewValueFromDomByID:H,getThemeMode:E,getTooltipDirection:function(e){const n=e.getBoundingClientRect(),t=n.left+n.width/2,a=n.top+n.height/2,i=1*document.documentElement.offsetWidth/3,o=2*document.documentElement.offsetWidth/3,s=1*document.documentElement.offsetHeight/3,r=2*document.documentElement.offsetHeight/3;let l;switch(!0){case a<s&&t<i:l="b3-tooltips__se";break;case a<s&&t>=i&&t<=o:l="b3-tooltips__s";break;case a<s&&t>o:l="b3-tooltips__sw";break;case a>=s&&a<=r&&t<i:l="b3-tooltips__e";break;case a>=s&&a<=r&&t>=i&&t<=o:l="b3-tooltips__s";break;case a>=s&&a<=r&&t>o:l="b3-tooltips__w";break;case a>r&&t<i:l="b3-tooltips__ne";break;case a>r&&t>=i&&t<=o:l="b3-tooltips__n";break;case a>r&&t>o:l="b3-tooltips__nw"}return l},getUrlParam:F,getUrlParams:function(e){return new URL(e).search.slice(1).split("&")},initAllPropFromIDBAsync:P,insertCreateAfter:function(e,n,t=null){var a=document.createElement(n);t&&(a.id=t);var i=e.parentNode;return i.lastChild===e?(i.appendChild(a),a):(i.insertBefore(a,e.nextSibling),a)},insertCreateBefore:fe,isEmpty:function(e){return null==e||""===e},isEmptyString:T,isMobile:()=>!!document.getElementById("sidebar"),isPromise:e=>"function"==typeof e.then,isWindow:()=>!document.getElementById("toolbar"),loadScript:N,loadStyle:D,myRemoveEvent:function(e,n,t){e.addEventListener?e.removeEventListener(n,t,!1):e.attachEvent?e.detachEvent("on"+n,t):e["on"+n]=null},parseResponse:V,post2Siyuan:O,propChange:j,pushMsg:re,querySQL:Q,removejscssfile:L,setTooltipDirection:function(e,...n){const t=["b3-tooltips__nw","b3-tooltips__n","b3-tooltips__ne","b3-tooltips__e","b3-tooltips__se","b3-tooltips__s","b3-tooltips__sw","b3-tooltips__w"];n.forEach((n=>{n.classList.remove(...t),n.classList.add(e(n))}))},sleep:B,updateStyle:M,"通知":function(e,n=7e3){var t=new XMLHttpRequest;t.open("POST","http://127.0.0.1:6806/api/notification/pushMsg",!0),t.setRequestHeader("Content-type","application/json");var a={msg:e,timeout:7e3};t.send(JSON.stringify(a)),t.onreadystatechange=function(){if(4===t.readyState&&200===t.status){var e=t.responseText;console.log(e)}}}});
/*!
* sofill v1.0.66
* https://github.com/Hi-Windom/Sofill
* https://www.npmjs.com/package/sofill
*/function be(e=!1){return e?document.body.classList.contains("body--docker"):navigator.userAgent.toLowerCase().startsWith("siyuan")}function ve(){return!!be()&&("windows"===window.siyuan?.config.system.os||"darwin"===window.siyuan?.config.system.os)}var ye="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function me(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var he={};({get exports(){return he},set exports(e){he=e}}).exports=function e(n,t,a){function i(s,r){if(!t[s]){if(!n[s]){if(!r&&me)return me(s);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=t[s]={exports:{}};n[s][0].call(c.exports,(function(e){var t=n[s][1][e];return i(t||e)}),c,c.exports,e,n,t,a)}return t[s].exports}for(var o=me,s=0;s<a.length;s++)i(a[s]);return i}({1:[function(e,n,t){(function(e){var t,a,i=e.MutationObserver||e.WebKitMutationObserver;if(i){var o=0,s=new i(_),r=e.document.createTextNode("");s.observe(r,{characterData:!0}),t=function(){r.data=o=++o%2}}else if(e.setImmediate||void 0===e.MessageChannel)t="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var n=e.document.createElement("script");n.onreadystatechange=function(){_(),n.onreadystatechange=null,n.parentNode.removeChild(n),n=null},e.document.documentElement.appendChild(n)}:function(){setTimeout(_,0)};else{var l=new e.MessageChannel;l.port1.onmessage=_,t=function(){l.port2.postMessage(0)}}var c=[];function _(){var e,n;a=!0;for(var t=c.length;t;){for(n=c,c=[],e=-1;++e<t;)n[e]();t=c.length}a=!1}function d(e){1!==c.push(e)||a||t()}n.exports=d}).call(this,void 0!==ye?ye:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,n,t){var a=e(1);function i(){}var o={},s=["REJECTED"],r=["FULFILLED"],l=["PENDING"];function c(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,e!==i&&f(this,e)}function _(e,n,t){this.promise=e,"function"==typeof n&&(this.onFulfilled=n,this.callFulfilled=this.otherCallFulfilled),"function"==typeof t&&(this.onRejected=t,this.callRejected=this.otherCallRejected)}function d(e,n,t){a((function(){var a;try{a=n(t)}catch(n){return o.reject(e,n)}a===e?o.reject(e,new TypeError("Cannot resolve promise with itself")):o.resolve(e,a)}))}function u(e){var n=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof n)return function(){n.apply(e,arguments)}}function f(e,n){var t=!1;function a(n){t||(t=!0,o.reject(e,n))}function i(n){t||(t=!0,o.resolve(e,n))}function s(){n(i,a)}var r=p(s);"error"===r.status&&a(r.value)}function p(e,n){var t={};try{t.value=e(n),t.status="success"}catch(e){t.status="error",t.value=e}return t}function b(e){return e instanceof this?e:o.resolve(new this(i),e)}function v(e){var n=new this(i);return o.reject(n,e)}function y(e){var n=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var t=e.length,a=!1;if(!t)return this.resolve([]);for(var s=new Array(t),r=0,l=-1,c=new this(i);++l<t;)_(e[l],l);return c;function _(e,i){function l(e){s[i]=e,++r!==t||a||(a=!0,o.resolve(c,s))}n.resolve(e).then(l,(function(e){a||(a=!0,o.reject(c,e))}))}}function m(e){var n=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var t=e.length,a=!1;if(!t)return this.resolve([]);for(var s=-1,r=new this(i);++s<t;)l(e[s]);return r;function l(e){n.resolve(e).then((function(e){a||(a=!0,o.resolve(r,e))}),(function(e){a||(a=!0,o.reject(r,e))}))}}n.exports=c,c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,n){if("function"!=typeof e&&this.state===r||"function"!=typeof n&&this.state===s)return this;var t=new this.constructor(i);return this.state!==l?d(t,this.state===r?e:n,this.outcome):this.queue.push(new _(t,e,n)),t},_.prototype.callFulfilled=function(e){o.resolve(this.promise,e)},_.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},_.prototype.callRejected=function(e){o.reject(this.promise,e)},_.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},o.resolve=function(e,n){var t=p(u,n);if("error"===t.status)return o.reject(e,t.value);var a=t.value;if(a)f(e,a);else{e.state=r,e.outcome=n;for(var i=-1,s=e.queue.length;++i<s;)e.queue[i].callFulfilled(n)}return e},o.reject=function(e,n){e.state=s,e.outcome=n;for(var t=-1,a=e.queue.length;++t<a;)e.queue[t].callRejected(n);return e},c.resolve=b,c.reject=v,c.all=y,c.race=m},{1:1}],3:[function(e,n,t){(function(n){"function"!=typeof n.Promise&&(n.Promise=e(2))}).call(this,void 0!==ye?ye:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,n,t){var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function o(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}var s=o();function r(){try{if(!s||!s.open)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),n="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||n)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}function l(e,n){e=e||[],n=n||{};try{return new Blob(e,n)}catch(i){if("TypeError"!==i.name)throw i;for(var t=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),a=0;a<e.length;a+=1)t.append(e[a]);return t.getBlob(n.type)}}"undefined"==typeof Promise&&e(3);var c=Promise;function _(e,n){n&&e.then((function(e){n(null,e)}),(function(e){n(e)}))}function d(e,n,t){"function"==typeof n&&e.then(n),"function"==typeof t&&e.catch(t)}function u(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function f(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var p="local-forage-detect-blob-support",b=void 0,v={},y=Object.prototype.toString,m="readonly",h="readwrite";function w(e){for(var n=e.length,t=new ArrayBuffer(n),a=new Uint8Array(t),i=0;i<n;i++)a[i]=e.charCodeAt(i);return t}function g(e){return new c((function(n){var t=e.transaction(p,h),a=l([""]);t.objectStore(p).put(a,"key"),t.onabort=function(e){e.preventDefault(),e.stopPropagation(),n(!1)},t.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),t=navigator.userAgent.match(/Edge\//);n(t||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))}function S(e){return"boolean"==typeof b?c.resolve(b):g(e).then((function(e){return b=e}))}function C(e){var n=v[e.name],t={};t.promise=new c((function(e,n){t.resolve=e,t.reject=n})),n.deferredOperations.push(t),n.dbReady?n.dbReady=n.dbReady.then((function(){return t.promise})):n.dbReady=t.promise}function x(e){var n=v[e.name].deferredOperations.pop();if(n)return n.resolve(),n.promise}function I(e,n){var t=v[e.name].deferredOperations.pop();if(t)return t.reject(n),t.promise}function k(e,n){return new c((function(t,a){if(v[e.name]=v[e.name]||V(),e.db){if(!n)return t(e.db);C(e),e.db.close()}var i=[e.name];n&&i.push(e.version);var o=s.open.apply(s,i);n&&(o.onupgradeneeded=function(n){var t=o.result;try{t.createObjectStore(e.storeName),n.oldVersion<=1&&t.createObjectStore(p)}catch(t){if("ConstraintError"!==t.name)throw t;console.warn('The database "'+e.name+'" has been upgraded from version '+n.oldVersion+" to version "+n.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),o.onerror=function(e){e.preventDefault(),a(o.error)},o.onsuccess=function(){var n=o.result;n.onversionchange=function(e){e.target.close()},t(n),x(e)}}))}function B(e){return k(e,!1)}function E(e){return k(e,!0)}function T(e,n){if(!e.db)return!0;var t=!e.db.objectStoreNames.contains(e.storeName),a=e.version<e.db.version,i=e.version>e.db.version;if(a&&(e.version!==n&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),i||t){if(t){var o=e.db.version+1;o>e.version&&(e.version=o)}return!0}return!1}function A(e){return new c((function(n,t){var a=new FileReader;a.onerror=t,a.onloadend=function(t){var a=btoa(t.target.result||"");n({__local_forage_encoded_blob:!0,data:a,type:e.type})},a.readAsBinaryString(e)}))}function L(e){return l([w(atob(e.data))],{type:e.type})}function D(e){return e&&e.__local_forage_encoded_blob}function M(e){var n=this,t=n._initReady().then((function(){var e=v[n._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return d(t,e,e),t}function N(e){C(e);for(var n=v[e.name],t=n.forages,a=0;a<t.length;a++){var i=t[a];i._dbInfo.db&&(i._dbInfo.db.close(),i._dbInfo.db=null)}return e.db=null,B(e).then((function(n){return e.db=n,T(e)?E(e):n})).then((function(a){e.db=n.db=a;for(var i=0;i<t.length;i++)t[i]._dbInfo.db=a})).catch((function(n){throw I(e,n),n}))}function O(e,n,t,a){void 0===a&&(a=1);try{var i=e.db.transaction(e.storeName,n);t(null,i)}catch(i){if(a>0&&(!e.db||"InvalidStateError"===i.name||"NotFoundError"===i.name))return c.resolve().then((function(){if(!e.db||"NotFoundError"===i.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),E(e)})).then((function(){return N(e).then((function(){O(e,n,t,a-1)}))})).catch(t);t(i)}}function V(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function R(e){var n=this,t={db:null};if(e)for(var a in e)t[a]=e[a];var i=v[t.name];i||(i=V(),v[t.name]=i),i.forages.push(n),n._initReady||(n._initReady=n.ready,n.ready=M);var o=[];function s(){return c.resolve()}for(var r=0;r<i.forages.length;r++){var l=i.forages[r];l!==n&&o.push(l._initReady().catch(s))}var _=i.forages.slice(0);return c.all(o).then((function(){return t.db=i.db,B(t)})).then((function(e){return t.db=e,T(t,n._defaultConfig.version)?E(t):e})).then((function(e){t.db=i.db=e,n._dbInfo=t;for(var a=0;a<_.length;a++){var o=_[a];o!==n&&(o._dbInfo.db=t.db,o._dbInfo.version=t.version)}}))}function P(e,n){var t=this;e=u(e);var a=new c((function(n,a){t.ready().then((function(){O(t._dbInfo,m,(function(i,o){if(i)return a(i);try{var s=o.objectStore(t._dbInfo.storeName).get(e);s.onsuccess=function(){var e=s.result;void 0===e&&(e=null),D(e)&&(e=L(e)),n(e)},s.onerror=function(){a(s.error)}}catch(e){a(e)}}))})).catch(a)}));return _(a,n),a}function H(e,n){var t=this,a=new c((function(n,a){t.ready().then((function(){O(t._dbInfo,m,(function(i,o){if(i)return a(i);try{var s=o.objectStore(t._dbInfo.storeName).openCursor(),r=1;s.onsuccess=function(){var t=s.result;if(t){var a=t.value;D(a)&&(a=L(a));var i=e(a,t.key,r++);void 0!==i?n(i):t.continue()}else n()},s.onerror=function(){a(s.error)}}catch(e){a(e)}}))})).catch(a)}));return _(a,n),a}function j(e,n,t){var a=this;e=u(e);var i=new c((function(t,i){var o;a.ready().then((function(){return o=a._dbInfo,"[object Blob]"===y.call(n)?S(o.db).then((function(e){return e?n:A(n)})):n})).then((function(n){O(a._dbInfo,h,(function(o,s){if(o)return i(o);try{var r=s.objectStore(a._dbInfo.storeName);null===n&&(n=void 0);var l=r.put(n,e);s.oncomplete=function(){void 0===n&&(n=null),t(n)},s.onabort=s.onerror=function(){var e=l.error?l.error:l.transaction.error;i(e)}}catch(e){i(e)}}))})).catch(i)}));return _(i,t),i}function z(e,n){var t=this;e=u(e);var a=new c((function(n,a){t.ready().then((function(){O(t._dbInfo,h,(function(i,o){if(i)return a(i);try{var s=o.objectStore(t._dbInfo.storeName).delete(e);o.oncomplete=function(){n()},o.onerror=function(){a(s.error)},o.onabort=function(){var e=s.error?s.error:s.transaction.error;a(e)}}catch(e){a(e)}}))})).catch(a)}));return _(a,n),a}function $(e){var n=this,t=new c((function(e,t){n.ready().then((function(){O(n._dbInfo,h,(function(a,i){if(a)return t(a);try{var o=i.objectStore(n._dbInfo.storeName).clear();i.oncomplete=function(){e()},i.onabort=i.onerror=function(){var e=o.error?o.error:o.transaction.error;t(e)}}catch(e){t(e)}}))})).catch(t)}));return _(t,e),t}function F(e){var n=this,t=new c((function(e,t){n.ready().then((function(){O(n._dbInfo,m,(function(a,i){if(a)return t(a);try{var o=i.objectStore(n._dbInfo.storeName).count();o.onsuccess=function(){e(o.result)},o.onerror=function(){t(o.error)}}catch(e){t(e)}}))})).catch(t)}));return _(t,e),t}function q(e,n){var t=this,a=new c((function(n,a){e<0?n(null):t.ready().then((function(){O(t._dbInfo,m,(function(i,o){if(i)return a(i);try{var s=o.objectStore(t._dbInfo.storeName),r=!1,l=s.openKeyCursor();l.onsuccess=function(){var t=l.result;t?0===e||r?n(t.key):(r=!0,t.advance(e)):n(null)},l.onerror=function(){a(l.error)}}catch(e){a(e)}}))})).catch(a)}));return _(a,n),a}function W(e){var n=this,t=new c((function(e,t){n.ready().then((function(){O(n._dbInfo,m,(function(a,i){if(a)return t(a);try{var o=i.objectStore(n._dbInfo.storeName).openKeyCursor(),s=[];o.onsuccess=function(){var n=o.result;n?(s.push(n.key),n.continue()):e(s)},o.onerror=function(){t(o.error)}}catch(e){t(e)}}))})).catch(t)}));return _(t,e),t}function U(e,n){n=f.apply(this,arguments);var t=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||t.name,e.storeName=e.storeName||t.storeName);var a,i=this;if(e.name){var o=e.name===t.name&&i._dbInfo.db?c.resolve(i._dbInfo.db):B(e).then((function(n){var t=v[e.name],a=t.forages;t.db=n;for(var i=0;i<a.length;i++)a[i]._dbInfo.db=n;return n}));a=e.storeName?o.then((function(n){if(n.objectStoreNames.contains(e.storeName)){var t=n.version+1;C(e);var a=v[e.name],i=a.forages;n.close();for(var o=0;o<i.length;o++){var r=i[o];r._dbInfo.db=null,r._dbInfo.version=t}var l=new c((function(n,a){var i=s.open(e.name,t);i.onerror=function(e){i.result.close(),a(e)},i.onupgradeneeded=function(){i.result.deleteObjectStore(e.storeName)},i.onsuccess=function(){var e=i.result;e.close(),n(e)}}));return l.then((function(e){a.db=e;for(var n=0;n<i.length;n++){var t=i[n];t._dbInfo.db=e,x(t._dbInfo)}})).catch((function(n){throw(I(e,n)||c.resolve()).catch((function(){})),n}))}})):o.then((function(n){C(e);var t=v[e.name],a=t.forages;n.close();for(var i=0;i<a.length;i++)a[i]._dbInfo.db=null;var o=new c((function(n,t){var a=s.deleteDatabase(e.name);a.onerror=function(){var e=a.result;e&&e.close(),t(a.error)},a.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},a.onsuccess=function(){var e=a.result;e&&e.close(),n(e)}}));return o.then((function(e){t.db=e;for(var n=0;n<a.length;n++)x(a[n]._dbInfo)})).catch((function(n){throw(I(e,n)||c.resolve()).catch((function(){})),n}))}))}else a=c.reject("Invalid arguments");return _(a,n),a}var G={_driver:"asyncStorage",_initStorage:R,_support:r(),iterate:H,getItem:P,setItem:j,removeItem:z,clear:$,length:F,key:q,keys:W,dropInstance:U};function X(){return"function"==typeof openDatabase}var Y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Q="~~local_forage_type~",K=/^~~local_forage_type~([^~]+)~/,J="__lfsc__:",Z=J.length,ee="arbf",ne="blob",te="si08",ae="ui08",ie="uic8",oe="si16",se="si32",re="ur16",le="ui32",ce="fl32",_e="fl64",de=Z+ee.length,ue=Object.prototype.toString;function fe(e){var n,t,a,i,o,s=.75*e.length,r=e.length,l=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);var c=new ArrayBuffer(s),_=new Uint8Array(c);for(n=0;n<r;n+=4)t=Y.indexOf(e[n]),a=Y.indexOf(e[n+1]),i=Y.indexOf(e[n+2]),o=Y.indexOf(e[n+3]),_[l++]=t<<2|a>>4,_[l++]=(15&a)<<4|i>>2,_[l++]=(3&i)<<6|63&o;return c}function pe(e){var n,t=new Uint8Array(e),a="";for(n=0;n<t.length;n+=3)a+=Y[t[n]>>2],a+=Y[(3&t[n])<<4|t[n+1]>>4],a+=Y[(15&t[n+1])<<2|t[n+2]>>6],a+=Y[63&t[n+2]];return t.length%3==2?a=a.substring(0,a.length-1)+"=":t.length%3==1&&(a=a.substring(0,a.length-2)+"=="),a}function be(e,n){var t="";if(e&&(t=ue.call(e)),e&&("[object ArrayBuffer]"===t||e.buffer&&"[object ArrayBuffer]"===ue.call(e.buffer))){var a,i=J;e instanceof ArrayBuffer?(a=e,i+=ee):(a=e.buffer,"[object Int8Array]"===t?i+=te:"[object Uint8Array]"===t?i+=ae:"[object Uint8ClampedArray]"===t?i+=ie:"[object Int16Array]"===t?i+=oe:"[object Uint16Array]"===t?i+=re:"[object Int32Array]"===t?i+=se:"[object Uint32Array]"===t?i+=le:"[object Float32Array]"===t?i+=ce:"[object Float64Array]"===t?i+=_e:n(new Error("Failed to get type for BinaryArray"))),n(i+pe(a))}else if("[object Blob]"===t){var o=new FileReader;o.onload=function(){var t=Q+e.type+"~"+pe(this.result);n(J+ne+t)},o.readAsArrayBuffer(e)}else try{n(JSON.stringify(e))}catch(t){console.error("Couldn't convert value into a JSON string: ",e),n(null,t)}}function ve(e){if(e.substring(0,Z)!==J)return JSON.parse(e);var n,t=e.substring(de),a=e.substring(Z,de);if(a===ne&&K.test(t)){var i=t.match(K);n=i[1],t=t.substring(i[0].length)}var o=fe(t);switch(a){case ee:return o;case ne:return l([o],{type:n});case te:return new Int8Array(o);case ae:return new Uint8Array(o);case ie:return new Uint8ClampedArray(o);case oe:return new Int16Array(o);case re:return new Uint16Array(o);case se:return new Int32Array(o);case le:return new Uint32Array(o);case ce:return new Float32Array(o);case _e:return new Float64Array(o);default:throw new Error("Unkown type: "+a)}}var ye={serialize:be,deserialize:ve,stringToBuffer:fe,bufferToString:pe};function me(e,n,t,a){e.executeSql("CREATE TABLE IF NOT EXISTS "+n.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],t,a)}function he(e){var n=this,t={db:null};if(e)for(var a in e)t[a]="string"!=typeof e[a]?e[a].toString():e[a];var i=new c((function(e,a){try{t.db=openDatabase(t.name,String(t.version),t.description,t.size)}catch(e){return a(e)}t.db.transaction((function(i){me(i,t,(function(){n._dbInfo=t,e()}),(function(e,n){a(n)}))}),a)}));return t.serializer=ye,i}function we(e,n,t,a,i,o){e.executeSql(t,a,i,(function(e,s){s.code===s.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[n.storeName],(function(e,r){r.rows.length?o(e,s):me(e,n,(function(){e.executeSql(t,a,i,o)}),o)}),o):o(e,s)}),o)}function ge(e,n){var t=this;e=u(e);var a=new c((function(n,a){t.ready().then((function(){var i=t._dbInfo;i.db.transaction((function(t){we(t,i,"SELECT * FROM "+i.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,t){var a=t.rows.length?t.rows.item(0).value:null;a&&(a=i.serializer.deserialize(a)),n(a)}),(function(e,n){a(n)}))}))})).catch(a)}));return _(a,n),a}function Se(e,n){var t=this,a=new c((function(n,a){t.ready().then((function(){var i=t._dbInfo;i.db.transaction((function(t){we(t,i,"SELECT * FROM "+i.storeName,[],(function(t,a){for(var o=a.rows,s=o.length,r=0;r<s;r++){var l=o.item(r),c=l.value;if(c&&(c=i.serializer.deserialize(c)),void 0!==(c=e(c,l.key,r+1)))return void n(c)}n()}),(function(e,n){a(n)}))}))})).catch(a)}));return _(a,n),a}function Ce(e,n,t,a){var i=this;e=u(e);var o=new c((function(o,s){i.ready().then((function(){void 0===n&&(n=null);var r=n,l=i._dbInfo;l.serializer.serialize(n,(function(n,c){c?s(c):l.db.transaction((function(t){we(t,l,"INSERT OR REPLACE INTO "+l.storeName+" (key, value) VALUES (?, ?)",[e,n],(function(){o(r)}),(function(e,n){s(n)}))}),(function(n){if(n.code===n.QUOTA_ERR){if(a>0)return void o(Ce.apply(i,[e,r,t,a-1]));s(n)}}))}))})).catch(s)}));return _(o,t),o}function xe(e,n,t){return Ce.apply(this,[e,n,t,1])}function Ie(e,n){var t=this;e=u(e);var a=new c((function(n,a){t.ready().then((function(){var i=t._dbInfo;i.db.transaction((function(t){we(t,i,"DELETE FROM "+i.storeName+" WHERE key = ?",[e],(function(){n()}),(function(e,n){a(n)}))}))})).catch(a)}));return _(a,n),a}function ke(e){var n=this,t=new c((function(e,t){n.ready().then((function(){var a=n._dbInfo;a.db.transaction((function(n){we(n,a,"DELETE FROM "+a.storeName,[],(function(){e()}),(function(e,n){t(n)}))}))})).catch(t)}));return _(t,e),t}function Be(e){var n=this,t=new c((function(e,t){n.ready().then((function(){var a=n._dbInfo;a.db.transaction((function(n){we(n,a,"SELECT COUNT(key) as c FROM "+a.storeName,[],(function(n,t){var a=t.rows.item(0).c;e(a)}),(function(e,n){t(n)}))}))})).catch(t)}));return _(t,e),t}function Ee(e,n){var t=this,a=new c((function(n,a){t.ready().then((function(){var i=t._dbInfo;i.db.transaction((function(t){we(t,i,"SELECT key FROM "+i.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,t){var a=t.rows.length?t.rows.item(0).key:null;n(a)}),(function(e,n){a(n)}))}))})).catch(a)}));return _(a,n),a}function Te(e){var n=this,t=new c((function(e,t){n.ready().then((function(){var a=n._dbInfo;a.db.transaction((function(n){we(n,a,"SELECT key FROM "+a.storeName,[],(function(n,t){for(var a=[],i=0;i<t.rows.length;i++)a.push(t.rows.item(i).key);e(a)}),(function(e,n){t(n)}))}))})).catch(t)}));return _(t,e),t}function Ae(e){return new c((function(n,t){e.transaction((function(a){a.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(t,a){for(var i=[],o=0;o<a.rows.length;o++)i.push(a.rows.item(o).name);n({db:e,storeNames:i})}),(function(e,n){t(n)}))}),(function(e){t(e)}))}))}function Le(e,n){n=f.apply(this,arguments);var t=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||t.name,e.storeName=e.storeName||t.storeName);var a,i=this;return _(a=e.name?new c((function(n){var a;a=e.name===t.name?i._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?n({db:a,storeNames:[e.storeName]}):n(Ae(a))})).then((function(e){return new c((function(n,t){e.db.transaction((function(a){function i(e){return new c((function(n,t){a.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){n()}),(function(e,n){t(n)}))}))}for(var o=[],s=0,r=e.storeNames.length;s<r;s++)o.push(i(e.storeNames[s]));c.all(o).then((function(){n()})).catch((function(e){t(e)}))}),(function(e){t(e)}))}))})):c.reject("Invalid arguments"),n),a}var De={_driver:"webSQLStorage",_initStorage:he,_support:X(),iterate:Se,getItem:ge,setItem:xe,removeItem:Ie,clear:ke,length:Be,key:Ee,keys:Te,dropInstance:Le};function Me(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}function Ne(e,n){var t=e.name+"/";return e.storeName!==n.storeName&&(t+=e.storeName+"/"),t}function Oe(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(e){return!0}}function Ve(){return!Oe()||localStorage.length>0}function Re(e){var n=this,t={};if(e)for(var a in e)t[a]=e[a];return t.keyPrefix=Ne(e,n._defaultConfig),Ve()?(n._dbInfo=t,t.serializer=ye,c.resolve()):c.reject()}function Pe(e){var n=this,t=n.ready().then((function(){for(var e=n._dbInfo.keyPrefix,t=localStorage.length-1;t>=0;t--){var a=localStorage.key(t);0===a.indexOf(e)&&localStorage.removeItem(a)}}));return _(t,e),t}function He(e,n){var t=this;e=u(e);var a=t.ready().then((function(){var n=t._dbInfo,a=localStorage.getItem(n.keyPrefix+e);return a&&(a=n.serializer.deserialize(a)),a}));return _(a,n),a}function je(e,n){var t=this,a=t.ready().then((function(){for(var n=t._dbInfo,a=n.keyPrefix,i=a.length,o=localStorage.length,s=1,r=0;r<o;r++){var l=localStorage.key(r);if(0===l.indexOf(a)){var c=localStorage.getItem(l);if(c&&(c=n.serializer.deserialize(c)),void 0!==(c=e(c,l.substring(i),s++)))return c}}}));return _(a,n),a}function ze(e,n){var t=this,a=t.ready().then((function(){var n,a=t._dbInfo;try{n=localStorage.key(e)}catch(e){n=null}return n&&(n=n.substring(a.keyPrefix.length)),n}));return _(a,n),a}function $e(e){var n=this,t=n.ready().then((function(){for(var e=n._dbInfo,t=localStorage.length,a=[],i=0;i<t;i++){var o=localStorage.key(i);0===o.indexOf(e.keyPrefix)&&a.push(o.substring(e.keyPrefix.length))}return a}));return _(t,e),t}function Fe(e){var n=this.keys().then((function(e){return e.length}));return _(n,e),n}function qe(e,n){var t=this;e=u(e);var a=t.ready().then((function(){var n=t._dbInfo;localStorage.removeItem(n.keyPrefix+e)}));return _(a,n),a}function We(e,n,t){var a=this;e=u(e);var i=a.ready().then((function(){void 0===n&&(n=null);var t=n;return new c((function(i,o){var s=a._dbInfo;s.serializer.serialize(n,(function(n,a){if(a)o(a);else try{localStorage.setItem(s.keyPrefix+e,n),i(t)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||o(e),o(e)}}))}))}));return _(i,t),i}function Ue(e,n){if(n=f.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var t=this.config();e.name=e.name||t.name,e.storeName=e.storeName||t.storeName}var a,i=this;return a=e.name?new c((function(n){e.storeName?n(Ne(e,i._defaultConfig)):n(e.name+"/")})).then((function(e){for(var n=localStorage.length-1;n>=0;n--){var t=localStorage.key(n);0===t.indexOf(e)&&localStorage.removeItem(t)}})):c.reject("Invalid arguments"),_(a,n),a}var Ge={_driver:"localStorageWrapper",_initStorage:Re,_support:Me(),iterate:je,getItem:He,setItem:We,removeItem:qe,clear:Pe,length:Fe,key:ze,keys:$e,dropInstance:Ue},Xe=function(e,n){return e===n||"number"==typeof e&&"number"==typeof n&&isNaN(e)&&isNaN(n)},Ye=function(e,n){for(var t=e.length,a=0;a<t;){if(Xe(e[a],n))return!0;a++}return!1},Qe=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},Ke={},Je={},Ze={INDEXEDDB:G,WEBSQL:De,LOCALSTORAGE:Ge},en=[Ze.INDEXEDDB._driver,Ze.WEBSQL._driver,Ze.LOCALSTORAGE._driver],nn=["dropInstance"],tn=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(nn),an={description:"",driver:en.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function on(e,n){e[n]=function(){var t=arguments;return e.ready().then((function(){return e[n].apply(e,t)}))}}function sn(){for(var e=1;e<arguments.length;e++){var n=arguments[e];if(n)for(var t in n)n.hasOwnProperty(t)&&(Qe(n[t])?arguments[0][t]=n[t].slice():arguments[0][t]=n[t])}return arguments[0]}var rn=function(){function e(n){for(var t in i(this,e),Ze)if(Ze.hasOwnProperty(t)){var a=Ze[t],o=a._driver;this[t]=o,Ke[o]||this.defineDriver(a)}this._defaultConfig=sn({},an),this._config=sn({},this._defaultConfig,n),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":a(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var n in e){if("storeName"===n&&(e[n]=e[n].replace(/\W/g,"_")),"version"===n&&"number"!=typeof e[n])return new Error("Database version must be a number.");this._config[n]=e[n]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,n,t){var a=new c((function(n,t){try{var a=e._driver,i=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void t(i);for(var o=tn.concat("_initStorage"),s=0,r=o.length;s<r;s++){var l=o[s];if((!Ye(nn,l)||e[l])&&"function"!=typeof e[l])return void t(i)}var d=function(){for(var n=function(e){return function(){var n=new Error("Method "+e+" is not implemented by the current driver"),t=c.reject(n);return _(t,arguments[arguments.length-1]),t}},t=0,a=nn.length;t<a;t++){var i=nn[t];e[i]||(e[i]=n(i))}};d();var u=function(t){Ke[a]&&console.info("Redefining LocalForage driver: "+a),Ke[a]=e,Je[a]=t,n()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(u,t):u(!!e._support):u(!0)}catch(e){t(e)}}));return d(a,n,t),a},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,n,t){var a=Ke[e]?c.resolve(Ke[e]):c.reject(new Error("Driver not found."));return d(a,n,t),a},e.prototype.getSerializer=function(e){var n=c.resolve(ye);return d(n,e),n},e.prototype.ready=function(e){var n=this,t=n._driverSet.then((function(){return null===n._ready&&(n._ready=n._initDriver()),n._ready}));return d(t,e,e),t},e.prototype.setDriver=function(e,n,t){var a=this;Qe(e)||(e=[e]);var i=this._getSupportedDrivers(e);function o(){a._config.driver=a.driver()}function s(e){return a._extend(e),o(),a._ready=a._initStorage(a._config),a._ready}function r(e){return function(){var n=0;function t(){for(;n<e.length;){var i=e[n];return n++,a._dbInfo=null,a._ready=null,a.getDriver(i).then(s).catch(t)}o();var r=new Error("No available storage method found.");return a._driverSet=c.reject(r),a._driverSet}return t()}}var l=null!==this._driverSet?this._driverSet.catch((function(){return c.resolve()})):c.resolve();return this._driverSet=l.then((function(){var e=i[0];return a._dbInfo=null,a._ready=null,a.getDriver(e).then((function(e){a._driver=e._driver,o(),a._wrapLibraryMethodsWithReady(),a._initDriver=r(i)}))})).catch((function(){o();var e=new Error("No available storage method found.");return a._driverSet=c.reject(e),a._driverSet})),d(this._driverSet,n,t),this._driverSet},e.prototype.supports=function(e){return!!Je[e]},e.prototype._extend=function(e){sn(this,e)},e.prototype._getSupportedDrivers=function(e){for(var n=[],t=0,a=e.length;t<a;t++){var i=e[t];this.supports(i)&&n.push(i)}return n},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,n=tn.length;e<n;e++)on(this,tn[e])},e.prototype.createInstance=function(n){return new e(n)},e}(),ln=new rn;n.exports=ln},{3:3}]},{},[4])(4);const we="winsayUserData";w("branch--Sillot")||function(){let e=new URL(window.location.href);switch(!0){case e.pathname.startsWith("/stage/build/app"):m("body--app");break;case e.pathname.startsWith("/stage/build/desktop"):m("body--desktop");break;case e.pathname.startsWith("/stage/build/mobile"):m("body--mobile");break;default:m("body--unkown")}}(),setInterval((()=>{null==window.siyuan.user?(h("user--Sub"),h("user--NonSub"),m("user--null")):window.siyuan.user.userSiYuanProExpireTime>Date.now()?(h("user--null"),h("user--NonSub"),m("user--Sub")):(h("user--null"),h("user--Sub"),m("user--NonSub"))}),5800),async function(){console.log("booting..."),window.winsay.API=pe,window.winsay.storage.iterLC=d(o),window.winsay.storage.iterDC=u(r);var e=null,n=null;if(ve()&&(e=require("fs"),n=require("path")),await new Promise((async function(e){let n=!0;for(;n;)try{await he.setDriver(he.INDEXEDDB).then((async()=>{he.config({storeName:we}),await he.ready().then((async()=>{await he.setItem("winsay_latest_boot_time",Date.now().toString()),n=!1,e(he.driver())}))}))}catch(e){console.log(e),await B(200)}})).then((async function(t){console.log(t),await new Promise((async t=>{Promise.resolve().then((function(){return Ne})).then((()=>{Promise.resolve().then((function(){return He})).then((async()=>{await async function(){await he.getItem("SC_winsay_cp_inited").then((async e=>{console.error(e),"true"!==e&&(await he.setItem("SC_winsay_cp_system__SelfProtection","true"),await he.setItem("SC_winsay_cp_editor__LH_Adaptive","true"),await he.setItem("SC_winsay_cp_editor__ListAutoIndent","true"),await he.setItem("SC_winsay_cp_editor__HintHint-index","true"),await he.setItem("SC_winsay_cp_editor__BlockTable_FontSize","92%"),await he.setItem("SC_winsay_cp_editor__Block-Inline-link__block-ref-content","⁅⁅ ⁆⁆"),await he.setItem("SC_winsay_cp_editor__block__popover--open__PinSense","1"),await he.setItem("SC_winsay_cp_appearance__ToolBarMode__NotFocus__bgColor","var(--b3-theme-surface-lighter)"),await he.setItem("SC_winsay_cp_appearance__ShowWebIcon","true"),await he.setItem("SC_winsay_cp_appearance__ShowFileIcon","true"),await he.setItem("SC_winsay_cp_appearance__status_msg_opacity","0.9"),await he.setItem("SC_winsay_cp_appearance__strengthen_backlinkList_panel_border","true"),await he.setItem("SC_winsay_cp_filetree__Adaptive_display","true"),await he.setItem("SC_winsay_cp_search__index","true"),await he.setItem("SC_winsay_cp_search__layout","layout-Auto.css"),await he.setItem("SC_winsay_cp_inited","true"))}))}()}))})),setTimeout((async()=>{await he.getItem("SC_winsay_cp_system__SelfProtection");var t="";n&&(t=n.join(window.siyuan.config.system.confDir,b)),e&&e.access(t,(e=>{e&&(console.error(e),alert(`主题根目录未正确命名或不存在：【致命错误】${t} 文件夹不存在。修正错误后，需重启思源并重新选择主题。（在主题设置中关闭主题自我保护可禁用此通知）`))}))}),1e3),t()}))})),window.winsay.ekits.gites={UPath:"/appearance/themes/Sofill=/eHiWindom/gites/"},window.winsay.ekits.lnco={},"android"===window.winsay.OS)M("Mobile",`${b}style/Mobile/Android.css`);else M("fonts",`${window.winsay.ekits.gites.UPath}style/fonts.css`);M("Popup",`${b}style/_css_popup.css`),M("Patch",`${b}style/_css_patch.css`),M("CP",`${b}style/_css_CP.css`),M("MI-ToolBar-Auto",`${b}style/sweet/MI-ToolBar-Auto.css`),"body--mobile"===f&&(N(`${b}/es/lib/hammer.min.js`,"module",!0).onload=()=>{Promise.resolve().then((function(){return Fe}))}),Promise.resolve().then((function(){return Ne})).then((e=>{e.CP()}));let t=F(window.location.href,"action"),a=F(window.location.href,"name"),i=F(window.location.href,"args");if(t&&a)switch(t){case"updateTheme":document.querySelector("#toolbar #barSetting").click(),document.querySelector('.b3-tab-bar:not(.sc-custom-nav) [data-name="bazaar"]').click(),setTimeout((()=>{document.querySelector(`#configBazaarTheme [class="b3-card__actions"][data-name="${a}"]>[data-type="install-t"]`).click()}),500);break;case"next":"update-winsay"===a&&window.open(`http://${decodeURIComponent(i)}/stage/build/desktop/?action=updateTheme&name=Sofill-&args=null`,"_self")}}
/*!
* sofill v1.0.66
* https://github.com/Hi-Windom/Sofill
* https://www.npmjs.com/package/sofill
*/(),console.log("boot finished");
/*!
* sofill v1.0.66
* https://github.com/Hi-Windom/Sofill
* https://www.npmjs.com/package/sofill
*/
var ge='\n<div class="SCC-wrapper"></div><div class="b3-dialog--open"><div class="SCC-dialog b3-dialog ConfirmDialog"><div class="b3-dialog__scrim"></div><div class="b3-dialog__container" style="width:520px"><svg class="SCC-close b3-dialog__close fn__a"><use xlink:href="#iconClose"></use></svg><div class="b3-dialog__header" onselectstart="return false;">⚠️ 清空操作确认</div><div style="height:auto"><div class="b3-dialog__content">确定清除 <b>主题全部配置数据</b>? 操作不可恢复！<br><br><span style="color:red;font-size:1.02rem">用户自定义配置和主题数据将丢失</span></div><div class="b3-dialog__action"><button class="SCC-default b3-button b3-button--cancel">取消</button><div class="fn__space"></div><button class="SCC-primary b3-button b3-button--text" id="SC_winsay_confirmDialog_ConfirmBtn">确定</button></div></div></div></div></div>\n',Se='\n<div class="SCC-wrapper"></div><div class="b3-dialog--open"><div class="SCC-dialog b3-dialog ConfirmDialog"><div class="b3-dialog__scrim"></div><div class="b3-dialog__container" style="width:520px"><svg class="SCC-close b3-dialog__close fn__a"><use xlink:href="#iconClose"></use></svg><div class="b3-dialog__header" onselectstart="return false;">⚠️ 重置操作确认</div><div style="height:auto"><div class="b3-dialog__content">确定重置 <b>所有自定义设置数据</b>? 操作不可恢复！<br><br><span style="color:green;font-size:1.02rem">形态记忆等主题数据不会受影响</span></div><div class="b3-dialog__action"><button class="SCC-default b3-button b3-button--cancel">取消</button><div class="fn__space"></div><button class="SCC-primary b3-button b3-button--text" id="SC_winsay_confirmDialog_ConfirmBtn">确定</button></div></div></div></div></div>\n',Ce='\n<div class="SCC-wrapper"></div><div class="b3-dialog--open"><div class="SCC-dialog b3-dialog ConfirmDialog"><div class="b3-dialog__scrim"></div><div class="b3-dialog__container" style="width:520px"><svg class="SCC-close b3-dialog__close fn__a"><use xlink:href="#iconClose"></use></svg><div class="b3-dialog__header" onselectstart="return false;">⚠️ 覆盖操作确认</div><div style="height:auto"><div class="b3-dialog__content">确定覆盖 <b>已有配置数据</b>? 操作不可恢复！<br><br><span id="CoverWarming" style="color:blue;font-size:1.02rem"></span></div><div class="b3-dialog__action"><button class="SCC-default b3-button b3-button--cancel">取消</button><div class="fn__space"></div><button class="SCC-primary b3-button b3-button--text" id="SC_winsay_confirmDialog_ConfirmBtn">确定</button></div></div></div></div></div>\n',xe='\n<div class="SCC-wrapper"></div><div class="b3-dialog--open"><div class="SCC-dialog b3-dialog ConfirmDialog"><div class="b3-dialog__scrim"></div><div class="b3-dialog__container" style="width:520px"><svg class="SCC-close b3-dialog__close fn__a"><use xlink:href="#iconClose"></use></svg><div class="b3-dialog__header" onselectstart="return false;">🌐 更新操作确认</div><div style="height:auto"><div class="b3-dialog__content">更新可用： <b><span id="UpdateInfo"></span></b><br><br><span id="CoverWarming" style="color:blue;font-size:1.02rem"></span></div><div class="b3-dialog__action"><button class="SCC-default b3-button b3-button--cancel">取消</button><div class="fn__space"></div><button class="SCC-primary b3-button b3-button--text" id="SC_winsay_confirmDialog_ConfirmBtn">确定</button></div></div></div></div></div>\n',Ie='\n<div class="SCC-wrapper"></div><div class="b3-dialog--open"><div class="SCC-dialog b3-dialog ConfirmDialog"><div class="b3-dialog__scrim"></div><div class="b3-dialog__container" style="width:520px"><svg class="SCC-close b3-dialog__close fn__a"><use xlink:href="#iconClose"></use></svg><div class="b3-dialog__header" onselectstart="return false;">🚧 调试信息确认</div><div style="height:auto"><div class="b3-dialog__content" style="padding: 13px 31px 3px 34px;"><b><span id="UpdateInfo"></span></b><br><br><span id="CoverWarming" style="color:blue;font-size:1.02rem"></span></div></div></div></div></div>\n',ke='\n<div class="SCC-wrapper"></div><div class="b3-dialog--open"><div class="SCC-dialog b3-dialog ConfirmDialog"><div class="b3-dialog__scrim"></div><div class="b3-dialog__container" style="width:520px"><svg class="SCC-close b3-dialog__close fn__a"><use xlink:href="#iconClose"></use></svg><div class="b3-dialog__header" onselectstart="return false;">☢️ 主题自我保护警告</div><div style="height:auto"><div class="b3-dialog__content" style="padding: 13px 31px 3px 34px;"><b><span id="Info"></span></b><br><br><span id="CoverWarming" style="color:blue;font-size:1.02rem"></span><div class="b3-dialog__action"><button class="SCC-default b3-button b3-button--cancel">取消</button><div class="fn__space"></div><button class="SCC-primary b3-button b3-button--text" id="SC_winsay_confirmDialog_ConfirmBtn">确定</button></div></div></div></div></div></div>\n';class Be extends EventTarget{constructor(e){super();const n={width:"30%",height:"250px",title:"测试标题",XML:"测试内容",dragable:!1,maskable:!0,isCancel:!1,success(){},cancel(){}};this.opts={...n,...e},this.init()}init(){this.createElement(),this.addEventListener("success",this.opts.success),this.opts.maskable||(this.divEles.querySelector(".SCC-wrapper").style.display="none"),this.opts.dragable&&this.drag()}createElement(){const e=document.createElement("div");e.id="SC-CP",e.innerHTML='<div class="SCC-wrapper"></div><div class="b3-dialog--open"><div class="SCC-dialog b3-dialog"></div></div></div>',e.style.display="none",e.classList.add(a),document.body.appendChild(e),this.divEles=e}sure(e){const n=new CustomEvent("success",{detail:e});this.dispatchEvent(n)}close(){this.divEles.style.display="none"}dispose(){this.divEles.remove()}async open(e=(()=>{})){this.divEles.style.display="block","function"==typeof e&&e()}drag(){const e=this.divEles.querySelector(".SCC-dialog");e.onmousedown=function(e){const n=e.clientX-this.offsetLeft,t=e.clientY-this.offsetTop;this.onmousemove=function(e){const a=e.clientX,i=e.clientY;this.style.left=a-n+"px",this.style.top=i-t+"px"}},document.onmouseup=function(){e.onmousemove=""}}}class Ee extends Be{constructor(e){super(e),this.create(),this.addEleEvent()}create(){document.querySelectorAll("#SC-ConfirmDialog").forEach((e=>{e.remove()})),this.divEles.innerHTML=this.opts.XML,this.divEles.id="SC-ConfirmDialog"}sure(){super.sure(this)}addEleEvent(){this.divEles.querySelector(".SCC-dialog").addEventListener("click",(e=>{const n=e.target.classList;(n.contains("SCC-close")||n.contains("b3-dialog__scrim"))&&this.dispose(),(n.contains("SCC-default")||n.contains("b3-button--cancel"))&&(this.opts.cancel(),this.dispose()),n.contains("SCC-primary")&&(this.sure(),this.dispose())}))}}class Te extends Be{constructor(e){super(e),this.create(),this.addEleEvent()}create(){this.divEles.innerHTML='\n<div class="SCC-wrapper"></div>\n<div class="b3-dialog--open">\n  <div class="SCC-dialog b3-dialog">\n    <div class="b3-dialog__scrim"></div>\n      <div class="b3-dialog__container">\n      <div style="height:auto">\n        <div class="fn__flex-column" style="border-radius: 4px;overflow: hidden;position: relative">\n          <div class="fn__flex-1 fn__flex sc-custom-container-p">\n            <input class="sc-custom-nav-bind-class" id="sc-custom-nav-bind-id-editor" type="radio" name="nav">\n            <input class="sc-custom-nav-bind-class" id="sc-custom-nav-bind-id-appearance" type="radio" name="nav">\n            <input class="sc-custom-nav-bind-class" id="sc-custom-nav-bind-id-assets" type="radio" name="nav">\n            <input class="sc-custom-nav-bind-class" id="sc-custom-nav-bind-id-export" type="radio" name="nav">\n            <input class="sc-custom-nav-bind-class" id="sc-custom-nav-bind-id-search" type="radio" name="nav">\n            <input class="sc-custom-nav-bind-class" id="sc-custom-nav-bind-id-system" type="radio" name="nav">\n            <input class="sc-custom-nav-bind-class" id="sc-custom-nav-bind-id-custom" type="radio" name="nav">\n            <input class="sc-custom-nav-bind-class" id="sc-custom-nav-bind-id-extension" type="radio" name="nav">\n            <input class="sc-custom-nav-bind-class" id="sc-custom-nav-bind-id-filetree" type="radio" name="nav">\n            <input class="sc-custom-nav-bind-class" id="sc-custom-nav-bind-id-eHiWindom" type="radio" name="nav">\n            <input class="sc-custom-nav-bind-class" id="sc-custom-nav-bind-id-about" type="radio" name="nav">\n            <ul class="b3-tab-bar b3-list b3-list--background sc-custom-nav">\n              <li data-name="editor" class="b3-list-item b3-list-item--big">\n                <label for="sc-custom-nav-bind-id-editor"><svg class="b3-list-item__graphic">\n                    <use xlink:href="#iconEdit"></use>\n                  </svg><span>编辑器</span></label>\n              </li>\n              <li data-name="appearance" class="b3-list-item b3-list-item--big">\n                <label for="sc-custom-nav-bind-id-appearance">\n                  <svg class="b3-list-item__graphic">\n                    <use xlink:href="#iconTheme"></use>\n                  </svg><span>外观</span></label>\n              </li>\n              <li data-name="assets" class="b3-list-item b3-list-item--big">\n                <label for="sc-custom-nav-bind-id-assets">\n                  <svg class="b3-list-item__graphic">\n                    <use xlink:href="#iconImage"></use>\n                  </svg><span>资源</span></label>\n              </li>\n              <li data-name="export" class="b3-list-item b3-list-item--big">\n                <label for="sc-custom-nav-bind-id-export">\n                  <svg class="b3-list-item__graphic">\n                    <use xlink:href="#iconUpload"></use>\n                  </svg><span>导出</span></label>\n              </li>\n              <li data-name="search" class="b3-list-item b3-list-item--big SC_disableC__Android_mobile">\n                <label for="sc-custom-nav-bind-id-search">\n                  <svg class="b3-list-item__graphic">\n                    <use xlink:href="#iconSearch"></use>\n                  </svg><span>搜索</span></label>\n              </li>\n              <li data-name="system" class="b3-list-item b3-list-item--big">\n                <label for="sc-custom-nav-bind-id-system">\n                  <svg class="b3-list-item__graphic">\n                    <use xlink:href="#iconKeymap"></use>\n                  </svg><span>系统</span></label>\n              </li>\n              <li data-name="custom" class="b3-list-item b3-list-item--big">\n                <label for="sc-custom-nav-bind-id-custom">\n                  <svg class="b3-list-item__graphic">\n                    <use xlink:href="#iconAccount"></use>\n                  </svg><span>个性化</span></label>\n              </li>\n              <li data-name="extension" class="b3-list-item b3-list-item--big">\n                <label for="sc-custom-nav-bind-id-extension">\n                  <svg class="b3-list-item__graphic">\n                    <use xlink:href="#iconBazaar"></use>\n                  </svg><span>扩展</span></label>\n              </li>\n              <li data-name="filetree" class="b3-list-item b3-list-item--big">\n                <label for="sc-custom-nav-bind-id-filetree">\n                  <svg class="b3-list-item__graphic">\n                    <use xlink:href="#iconFiles"></use>\n                  </svg><span>文档树</span></label>\n              </li>\n              <li data-name="eHiWindom" class="b3-list-item b3-list-item--big">\n                <label for="sc-custom-nav-bind-id-eHiWindom">\n                  <svg class="b3-list-item__graphic">\n                    <use xlink:href="#iconCloud"></use>\n                  </svg><span>海文东互联</span></label>\n              </li>\n              <li data-name="about" class="b3-list-item b3-list-item--big">\n                <label for="sc-custom-nav-bind-id-about">\n                  <svg class="b3-list-item__graphic">\n                    <use xlink:href="#iconInfo"></use>\n                  </svg><span>关于</span></label>\n              </li>\n            </ul>\n            <div id="sc-custom-container-placehold" class="sc-tab-container">\n              <div class="sc-custom-placeholder">Sofill- v0 CP</div>\n            </div>\n\n            \x3c!-- 【编辑器】配置项 --\x3e\n            <div id="sc-custom-container-editor" class="sc-tab-container" data-name="editor">\n              <label class="fn__flex b3-label SC_ableC__Android_mobile">\n                <div class="fn__flex-1">\n                  行距自适应\n                  <div class="b3-label__text">注意：开启后隐藏一些选项。</div>\n                </div>\n                <span class="fn__space"></span>\n                <input class="b3-switch fn__flex-center" id="SC_winsay_cp_editor__LH_Adaptive" type="checkbox" checked>\n              </label>\n              <div class="SC_cp_BP SC_ableC__Android_mobile" id="BP__SC_winsay_cp_editor__LH_Adaptive">\n                <label class="fn__flex b3-label">\n                  <div class="fn__flex-1">\n                    段首缩进\n                    <div class="b3-label__text">仅影响顶级的段落，单位：rem，范围（-2，12）</div>\n                  </div>\n                  <span class="fn__space"></span>\n                  <input class="b3-text-field fn__flex-center fn__size200"\n                    id="SC_winsay_cp_editor__LH_Adaptive__pIndent" type="number" min="-2" max="12" value="0">\n                </label>\n                <label class="fn__flex b3-label">\n                  <div class="fn__flex-1">\n                    行高\n                    <div class="b3-label__text">仅影响顶级的段落，单位：100%，范围（1.1，3）</div>\n                  </div>\n                  <span class="fn__space"></span>\n                  <div class="b3-tooltips b3-tooltips__n fn__flex-center" aria-label="1.5"\n                    id="SC_winsay_cp_editor__LH_Adaptive__LH__label">\n                    <input class="b3-slider fn__size200" id="SC_winsay_cp_editor__LH_Adaptive__LH" max="3" min="1.1"\n                      step="0.01" type="range" value="1.5">\n                  </div>\n                </label>\n                <label class="fn__flex b3-label">\n                  <div class="fn__flex-1">\n                    段前段后间距\n                    <div class="b3-label__text">仅影响顶级的段落，前后分别为段前间距和段后间距，单位：1/100pt，范围（10,500）</div>\n                  </div>\n                  <span class="fn__space"></span>\n                  <input class="b3-text-field fn__flex-center" id="SC_winsay_cp_editor__LH_Adaptive__marginTop"\n                    style="width: 96px" type="number" step="1" min="10" max="500">\n                  <span class="fn__space"></span>\n                  <input class="b3-text-field fn__flex-center" id="SC_winsay_cp_editor__LH_Adaptive__marginBottom"\n                    style="width: 96px" type="number" step="1" min="10" max="500">\n                </label>\n                <label class="fn__flex b3-label">\n                  <div class="fn__flex-1">\n                    字符间距\n                    <div class="b3-label__text">仅影响顶级的段落，单位：px，范围（-0.1,0.58）</div>\n                  </div>\n                  <span class="fn__space"></span>\n                  <div class="b3-tooltips b3-tooltips__n fn__flex-center" aria-label="0"\n                    id="SC_winsay_cp_editor__LH_Adaptive__lSpacing__label">\n                    <input class="b3-slider fn__size200" id="SC_winsay_cp_editor__LH_Adaptive__lSpacing" max="0.58"\n                      min="-0.1" step="0.01" type="range" value="0">\n                  </div>\n                </label>\n              </div>\n              <label class="fn__flex b3-label">\n                <div class="fn__flex-1">\n                  大型文档结尾提示\n                  <div class="b3-label__text"></div>\n                </div>\n                <span class="fn__space"></span>\n                <input disabled class="b3-switch fn__flex-center" id="" type="checkbox" checked>\n              </label>\n              <label class="fn__flex b3-label">\n                <div class="fn__flex-1">\n                  在文档名下方显示创建日期\n                  <div class="b3-label__text">关闭后需重载生效</div>\n                </div>\n                <span class="fn__space"></span>\n                <input class="b3-switch fn__flex-center" id="SC_winsay_cp_editor__showDocCreatedDate" type="checkbox">\n              </label>\n              <label class="fn__flex b3-label">\n                <div class="fn__flex-1">\n                  列表视图转换功能\n                  <div class="b3-label__text"></div>\n                </div>\n                <span class="fn__space"></span>\n                <input disabled class="b3-switch fn__flex-center" id="" type="checkbox" checked>\n              </label>\n              <div class="b3-label SC_ableC__Android_mobile">\n                状态提示增强\n                <div class="b3-label__text">包括各种块的聚焦阴影、标题动画、行内代码聚焦彩蛋、引用聚焦波浪线、只读模式聚焦阴影等，不涉及编辑器外的页签聚焦、文档树聚焦等</div>\n                <div class="config-query-3cols">\n                  <label class="fn__flex">\n                    <div class="fn__flex-1 b3-label__text">\n                      各种块的悬停阴影\n                    </div>\n                    <span class="fn__space"></span>\n                    <input class="b3-switch fn__flex-center" id="SC_winsay_cp_editor__FocusEnhanc_BlockHoverShadow"\n                      type="checkbox">\n                  </label>\n                  <label class="fn__flex">\n                    <div class="fn__flex-1 b3-label__text">\n                      标题悬停彩蛋\n                    </div>\n                    <span class="fn__space"></span>\n                    <input class="b3-switch fn__flex-center" id="SC_winsay_cp_editor__FocusEnhanc_NodeHeading"\n                      type="checkbox">\n                  </label>\n                  <label class="fn__flex SC_disableC__Android_mobile">\n                    <div class="fn__flex-1 b3-label__text">\n                      文档名区域状态提示\n                    </div>\n                    <span class="fn__space"></span>\n                    <input class="b3-switch fn__flex-center" id="SC_winsay_cp_editor__FocusEnhanc_DocNameArea"\n                      type="checkbox">\n                  </label>\n                  <label class="fn__flex">\n                    <div class="fn__flex-1 b3-label__text">\n                      行内代码焦点彩蛋\n                    </div>\n                    <span class="fn__space"></span>\n                    <input class="b3-switch fn__flex-center" id="SC_winsay_cp_editor__FocusEnhanc_inlineCode"\n                      type="checkbox">\n                  </label>\n                  <label class="fn__flex">\n                    <div class="fn__flex-1 b3-label__text">\n                      引用悬停波浪线\n                    </div>\n                    <span class="fn__space"></span>\n                    <input class="b3-switch fn__flex-center" id="SC_winsay_cp_editor__FocusEnhanc_refWave"\n                      type="checkbox">\n                  </label>\n                  <label class="fn__flex fn__none">\n                    <div class="fn__flex-1 b3-label__text">\n                      只读模式悬停阴影（影响性能禁用）\n                    </div>\n                    <span class="fn__space"></span>\n                    <input disabled class="b3-switch fn__flex-center" id="SC_winsay_cp_editor__FocusEnhanc_docReadOnly"\n                      type="checkbox">\n                  </label>\n                  <label class="fn__flex SC_ableOnlyC__Android_mobile">\n                    <div class="fn__flex-1 b3-label__text">\n                      只读模式单击提示（手机端专属）\n                    </div>\n                    <span class="fn__space"></span>\n                    <input class="b3-switch fn__flex-center" id="SC_winsay_cp_editor__TapAlert_docReadOnly"\n                      type="checkbox">\n                  </label>\n                  <label class="fn__flex">\n                    <div class="fn__flex-1 b3-label__text">\n                      搜索框焦点阴影\n                    </div>\n                    <span class="fn__space"></span>\n                    <input class="b3-switch fn__flex-center" id="SC_winsay_cp_editor__FocusEnhanc_SearchInputShadow"\n                      type="checkbox">\n                  </label>\n                </div>\n              </div>\n              <label class="fn__flex b3-label">\n                <div class="fn__flex-1">\n                  标题折叠阴影\n                  <div class="b3-label__text"></div>\n                </div>\n                <span class="fn__space"></span>\n                <input class="b3-switch fn__flex-center" id="SC_winsay_cp_editor__NodeHeadingFoldedShadow"\n                  type="checkbox">\n              </label>\n              <label class="fn__flex b3-label">\n                <div class="fn__flex-1">\n                  任何时候都不隐藏面包屑\n                  <div class="b3-label__text"></div>\n                </div>\n                <span class="fn__space"></span>\n                <input class="b3-switch fn__flex-center" id="SC_winsay_cp_editor__ShowBreadcrumbAnytime"\n                  type="checkbox">\n              </label>\n              <label class="fn__flex b3-label SC_ableC__Android_mobile">\n                <div class="fn__flex-1">\n                  块滚动条模式\n                  <div class="b3-label__text"></div>\n                </div>\n                <span class="fn__space"></span>\n                <select id="SC_winsay_cp_editor__BlockScrollBar-opacity" class="b3-select fn__flex-center fn__size200">\n                  <option value="1">常显</option>\n                  <option value="0.88">聚焦显示</option>\n                  <option value="0">隐藏</option>\n                  <option value="-1">移除（避免遮挡）</option>\n                </select>\n              </label>\n              <label class="fn__flex b3-label SC_ableC__Android_mobile">\n                <div class="fn__flex-1">\n                  块滚动条位置\n                  <div class="b3-label__text"></div>\n                </div>\n                <span class="fn__space"></span>\n                <select id="SC_winsay_cp_editor__BlockScrollBar_Hposition"\n                  class="b3-select fn__flex-center fn__size200">\n                  <option value="R13">右侧贴边</option>\n                  <option value="R31">右侧离岸</option>\n                  <option value="L13">左侧贴边</option>\n                  <option value="L31">左侧离岸</option>\n                </select>\n              </label>\n              <label class="fn__flex b3-label">\n                <div class="fn__flex-1">\n                  HintHint 面板标号\n                  <div class="b3-label__text"></div>\n                </div>\n                <span class="fn__space"></span>\n                <input class="b3-switch fn__flex-center" id="SC_winsay_cp_editor__HintHint-index" type="checkbox">\n              </label>\n              <label class="fn__flex b3-label SC_ableC__Android_mobile">\n                <div class="fn__flex-1">\n                  HintHint 面板限高\n                  <div class="b3-label__text"></div>\n                </div>\n                <span class="fn__space"></span>\n                <select id="SC_winsay_cp_editor__HintHintMaxHeight" class="b3-select fn__flex-center fn__size200">\n                  <option value="402px">默认</option>\n                  <option value="min(88vh, 888px)">推荐</option>\n                  <option value="min(58vh, 580px)">略高</option>\n                </select>\n              </label>\n              <label class="fn__flex b3-label SC_ableC__Android_mobile">\n                <div class="fn__flex-1">\n                  HintHint 面板限宽\n                  <div class="b3-label__text"></div>\n                </div>\n                <span class="fn__space"></span>\n                <select id="SC_winsay_cp_editor__HintHintMaxWidth" class="b3-select fn__flex-center fn__size200">\n                  <option value="min-content">默认</option>\n                  <option value="min(88%,58em)">推荐</option>\n                  <option value="min(77%,31em)">略宽</option>\n                </select>\n              </label>\n              <label class="fn__flex b3-label">\n                <div class="fn__flex-1">\n                  文档宽度模式\n                  <div class="b3-label__text">满足不同尺寸屏幕需要。固定宽度需要搭配微软雅黑字体，效果仅供参考，以实际导出PDF为准。</div>\n                </div>\n                <span class="fn__space"></span>\n                <select id="SC_winsay_cp_editor__DocWidthMode" class="b3-select fn__flex-center fn__size200">\n                  <option value="null">默认</option>\n                  <option value="16px 31px 0px 31px">全宽（建议将块滚动条移至左侧）</option>\n                  <option value="16px 3.1cqw 0px">超宽</option>\n                  <option value="16px 5.8cqw 2rem">很宽</option>\n                  <option value="16px 8cqw 2rem">中宽</option>\n                  <option value="16px 13cqw 2rem 10cqw">较窄</option>\n                  <option value="16px 18.6cqw 2rem 14cqw">很窄</option>\n                  <option value="16px 25cqw 2rem 22cq">超窄</option>\n                  <option value="16px 31cqw 2rem 31cqw">极窄</option>\n                  <option value="1in 0.5in">A4 default（固定宽度）</option>\n                  <option value="0.42in">A4 default 横向页面（固定宽度）</option>\n                  <option value="0.41in">A3 default（固定宽度）</option>\n                  <option value="0.40in">A3 default 横向页面（固定宽度）</option>\n                </select>\n              </label>\n              <label class="fn__flex b3-label">\n                <div class="fn__flex-1">\n                  文档背景色\n                  <div class="b3-label__text"></div>\n                </div>\n                <span class="fn__space"></span>\n                <select id="SC_winsay_cp_editor__Doc_bgColor" class="b3-select fn__flex-center fn__size200">\n                  <option value="transparent">沉鱼落雁</option>\n                  <option value="#fefef158">闭月羞花</option>\n                  <option value="#fff">绝尘纯白</option>\n                  <option value="#fefefa">商务纸白</option>\n                  <option value="rgb(242 234 217 / 58%)">异域传说</option>\n                </select>\n              </label>\n              <label class="fn__flex b3-label SC_ableC__Android_mobile">\n                <div class="fn__flex-1">\n                  引用锚文本样式\n                  <div class="b3-label__text"></div>\n                </div>\n                <span class="fn__space"></span>\n                <select id="SC_winsay_cp_editor__Block-Inline-link__block-ref-content"\n                  class="b3-select fn__flex-center fn__size200">\n                  <option value="">无样式</option>\n                  <option value="⁅⁅ ⁆⁆">绛亽标准</option>\n                  <option value="[[ ]]">经典通用</option>\n                </select>\n              </label>\n              <label class="fn__flex b3-label SC_ableC__Android_mobile">\n                <div class="fn__flex-1">\n                  任务列表已完成项文字颜色\n                  <div class="b3-label__text"></div>\n                </div>\n                <span class="fn__space"></span>\n                <select id="SC_winsay_cp_editor__Block-List-Task__item-done__text-color"\n                  class="b3-select fn__flex-center fn__size200">\n                  <option value="default">默认</option>\n                  <option value="auto">自动</option>\n                </select>\n              </label>\n              <label class="fn__flex b3-label SC_ableC__Android_mobile">\n                <div class="fn__flex-1">\n                  题头图粘性布局\n                  <div class="b3-label__text">开启后文章背景会呈现磨砂效果，具体表现因不同图片和形态而异，文档标题将不受文档宽度模式影响</div>\n                </div>\n                <span class="fn__space"></span>\n                <input class="b3-switch fn__flex-center" id="SC_winsay_cp_editor__AreoBg-Filter" type="checkbox">\n              </label>\n              <label class="fn__flex b3-label SC_ableC__Android_mobile">\n                <div class="fn__flex-1">\n                  列表缩进自适应模式\n                  <div class="b3-label__text"></div>\n                </div>\n                <span class="fn__space"></span>\n                <select id="SC_winsay_cp_editor__ListAutoIndent_mode" class="b3-select fn__flex-center fn__size200">\n                  <option value="">禁用</option>\n                  <option value="1">适应容器</option>\n                  <option value="2">适应字号</option>\n                </select>\n              </label>\n              <label class="fn__flex b3-label">\n                <div class="fn__flex-1">\n                  列表辅助线聚焦点亮模式\n                  <div class="b3-label__text"></div>\n                </div>\n                <span class="fn__space"></span>\n                <select id="SC_winsay_cp_editor__Block-List-LightUpLineMode"\n                  class="b3-select fn__flex-center fn__size200">\n                  <option value="1">分体式</option>\n                  <option value="2">总控式</option>\n                  <option value="3">常亮式</option>\n                  <option value="4">寻龙式</option>\n                </select>\n              </label>\n              <label class="fn__flex b3-label">\n                <div class="fn__flex-1">\n                  面包屑自适应\n                  <div class="b3-label__text"></div>\n                </div>\n                <span class="fn__space"></span>\n                <input class="b3-switch fn__flex-center" id="SC_winsay_cp_editor__BreadcrumbsMode-Adaptive"\n                  type="checkbox">\n              </label>\n              <label class="fn__flex b3-label">\n                <div class="fn__flex-1">\n                  图片底色增强模式\n                  <div class="b3-label__text">针对透明图层设计</div>\n                </div>\n                <span class="fn__space"></span>\n                <select id="SC_winsay_cp_editor__img-bg-color" class="b3-select fn__flex-center fn__size200">\n                  <option value="transparent">无底色</option>\n                  <option value="#fff">纯白</option>\n                  <option value="#000">纯黑</option>\n                  <option value="var(--SCC-CNTC-ChaBai)">茶白</option>\n                  <option value="var(--SCC-SGTC-6B)">SGTC-6B</option>\n                  <option value="var(--SCC-SGTC-9B)">SGTC-9B</option>\n                  <option value="var(--SCC-SGTC-30B)">SGTC-30B</option>\n                  <option value="var(--b3-theme-surface-lighter)">跟随主题形态（淡雅）</option>\n                  <option value="var(--b3-theme-primary-light)">跟随主题形态（靓丽）</option>\n                </select>\n              </label>\n              <label class="fn__flex b3-label">\n                <div class="fn__flex-1">\n                  图片底色增强模式常显\n                  <div class="b3-label__text">关闭后需要鼠标聚焦才生效</div>\n                </div>\n                <span class="fn__space"></span>\n                <input class="b3-switch fn__flex-center" id="SC_winsay_cp_editor__img-bg-color_always" type="checkbox">\n              </label>\n              <label class="fn__flex b3-label SC_ableC__Android_mobile">\n                <div class="fn__flex-1">\n                  表格块最小宽度\n                  <div class="b3-label__text">对处于滚屏态的表格无效</div>\n                </div>\n                <span class="fn__space"></span>\n                <select id="SC_winsay_cp_editor__BlockTable_MinWidth" class="b3-select fn__flex-center fn__size200">\n                  <option value="unset">不限制</option>\n                  <option value="58%">58%</option>\n                  <option value="88%">88%</option>\n                  <option value="100%">100%</option>\n                </select>\n              </label>\n              <label class="fn__flex b3-label SC_ableC__Android_mobile">\n                <div class="fn__flex-1">\n                  表格块最大宽度\n                  <div class="b3-label__text">对处于滚屏态的表格无效</div>\n                </div>\n                <span class="fn__space"></span>\n                <select id="SC_winsay_cp_editor__BlockTable_MaxWidth" class="b3-select fn__flex-center fn__size200">\n                  <option value="unset">不限制</option>\n                  <option value="88%">88%</option>\n                  <option value="100%">100%</option>\n                  <option value="186%">186%</option>\n                </select>\n              </label>\n              <label class="fn__flex b3-label SC_ableC__Android_mobile">\n                <div class="fn__flex-1">\n                  表格文字大小\n                  <div class="b3-label__text"></div>\n                </div>\n                <span class="fn__space"></span>\n                <select id="SC_winsay_cp_editor__BlockTable_FontSize" class="b3-select fn__flex-center fn__size200">\n                  <option value="unset">超大</option>\n                  <option value="92%">大</option>\n                  <option value="88%">中</option>\n                  <option value="82%">小</option>\n                  <option value="72%">超小</option>\n                </select>\n              </label>\n              <label class="fn__flex b3-label SC_ableC__Android_mobile">\n                <div class="fn__flex-1">\n                  表格文字对齐\n                  <div class="b3-label__text"></div>\n                </div>\n                <span class="fn__space"></span>\n                <select id="SC_winsay_cp_editor__BlockTable_TextAlign" class="b3-select fn__flex-center fn__size200">\n                  <option value="left">左侧对齐</option>\n                  <option value="right">右侧对齐</option>\n                  <option value="center">居中对齐</option>\n                </select>\n              </label>\n              <label class="fn__flex b3-label SC_ableC__Android_mobile">\n                <div class="fn__flex-1">\n                  表格居中显示\n                  <div class="b3-label__text">对处于滚屏态的表格无效</div>\n                </div>\n                <span class="fn__space"></span>\n                <input class="b3-switch fn__flex-center" id="SC_winsay_cp_editor__BlockTable_Margin" type="checkbox">\n              </label>\n              <label class="fn__flex b3-label">\n                <div class="fn__flex-1">\n                  引用弹出层钉住辅助感知\n                  <div class="b3-label__text"></div>\n                </div>\n                <span class="fn__space"></span>\n                <select id="SC_winsay_cp_editor__block__popover--open__PinSense"\n                  class="b3-select fn__flex-center fn__size200">\n                  <option value="">关闭</option>\n                  <option value="1">弱水之隔</option>\n                  <option value="2">光怪陆离</option>\n                </select>\n              </label>\n              <label class="fn__flex b3-label SC_ableC__Android_mobile">\n                <div class="fn__flex-1">\n                  文档选区工具条位置\n                  <div class="b3-label__text">注意：非默认选项会造成一些副作用</div>\n                </div>\n                <span class="fn__space"></span>\n                <select id="SC_winsay_cp_editor__layout-center_protyle-toolbar_position"\n                  class="b3-select fn__flex-center fn__size200">\n                  <option value="">默认</option>\n                  <option value="layout-center__protyle-toolbar-flexwrap.css">跟随选区（多行）</option>\n                  <option value="layout-center__protyle-toolbar-GOTOTOP.css">置顶</option>\n                  <option value="layout-center__protyle-toolbar-GOTOBOTTOM.css">置底</option>\n                </select>\n              </label>\n              <label class="fn__flex b3-label SC_ableOnlyU__N">\n                <div class="fn__flex-1">\n                  文档属性缩放\n                  <div class="b3-label__text">只会影响文档内右上角的属性显示。登录用户权益</div>\n                </div>\n                <span class="fn__space"></span>\n                <select id="SC_winsay_cp_editor__protyle-attr-scale" class="b3-select fn__flex-center fn__size200">\n                  <option value="1">默认</option>\n                  <option value="0">隐藏</option>\n                  <option value="1.31">大</option>\n                  <option value="2">特大</option>\n                </select>\n              </label>\n              <label class="fn__flex b3-label SC_ableOnlyC__Android_mobile">\n                <div class="fn__flex-1">\n                    动态加载块数\n                    <div class="b3-label__text">该值包含了子块数。如果需要渲染的代码块、公式块或图表块较多，建议不要设置过大</div>\n                </div>\n                <span class="fn__space"></span>\n                <input class="b3-text-field fn__flex-center fn__size200" id="SC_winsay_cp_editor__dynamicLoadBlocks" type="number" min="48" max="1024" value="58">\n            </label>\n            </div>\n\n            \x3c!-- 【外观】配置项 --\x3e\n            <div id="sc-custom-container-appearance" class="sc-tab-container" data-name="appearance">\n              <label class="fn__flex b3-label">\n                <div class="fn__flex-1">\n                  开启自动翻译\n                  <div class="b3-label__text">注意：需要联网。开启后会自动翻译整个网页（会破坏文档显示效果），因此会暂时隐藏主界面，关闭或重启即可恢复。</div>\n                </div>\n                <span class="fn__space"></span>\n                <input class="b3-switch fn__flex-center" id="NoSync__SC_winsay_cp_appearance__AutoTranslate" type="checkbox">\n              </label>\n              <label class="fn__flex b3-label" id="NoSync__SC_winsay_cp_appearance__AutoTranslate_label">\n                <div class="fn__flex-1">\n                  自动翻译目标语言\n                  <div class="b3-label__text">翻译结果仅供参考</div>\n                </div>\n                <span class="fn__space"></span>\n                <div id="translate">\n                  <div class="skiptranslate">\n                    <div id=":0.targetLanguage"></div>\n                  </div>\n                </div>\n              </label>\n              <label class="fn__flex b3-label">\n                <div class="fn__flex-1">\n                  顶栏自动隐藏\n                  <div class="b3-label__text">仅Windows端有效</div>\n                </div>\n                <span class="fn__space"></span>\n                <input class="b3-switch fn__flex-center" id="SC_winsay_cp_appearance__ToolBarMode" type="checkbox">\n              </label>\n              <label class="fn__flex b3-label">\n                <div class="fn__flex-1">\n                  顶栏高度\n                  <div class="b3-label__text"></div>\n                </div>\n                <span class="fn__space"></span>\n                <select id="SC_winsay_cp_appearance__ToolBarMode__height" class="b3-select fn__flex-center fn__size200">\n                  <option value="26px">低</option>\n                  <option value="31px">中</option>\n                  <option value="37px">高</option>\n                </select>\n              </label>\n              <label class="fn__flex b3-label">\n                <div class="fn__flex-1">\n                  顶栏失去焦点时的背景颜色\n                  <div class="b3-label__text"></div>\n                </div>\n                <span class="fn__space"></span>\n                <select id="SC_winsay_cp_appearance__ToolBarMode__NotFocus__bgColor"\n                  class="b3-select fn__flex-center fn__size200">\n                  <option value="var(--b3-theme-surface-lighter)">默认</option>\n                  <option value="var(--b3-theme-background-light)">透明</option>\n                  <option value="var(--SCC-primary-lightest)">经典</option>\n                </select>\n              </label>\n              <div class="b3-label">\n                配置非聚焦时隐藏的顶栏元素\n                <div class="config-query-2cols">\n                  <label class="fn__flex">\n                    <div class="fn__flex-1 b3-label__text">\n                      文档名\n                    </div>\n                    <span class="fn__space"></span>\n                    <input class="b3-switch fn__flex-center"\n                      id="SC_winsay_cp_appearance__ToolBarMode__HideList__docName" type="checkbox">\n                  </label>\n                  <label class="fn__flex">\n                    <div class="fn__flex-1 b3-label__text">\n                      VIP功能图标\n                    </div>\n                    <span class="fn__space"></span>\n                    <input class="b3-switch fn__flex-center" id="SC_winsay_cp_appearance__ToolBarMode__HideList__VIP"\n                      type="checkbox">\n                  </label>\n                  <label class="fn__flex">\n                    <div class="fn__flex-1 b3-label__text">\n                      窗口三大控件\n                    </div>\n                    <span class="fn__space"></span>\n                    <input class="b3-switch fn__flex-center"\n                      id="SC_winsay_cp_appearance__ToolBarMode__HideList__windowX" type="checkbox">\n                  </label>\n                  <label class="fn__flex">\n                    <div class="fn__flex-1 b3-label__text">\n                      其他顶栏图标\n                    </div>\n                    <span class="fn__space"></span>\n                    <input class="b3-switch fn__flex-center" id="SC_winsay_cp_appearance__ToolBarMode__HideList__Other"\n                      type="checkbox">\n                  </label>\n                </div>\n              </div>\n              <label class="fn__flex b3-label">\n                <div class="fn__flex-1">\n                  dock栏底色增强显示\n                  <div class="b3-label__text"></div>\n                </div>\n                <span class="fn__space"></span>\n                <input class="b3-switch fn__flex-center" id="SC_winsay_cp_appearance__DockBgColorFilter"\n                  type="checkbox">\n              </label>\n              <label class="fn__flex b3-label SC_ableC__Android_mobile">\n                <div class="fn__flex-1">\n                  显示网页链接 icon\n                  <div class="b3-label__text"></div>\n                </div>\n                <span class="fn__space"></span>\n                <input class="b3-switch fn__flex-center" id="SC_winsay_cp_appearance__ShowWebIcon" type="checkbox"\n                  checked>\n              </label>\n              <label class="fn__flex b3-label SC_ableC__Android_mobile">\n                <div class="fn__flex-1">\n                  显示资源链接 icon\n                  <div class="b3-label__text"></div>\n                </div>\n                <span class="fn__space"></span>\n                <input class="b3-switch fn__flex-center" id="SC_winsay_cp_appearance__ShowFileIcon" type="checkbox"\n                  checked>\n              </label>\n              <label class="fn__flex b3-label SC_ableC__Android_mobile">\n                <div class="fn__flex-1">\n                  凯恩斯不透明度\n                  <div class="b3-label__text">影响 b3-dialog__container ，在手机端额外影响 side-panel 不透明程度</div>\n                </div>\n                <span class="fn__space"></span>\n                <select id="SC_winsay_cp_appearance__KeynesOpacity" class="b3-select fn__flex-center fn__size200">\n                  <option value="1">Max</option>\n                  <option value="0.96">Hight</option>\n                  <option value="0.92">Medium</option>\n                  <option value="0.88">Low</option>\n                </select>\n              </label>\n              <label class="fn__flex b3-label">\n                <div class="fn__flex-1">\n                  WND页签栏布局模式\n                  <div class="b3-label__text"></div>\n                </div>\n                <span class="fn__space"></span>\n                <select id="SC_winsay_cp_appearance__TabBarMode" class="b3-select fn__flex-center fn__size200">\n                  <option value="MI-TabBar-D.css">默认</option>\n                  <option value="MI-TabBar-V.css">垂直</option>\n                  <option value="MI-TabBar-H.css">水平</option>\n                  <option value="origin">原生</option>\n                </select>\n              </label>\n              <label class="fn__flex b3-label">\n                <div class="fn__flex-1">\n                  WND垂直页签栏自动收起\n                  <div class="b3-label__text"></div>\n                </div>\n                <span class="fn__space"></span>\n                <input class="b3-switch fn__flex-center" id="SC_winsay_cp_appearance__TabBarV_AutoFolded"\n                  type="checkbox">\n              </label>\n              <label class="fn__flex b3-label">\n                <div class="fn__flex-1">\n                  WND页签风格\n                  <div class="b3-label__text"></div>\n                </div>\n                <span class="fn__space"></span>\n                <select id="SC_winsay_cp_appearance__TabBarStyleFeel" class="b3-select fn__flex-center fn__size200">\n                  <option value="1">扁平简洁风</option>\n                  <option value="2">拟物素雅风</option>\n                  <option value="3">拟物鲜明风</option>\n                </select>\n              </label>\n              <label class="fn__flex b3-label">\n                <div class="fn__flex-1">\n                  WND页签文字晕染\n                  <div class="b3-label__text"></div>\n                </div>\n                <span class="fn__space"></span>\n                <select id="SC_winsay_cp_appearance__TabBar_item__textShadow"\n                  class="b3-select fn__flex-center fn__size200">\n                  <option value="1">无晕染</option>\n                  <option value="2">镶金</option>\n                </select>\n              </label>\n              <label class="fn__flex b3-label">\n                <div class="fn__flex-1">\n                  通用页签大小\n                  <div class="b3-label__text">不同页签栏模式表现效果不同</div>\n                </div>\n                <span class="fn__space"></span>\n                <select id="SC_winsay_cp_appearance__TabBarSize" class="b3-select fn__flex-center fn__size200">\n                  <option value="10">小杯</option>\n                  <option value="12">中杯</option>\n                  <option value="13">大杯</option>\n                  <option value="14">超大杯</option>\n                </select>\n              </label>\n              <label class="fn__flex b3-label">\n                <div class="fn__flex-1">\n                  标题编号模式\n                  <div class="b3-label__text"></div>\n                </div>\n                <span class="fn__space"></span>\n                <select disabled id="" class="b3-select fn__flex-center fn__size200">\n                  <option value=""></option>\n                  <option value=""></option>\n                  <option value=""></option>\n                </select>\n              </label>\n              <label class="fn__flex b3-label">\n                <div class="fn__flex-1">\n                  底部状态栏提示消息显示模式\n                  <div class="b3-label__text"></div>\n                </div>\n                <span class="fn__space"></span>\n                <select id="SC_winsay_cp_appearance__status_msg_opacity" class="b3-select fn__flex-center fn__size200">\n                  <option value="0.9">默认</option>\n                  <option value="0.31">淡化</option>\n                  <option value="0">隐藏</option>\n                </select>\n              </label>\n              <label class="fn__flex b3-label">\n                <div class="fn__flex-1">\n                  反链面板边界强化\n                  <div class="b3-label__text"></div>\n                </div>\n                <span class="fn__space"></span>\n                <input class="b3-switch fn__flex-center"\n                  id="SC_winsay_cp_appearance__strengthen_backlinkList_panel_border" type="checkbox" checked>\n              </label>\n              <label class="fn__flex b3-label">\n                <div class="fn__flex-1">\n                  侧边栏容器背景增强\n                  <div class="b3-label__text"></div>\n                </div>\n                <span class="fn__space"></span>\n                <input class="b3-switch fn__flex-center" id="SC_winsay_cp_appearance__strengthen_layout-tab-container"\n                  type="checkbox">\n              </label>\n              <label class="fn__flex b3-label">\n                <div class="fn__flex-1">\n                  思源设置资源界面粘性布局\n                  <div class="b3-label__text">思源设置 ->【资源】界面</div>\n                </div>\n                <span class="fn__space"></span>\n                <input class="b3-switch fn__flex-center" id="SC_winsay_cp_appearance__SYSetting-AssetsIMG-Sticky"\n                  type="checkbox">\n              </label>\n            </div>\n\n            \x3c!-- 【资源】配置项 --\x3e\n            <div id="sc-custom-container-assets" class="sc-tab-container" data-name="assets">\n              <label class="fn__flex b3-label">\n                <div class="fn__flex-1">\n                  图片制卡\n                  <div class="b3-label__text"></div>\n                </div>\n                <span class="fn__space"></span>\n                <select id="SC_winsay_cp_assets__PCards" class="b3-select fn__flex-center fn__size200">\n                  <option value="">禁用</option>\n                  <option value="PCards-1.css">Nofood Style</option>\n                </select>\n              </label>\n            </div>\n\n            \x3c!-- 【导出】配置项 --\x3e\n            <div id="sc-custom-container-export" class="sc-tab-container" data-name="export">\n              <label class="fn__flex b3-label SC_ableC__Android_mobile">\n                <div class="fn__flex-1 fn__flex-center">\n                  导出配置数据\n                  <div class="b3-label__text">将 <code class="fn__code">localStorage</code> 中的所有主题配置数据以 json\n                    文件方式导出。跨版本导出导入可能会存在冲突，请不要过渡依赖。</div>\n                </div>\n                <span class="fn__space"></span>\n                <button class="b3-button b3-button--outline fn__flex-center fn__size200" id="SC__exportData"><svg>\n                    <use xlink:href="#iconUpload"></use>\n                  </svg>导出</button>\n                <a href="#" id="SC__exportData_a"></a>\n              </label>\n              <label class="fn__flex b3-label SC_ableC__Android_mobile">\n                <div class="fn__flex-1 fn__flex-center">\n                  导入配置数据\n                  <div class="b3-label__text">将导出的 json 文件数据导入，覆盖 <code class="fn__code">localStorage</code>\n                    已有主题配置数据。跨版本导出导入可能会存在冲突，请不要过渡依赖。\n                  </div>\n                </div>\n                <span class="fn__space"></span>\n                <button id="SC__importData" class="b3-button b3-button--outline fn__flex-center fn__size200"\n                  style="position: relative">\n                  <input id="SC__importData_i" class="b3-form__upload" type="file">\n                  <svg>\n                    <use xlink:href="#iconDownload"></use>\n                  </svg>导入\n                </button>\n              </label>\n              <div class="b3-label SC_ableC__Android_mobile">\n                导出配置附加项\n                <div class="b3-label__text">目前还不支持导入\n                </div>\n                <div class="config-query-2cols">\n                  <label class="fn__flex">\n                    <div class="fn__flex-1 b3-label__text">\n                      思源编辑器配置\n                    </div>\n                    <span class="fn__space"></span>\n                    <input class="b3-switch fn__flex-center" id="SC_winsay_cp__exportData__EXT_sy_editor"\n                      type="checkbox">\n                  </label>\n                  <label class="fn__flex">\n                    <div class="fn__flex-1 b3-label__text">\n                      思源快捷键配置\n                    </div>\n                    <span class="fn__space"></span>\n                    <input class="b3-switch fn__flex-center" id="SC_winsay_cp__exportData__EXT_sy_keymap"\n                      type="checkbox">\n                  </label>\n                  <label class="fn__flex">\n                    <div class="fn__flex-1 b3-label__text">\n                      思源同步配置\n                    </div>\n                    <span class="fn__space"></span>\n                    <input class="b3-switch fn__flex-center" id="SC_winsay_cp__exportData__EXT_sy_sync"\n                      type="checkbox">\n                  </label>\n                </div>\n              </div>\n            </div>\n\n            \x3c!-- 【搜索】配置项 --\x3e\n            <div id="sc-custom-container-search" class="sc-tab-container SC_disableC__Android_mobile" data-name="search">\n              <label class="fn__flex b3-label">\n                <div class="fn__flex-1">\n                  搜索面板标号\n                  <div class="b3-label__text"></div>\n                </div>\n                <span class="fn__space"></span>\n                <input class="b3-switch fn__flex-center" id="SC_winsay_cp_search__index" type="checkbox">\n              </label>\n              <label class="fn__flex b3-label">\n                <div class="fn__flex-1">\n                  禁用搜索建议\n                  <div class="b3-label__text"></div>\n                </div>\n                <span class="fn__space"></span>\n                <input class="b3-switch fn__flex-center" id="SC_winsay_cp_search__disable_tips" type="checkbox">\n              </label>\n              <label class="fn__flex b3-label">\n                <div class="fn__flex-1">\n                  结果列表展示模式\n                  <div class="b3-label__text"></div>\n                </div>\n                <span class="fn__space"></span>\n                <select id="SC_winsay_cp_search__layout" class="b3-select fn__flex-center fn__size200">\n                  <option value="">默认布局</option>\n                  <option value="layout-Auto.css">智能布局模式（不支持在搜索界面更改方向）</option>\n                  <option value="layout-LR1.css">左右紧凑布局（不支持在搜索界面更改方向）</option>\n                  <option value="layout-LR2.css">左右双行布局（不支持在搜索界面更改方向）</option>\n                  <option value="layout-TB1.css">上下紧凑布局</option>\n                  <option value="layout-TB2.css">上下双行布局</option>\n                </select>\n              </label>\n            </div>\n\n            \x3c!-- 【系统】配置项 --\x3e\n            <div id="sc-custom-container-system" class="sc-tab-container" data-name="system">\n              <label class="b3-label fn__flex SC_ableC__Android_mobile">\n                <div class="fn__flex-1">\n                  清理主题本地存储空间数据\n                  <div class="b3-label__text">删除主题并不会释放主题存放在 localStorage 的数据</div>\n                </div>\n                <span class="fn__space"></span>\n                <button class="b3-button b3-button--outline fn__flex-center fn__size200"\n                  id="SC_winsay_cp_system__ClearlocalStorage">\n                  <svg>\n                    <use xlink:href="#iconClose"></use>\n                  </svg>清空\n                </button>\n              </label>\n              <label class="b3-label fn__flex SC_ableC__Android_mobile">\n                <div class="fn__flex-1">\n                  重置所有个性化配置\n                  <div class="b3-label__text">所有自定义配置都会恢复到缺省值</div>\n                </div>\n                <span class="fn__space"></span>\n                <button class="b3-button b3-button--outline fn__flex-center fn__size200"\n                  id="SC_winsay_cp_system__ResetAllSettings">\n                  <svg>\n                    <use xlink:href="#iconUndo"></use>\n                  </svg>重置\n                </button>\n              </label>\n              <label class="b3-label fn__flex SC_ableC__Android_mobile">\n                <div class="fn__flex-1">\n                  刷新页面\n                  <div class="b3-label__text">平平无奇的圆圆圈圈</div>\n                </div>\n                <span class="fn__space"></span>\n                <button class="b3-button b3-button--outline fn__flex-center fn__size200"\n                  id="SC_winsay_cp_system__Refresh">\n                  <svg>\n                    <use xlink:href="#iconRefresh"></use>\n                  </svg>刷新\n                </button>\n              </label>\n              <label class="b3-label fn__flex SC_ableC__Android_mobile">\n                <div class="fn__flex-1">\n                  调试信息\n                  <div class="b3-label__text">🚧🚧🚧🚧🚧🚧</div>\n                </div>\n                <span class="fn__space"></span>\n                <button class="b3-button b3-button--outline fn__flex-center fn__size200"\n                  id="SC_winsay_cp_system__ShowDebugInfo">\n                  <svg>\n                    <use xlink:href="#iconFormat"></use>\n                  </svg>显示\n                </button>\n              </label>\n              <label class="fn__flex b3-label">\n                <div class="fn__flex-1">\n                  主题自我保护\n                  <div class="b3-label__text"></div>\n                </div>\n                <span class="fn__space"></span>\n                <input class="b3-switch fn__flex-center" id="SC_winsay_cp_system__SelfProtection" type="checkbox">\n              </label>\n              <label class="fn__flex b3-label SC_ableOnlyC__Android_mobile">\n                <div class="fn__flex-1">\n                  禁用悬浮球\n                  <div class="b3-label__text">Sofill-MobileBall 为安卓手机端专属，如果你希望支持安卓 pad 端请提 <a href="https://github.com/Hi-Windom/winsay/issues">issue</a></div>\n                </div>\n                <span class="fn__space"></span>\n                <input class="b3-switch fn__flex-center" id="SC_winsay_cp_system__Ball" type="checkbox">\n              </label>\n            </div>\n\n            \x3c!-- 【个性化】配置项 --\x3e\n            <div id="sc-custom-container-custom" class="sc-tab-container" data-name="custom">\n              <label class="fn__flex b3-label SC_ableC__Android_mobile">\n                <div class="fn__flex-1">\n                  明亮模式全局滤镜\n                  <div class="b3-label__text">不需要的时候别忘了关闭喔</div>\n                </div>\n                <span class="fn__space"></span>\n                <select id="SC_winsay_cp_custom__root_filter_light" class="b3-select fn__flex-center fn__size200">\n                  <option value="none">无</option>\n                  <option value="1">真彩显示</option>\n                  <option value="2">鲜艳模式</option>\n                  <option value="3">黑白显示</option>\n                  <option value="4">夜间模式</option>\n                  <option value="5">深夜模式（关灯）</option>\n                </select>\n              </label>\n              <label class="fn__flex b3-label SC_ableC__Android_mobile">\n                <div class="fn__flex-1">\n                  暗黑模式全局滤镜\n                  <div class="b3-label__text">不需要的时候别忘了关闭喔</div>\n                </div>\n                <span class="fn__space"></span>\n                <select id="SC_winsay_cp_custom__root_filter_dark" class="b3-select fn__flex-center fn__size200">\n                  <option value="none">无</option>\n                  <option value="1">真彩显示</option>\n                  <option value="2">鲜艳模式</option>\n                  <option value="3">黑白显示</option>\n                  <option value="4">夜间模式</option>\n                  <option value="5">反色显示</option>\n                </select>\n              </label>\n              <label class="fn__flex b3-label SC_ableC__Android_mobile">\n                <div class="fn__flex-1">\n                  滤镜定时开关\n                  <div class="b3-label__text">自动识别明暗模式。目前固定 18:00-6:00 时间段开启，后续版本支持自定义开启和关闭时间。</div>\n                </div>\n                <span class="fn__space"></span>\n                <input class="b3-switch fn__flex-center" id="SC_winsay_cp_custom__filter_timer" type="checkbox">\n              </label>\n              <label class="fn__flex b3-label">\n                <div class="fn__flex-1">\n                  性能模式\n                  <div class="b3-label__text">减少动效以提升性能</div>\n                </div>\n                <span class="fn__space"></span>\n                <input disabled class="b3-switch fn__flex-center" id="" type="checkbox">\n              </label>\n              <label class="fn__flex b3-label">\n                <div class="fn__flex-1">\n                  突破思源最大页签打开数限制\n                  <div class="b3-label__text">注意：仅用于临时需求，重载后会关闭额外打开的页签</div>\n                </div>\n                <span class="fn__space"></span>\n                <select id="SC_winsay_cp_custom__EXTmaxOpenTabCount" class="b3-select fn__flex-center fn__size200">\n                  <option value="">关闭</option>\n                  <option value="58">扩容至58</option>\n                  <option value="82">扩容至82</option>\n                </select>\n              </label>\n              <label class="fn__flex b3-label">\n                <div class="fn__flex-1">\n                  导出PDF形态\n                  <div class="b3-label__text">只影响导出PDF效果，如果不生效可尝试重新加载</div>\n                </div>\n                <span class="fn__space"></span>\n                <select id="SC_winsay_cp_custom__defaultS" class="b3-select fn__flex-center fn__size200">\n                  <option value="">跟随明亮模式形态</option>\n                  <option value="preview.css">绝绝紫</option>\n                  <option value="preview-L-Blue.css">纯洁蓝</option>\n                  <option value="preview-L-Red.css">文中红</option>\n                  <option value="preview-L-Pink.css">砰砰粉</option>\n                  <option value="preview-L-Green.css">青葱绿</option>\n                  <option value="preview-L-Yellow.css">智慧金</option>\n                </select>\n              </label>\n              <label class="fn__flex b3-label SC_ableC__Android_mobile">\n                <div class="fn__flex-1">\n                  主题明亮模式形态\n                  <div class="b3-label__text"></div>\n                </div>\n                <span class="fn__space"></span>\n                <select id="SC_winsay_cp_custom__LS" class="b3-select fn__flex-center fn__size200">\n                  <option value="root.css">绝绝紫</option>\n                  <option value="root-L-Blue.css">纯洁蓝</option>\n                  <option value="root-L-Red.css">文中红</option>\n                  <option value="root-L-Pink.css">砰砰粉</option>\n                  <option value="root-L-Green.css">青葱绿</option>\n                  <option value="root-L-Yellow.css">智慧金</option>\n                </select>\n              </label>\n              <label class="fn__flex b3-label SC_ableC__Android_mobile">\n                <div class="fn__flex-1">\n                  主题暗黑模式形态\n                  <div class="b3-label__text"></div>\n                </div>\n                <span class="fn__space"></span>\n                <select id="SC_winsay_cp_custom__DS" class="b3-select fn__flex-center fn__size200">\n                  <option value="root-D-BlackGoldBlue.css">黑金蓝</option>\n                  <option value="root-D-InkGreenPurple.css">墨绿紫</option>\n                </select>\n              </label>\n            </div>\n\n            \x3c!-- 【扩展】配置项 --\x3e\n            <div id="sc-custom-container-extension" class="sc-tab-container" data-name="extension" style="overflow-x: hidden;">\n              <div class="sc-custom-placeholder">敬请期待</div>\n            </div>\n\n            \x3c!-- 【文档树】配置项 --\x3e\n            <div id="sc-custom-container-filetree" class="sc-tab-container" data-name="filetree">\n              <label class="fn__flex b3-label SC_ableC__Android_mobile">\n                <div class="fn__flex-1">\n                  文档树自适应显示\n                  <div class="b3-label__text">笔记本间距自适应+字号自适应+多层级自适应+粘性布局。注意：开启后隐藏一些选项。</div>\n                </div>\n                <span class="fn__space"></span>\n                <input class="b3-switch fn__flex-center" id="SC_winsay_cp_filetree__Adaptive_display" type="checkbox"\n                  checked>\n              </label>\n              <div class="SC_cp_BP SC_ableC__Android_mobile" id="BP__SC_winsay_cp_filetree__Adaptive_display">\n                <label class="fn__flex b3-label">\n                  <div class="fn__flex-1">\n                    笔记本名字号\n                    <div class="b3-label__text">单位 pt</div>\n                  </div>\n                  <span class="fn__space"></span>\n                  <div class="b3-tooltips b3-tooltips__n fn__flex-center" aria-label="10"\n                    id="SC_winsay_cp_filetree__nbFontsize__label">\n                    <input class="b3-slider fn__size200" id="SC_winsay_cp_filetree__nbFontsize" max="16" min="10"\n                      step="0.2" type="range" value="10">\n                  </div>\n                </label>\n                <label class="fn__flex b3-label">\n                  <div class="fn__flex-1">\n                    文档名字号\n                    <div class="b3-label__text">单位 pt</div>\n                  </div>\n                  <span class="fn__space"></span>\n                  <div class="b3-tooltips b3-tooltips__n fn__flex-center" aria-label="9"\n                    id="SC_winsay_cp_filetree__docFontsize__label">\n                    <input class="b3-slider fn__size200" id="SC_winsay_cp_filetree__docFontsize" max="13" min="8.5"\n                      step="0.1" type="range" value="9">\n                  </div>\n                </label>\n                <label class="fn__flex b3-label SC_disableC__Android">\n                  <div class="fn__flex-1">\n                    笔记本间距\n                    <div class="b3-label__text">单位 em</div>\n                  </div>\n                  <span class="fn__space"></span>\n                  <div class="b3-tooltips b3-tooltips__n fn__flex-center" aria-label="0"\n                    id="SC_winsay_cp_filetree__nbMargin__label">\n                    <input class="b3-slider fn__size200" id="SC_winsay_cp_filetree__nbMargin" max="1" min="0"\n                      step="0.02" type="range" value="0">\n                  </div>\n                </label>\n              </div>\n              <label class="fn__flex b3-label SC_ableC__Android_mobile">\n                <div class="fn__flex-1">\n                  隐藏 Untitle 文档名\n                  <div class="b3-label__text"></div>\n                </div>\n                <span class="fn__space"></span>\n                <input class="b3-switch fn__flex-center" id="SC_winsay_cp_filetree__Hide_untitle" type="checkbox"\n                  checked>\n              </label>\n              <label class="fn__flex b3-label">\n                <div class="fn__flex-1">\n                  隐藏 【更多】 控件\n                  <div class="b3-label__text">仍可通过鼠标右键呼出更多菜单</div>\n                </div>\n                <span class="fn__space"></span>\n                <input class="b3-switch fn__flex-center" id="SC_winsay_cp_filetree__Hide_item_action_more"\n                  type="checkbox">\n              </label>\n              <label class="fn__flex b3-label SC_ableC__Android_mobile">\n                <div class="fn__flex-1">\n                  隐藏文档树非顶级文档图标\n                  <div class="b3-label__text"></div>\n                </div>\n                <span class="fn__space"></span>\n                <input class="b3-switch fn__flex-center" id="SC_winsay_cp_filetree__HideSomeIcon2SeeSee"\n                  type="checkbox">\n              </label>\n              <label class="fn__flex b3-label">\n                <div class="fn__flex-1">\n                  禁用文档树修改图标\n                  <div class="b3-label__text"></div>\n                </div>\n                <span class="fn__space"></span>\n                <input class="b3-switch fn__flex-center" id="SC_winsay_cp_filetree__ChangeIconAvailability"\n                  type="checkbox">\n              </label>\n              <label class="fn__flex b3-label SC_ableC__Android_mobile">\n                <div class="fn__flex-1">\n                  禁用文档树笔记本名和文档名染色\n                  <div class="b3-label__text"></div>\n                </div>\n                <span class="fn__space"></span>\n                <input class="b3-switch fn__flex-center" id="SC_winsay_cp_filetree__DyeingNameAvailability"\n                  type="checkbox">\n              </label>\n            </div>\n            <div id="sc-custom-container-eHiWindom" class="sc-tab-container" data-name="eHiWindom">\n              <div class="sc-custom-placeholder">敬请期待</div>\n            </div>\n\n            \x3c!-- 【关于】配置项 --\x3e\n            <div id="sc-custom-container-about" class="sc-tab-container" data-name="about">\n              <div class="b3-label">\n                <div class="fn__hr"></div>\n                2022.10.14-现在 • Hi-Windom（海文东）<a style="margin-left: 13px;" href="https://github.com/Hi-Windom/Sofill/blob/main/OSD.md">开源软件声明</a>\n                <div class="fn__hr"></div>\n                <div class="fn__hr"></div>\n                <div class="ft__on-surface">Sofill 系列主题的核心开发者是 <a href="https://ld246.com/member/soltus"\n                    target="_blank">Soltus</a>\n                </div>\n              </div>\n              <div style="width:100%;"><img id="sofill_preview" src=""\n                  style="width:min(26%,580px)">\n              </div>\n              <label class="fn__flex b3-label">\n                <div class="fn__flex-1" id="SC_winsay_cp_version">\n                </div>\n                <div class="fn__space"></div>\n                <div class="fn__flex-center fn__size200">\n                  <button id="SC_winsay_cp__checkUpdateBtn" class="b3-button b3-button--outline fn__size200">\n                    <svg>\n                      <use xlink:href="#iconRefresh"></use>\n                    </svg>检查更新\n                  </button>\n                </div>\n              </label>\n              <label class="fn__flex b3-label">\n                <div class="fn__flex-1">\n                  自检源\n                  <div class="b3-label__text">Github 源可获取最新版本</div>\n                </div>\n                <span class="fn__space"></span>\n                <select id="SC_winsay_cp_about__checkAPI" class="b3-select fn__flex-center fn__size200">\n                  <option value="Bazaar">思源集市</option>\n                  <option value="Github">Github</option>\n                </select>\n              </label>\n              <label class="fn__flex b3-label">\n                <div class="fn__flex-1">\n                  自动检查更新\n                  <div class="b3-label__text"></div>\n                </div>\n                <span class="fn__space"></span>\n                <select id="SC_winsay_cp_about__checkTime" class="b3-select fn__flex-center fn__size200">\n                  <option value="">禁用</option>\n                  <option value="Once">启动时检查</option>\n                </select>\n              </label>\n              <label class="fn__flex b3-label">\n                <div class="fn__flex-1">\n                  自动检查更新静默模式\n                  <div class="b3-label__text">无可用更新时免通知打扰，同时适当延迟启动时检查时间。</div>\n                </div>\n                <span class="fn__space"></span>\n                <input class="b3-switch fn__flex-center" id="SC_winsay_cp_about__AutoCheckSilently"\n                  type="checkbox">\n              </label>\n              <label class="fn__flex b3-label">\n                <div class="fn__flex-1">\n                  自动检查更新忽略小版本\n                  <div class="b3-label__text">例如当前版本号1.4.1，那么1.4.x均不会提示更新，直到1.5才会提醒。该选项不影响手动检查更新，且不支持思源集市自检源。</div>\n                </div>\n                <span class="fn__space"></span>\n                <input class="b3-switch fn__flex-center" id="SC_winsay_cp_about__AutoCheckIgnoreSVN"\n                  type="checkbox">\n              </label>\n              <label class="fn__flex b3-label SC_ableOnlyC__Android_mobile">\n                <div class="fn__flex-1">\n                  集市有更新时为我打开更新界面\n                  <div class="b3-label__text">使用默认浏览器打开伺服网页进行更新（手机端）。注意：（1）部分浏览器可能会无效；（2）浏览器伺服手机页面无效（直接把地址栏中的 mobile 替换为 desktop 然后刷新即可安装）；（3）功能做好了，但是暂时用不了，会提示因网络问题更新失败，这个是思源的问题，同时思源还存在切换到后台内核断开的问题。</div>\n                </div>\n                <span class="fn__space"></span>\n                <input class="b3-switch fn__flex-center" id="SC_winsay_cp_about__AutoToUpdateMobile"\n                  type="checkbox">\n              </label>\n              <label class="fn__flex b3-label">\n                <div class="fn__flex-1">\n                  检查更新范围\n                  <div class="b3-label__text"></div>\n                </div>\n                <span class="fn__space"></span>\n                <select disabled id="" class="b3-select fn__flex-center fn__size200">\n                  <option value="">仅自检</option>\n                  <option value="Once">自检+已安装挂件</option>\n                  <option value="Interval">已安装主题</option>\n                </select>\n              </label>\n            </div>\n\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'}addEleEvent(){this.divEles.querySelector(".SCC-dialog").addEventListener("click",(e=>{const n=e.target.classList;(n.contains("SCC-close")||n.contains("b3-dialog__scrim"))&&this.close(),(n.contains("SCC-default")||n.contains("b3-button--cancel"))&&(this.opts.cancel(),this.close())}))}}async function Ae(e){return new Promise((function(n){var t=new XMLHttpRequest;t.open("POST","http://127.0.0.1:6806/api/file/getFile",!0),t.setRequestHeader("Content-type","application/json");var a={path:`/conf/appearance/themes/${e}/theme.json`};t.send(JSON.stringify(a)),t.onreadystatechange=()=>{if(4===t.readyState&&200===t.status){var e=t.responseText;n(JSON.parse(e))}}})).then((async function(n){window.winsay.localVersion.useGithub=n.version,window.winsay.localVersion.useBazaar=window.siyuan.config.appearance.themeVer,window.winsay.localVersion.version=await De(),window.winsay.localVersion.vinfoHTML=`当前版本 v<span>${window.winsay.localVersion.version}</span>\n    <div class="b3-label__text"><a href="https://gitee.com/soltus/Sofill/blob/main/CHANGELOG/winsay.md" target="_blank">浏览更新历史</a></div>`,setTimeout((()=>{document.getElementById("sc-custom-container-placehold").children[0].innerHTML=`${e} v${window.winsay.localVersion.version} CP`,document.getElementById("SC_winsay_cp_version").innerHTML=window.winsay.localVersion.vinfoHTML}),100)}))}async function Le(e=!1){let n=await H("SC_winsay_cp_about__checkAPI"),i=await De();if("Github"===n)await async function(e,n){await Z(window.location.host,{}),await ee(window.location.host,{}),new Promise((function(e){var n=`https://api.github.com/repos/Hi-Windom/${a}/releases/latest`,t=new XMLHttpRequest;t.open("GET",n,!0),t.setRequestHeader("Content-type","application/json"),t.send(null),t.onreadystatechange=()=>{if(4===t.readyState&&200===t.status){var n=t.responseText;e(JSON.parse(n))}}})).then((async function(i){let o=i.tag_name;if("true"===await H("SC_winsay_cp_about__AutoCheckIgnoreSVN")){let n=e.split(".");n.splice(-1),e=n.join(".");let t=o.split(".");t.splice(-1),o=t.join(".")}if(1===k(o,e)){console.warn("Github 有新版本发布");let n=new Ee({isCancel:!0,dragable:!1,XML:xe,success(){console.log("点击了确定"),window.open(`https://github.com/Hi-Windom/${a}/releases/download/${o}/${t}__${o}.zip`,"_blank"),window.open(`https://github.com/Hi-Windom/${a}/releases/tag/${o}`,"_blank")},cancel(){console.log("点击了取消")},maskable:!0});await n.open((()=>{var n=/(http:\/\/|https:\/\/)((\w|=|\?|\.|\/|&|-)+)/g,t=i.body.replace(n,"<a href='$1$2'>$1$2</a>");document.getElementById("UpdateInfo").innerHTML=`${e} > ${o}<br><span class="fn__space"></span><div class="p" style="max-height: 250px;white-space: break-spaces;word-break: break-all;overflow: scroll;">${t}</div>`,document.getElementById("CoverWarming").innerHTML="下载链接能否访问取决于你的网络"})),await he.setItem("SC_winsay_latest_checked_version",o)}else!1===n&&re("真棒👍，主题已是最新版",800)}))}(i,e);else await async function(e,n){let t=await Z(window.location.host,{}),a={};t.data.packages.forEach((e=>{"Sofill-"===e.name&&(a=e)})),1===k(a.version,e)?(console.warn("集市有新版本发布"),await he.setItem("SC_winsay_latest_checked_version",a.version),re(`集市有新版本发布：<br>${e} => ${a.version}<br> `),async function(e){if(document.body.classList.contains("body--mobile")&&!document.body.classList.contains("client--browser"))setTimeout((async()=>{"true"===await H("SC_winsay_cp_about__AutoToUpdateMobile")&&window.open(`http://0.0.0.0:6806/stage/build/desktop/?action=next&name=update-winsay&args=${encodeURIComponent(window.siyuan.config.localIPs[0]+":6806")}`,"_blank")}),500);else{document.querySelector("#toolbar #barSetting").click(),document.querySelector('.b3-tab-bar:not(.sc-custom-nav) [data-name="bazaar"]').click(),setTimeout((()=>{document.querySelector(`#configBazaarTheme [class="b3-card__actions"][data-name="${e}"]>[data-type="install-t"]`).click()}),1e3)}}("Sofill-")):!1===n&&re("真棒👍，主题已是最新版",800)}(i,e)}async function De(){return"Bazaar"===await H("SC_winsay_cp_about__checkAPI")?window.winsay.localVersion.useBazaar:window.winsay.localVersion.useGithub}async function Me(){var e=null;ve()&&(e=require("fs"),require("path")),document.getElementById("SC_winsay_cp_system__ClearlocalStorage").addEventListener("click",(async()=>{new Ee({isCancel:!0,dragable:!1,XML:ge,success(){console.log("点击了确定");var e=0;he.length().then((n=>{for(var t=0;t<n;t++)he.key(t).then((n=>{(n.startsWith("winsay_")||n.startsWith("SC_winsay_"))&&(he.removeItem(n),console.log(`${n} removed`),e++)}))})),re(`已清理 ${e} 项<br>页面即将刷新`),setTimeout((()=>{window.location.reload()}),3e3)},cancel(){console.log("点击了取消")},maskable:!0}).open()})),document.getElementById("SC_winsay_cp_system__ResetAllSettings").addEventListener("click",(async()=>{new Ee({isCancel:!0,dragable:!1,XML:Se,success(){console.log("点击了确定");var e=0;he.length().then((n=>{for(var t=0;t<n;t++)he.key(t).then((n=>{n.startsWith("SC_winsay_cp")&&(he.removeItem(n),console.log(`${n} removed`),e++)}))})),re(`已重置 ${e} 项<br>页面即将刷新`),setTimeout((()=>{window.location.reload()}),3e3)},cancel(){console.log("点击了取消")},maskable:!0}).open()})),document.getElementById("SC_winsay_cp_system__Refresh").addEventListener("click",(async()=>{setTimeout((()=>{window.location.reload()}),300)})),document.getElementById("SC_winsay_cp_system__ShowDebugInfo").addEventListener("click",(async()=>{setTimeout((()=>{new Ee({isCancel:!0,dragable:!1,XML:Ie,success(){console.log("点击了确定")},cancel(){console.log("点击了取消")},maskable:!1}).open((()=>{document.getElementById("UpdateInfo").innerHTML=`\n<div style="max-height: 58vh;overflow: auto;white-space: nowrap;">\nlocalIPs  <br><code class="fn__code">${window.siyuan.config.localIPs}</code><br><br>\napi.token  <br><code class="fn__code">${window.siyuan.config.api.token}</code><br><br>\nsystem.homeDir  <br><code class="fn__code">${window.siyuan.config.system.homeDir}</code><br><br>\nsystem.workspaceDir  <br><code class="fn__code">${window.siyuan.config.system.workspaceDir}</code><br><br>\nsystem.confDir  <br><code class="fn__code">${window.siyuan.config.system.confDir}</code><br><br>\nsystem.dataDir  <br><code class="fn__code">${window.siyuan.config.system.dataDir}</code><br><br>\nappearance.darkThemes  <br><code class="fn__code">${window.siyuan.config.appearance.darkThemes}</code><br><br>\nappearance.lightThemes  <br><code class="fn__code">${window.siyuan.config.appearance.lightThemes}</code><br><br>\nappearance.mode  <br><code class="fn__code">${window.siyuan.config.appearance.mode}</code><br><br>\nappearance.themeDark  <br><code class="fn__code">${window.siyuan.config.appearance.themeDark}</code><br><br>\nappearance.themeLight  <br><code class="fn__code">${window.siyuan.config.appearance.themeLight}</code><br><br>\nappearance.themeVer  <br><code class="fn__code">${window.siyuan.config.appearance.themeVer}</code><br><br>\nappearance.blockRefTextLeft  <br><code class="fn__code">${window.siyuan.config.export.blockRefTextLeft}</code><br><br>\nappearance.blockRefTextRight  <br><code class="fn__code">${window.siyuan.config.export.blockRefTextRight}</code><br><br>\nfileTree.maxOpenTabCount（页签打开最大数量）  <br><code class="fn__code">${window.siyuan.config.fileTree.maxOpenTabCount}</code><br><br>\nsystem.fixedPort（是否固定端口）  <br><code class="fn__code">${window.siyuan.config.system.fixedPort}</code><br><br>\nappearance.hideStatusBar（修改没有效果，仅用于判断是否隐藏底部状态栏）  <br><code class="fn__code">${window.siyuan.config.appearance.hideStatusBar}</code><br><br>\nappearance.customCSS（是否开启自定义主题）  <br><code class="fn__code">${window.siyuan.config.appearance.customCSS}</code>\n</div>\n`,console.warn(window.siyuan.languages)}))}),300)})),document.getElementById("SC__exportData").addEventListener("click",(async()=>{var n=document.querySelector("#SC__exportData_a"),t=0,a=0,i={winsay:{},sy_editor:{},sy_keymap:{}};he.length().then((e=>{for(var n=0;n<e;n++)he.key(n).then((e=>{if(e.startsWith("winsay_")||e.startsWith("SC_winsay_"))try{he.getItem(e).then((n=>{i.winsay[e]=n})),a++}catch(n){console.error(`${e} is not a valid value for ${n}`),i.winsay[e]=null}finally{t++}}))}));let o=await he.getItem("SC_winsay_cp__exportData__EXT_sy_editor");i.sy_editor="true"===o?window.siyuan.config.editor:"禁用了附加这部分数据";let s=await he.getItem("SC_winsay_cp__exportData__EXT_sy_keymap");if(i.sy_keymap="true"===s?window.siyuan.config.keymap:"禁用了附加这部分数据","true"===await he.getItem("SC_winsay_cp__exportData__EXT_sy_sync")?(i.sy_sync=window.siyuan.config.sync,i.sy_repo=window.siyuan.config.repo):(i.sy_sync="禁用了附加这部分数据",i.sy_repo="禁用了附加这部分数据"),document.body.classList.contains("body--mobile")&&be())document.body.classList.contains("user--Sub")?(ae.putFile(`/data/snippets/Sofill-ConfigData__${Date.now()}.json`,JSON.stringify(i)),re(`导出 ${a}/${t}<br>【订阅用户权益生效提示】备份已保存到同步文件夹 ${window.siyuan.config.system.dataDir}/snippets/`)):re("平台受限，仅支持订阅用户导出");else{var r=new Blob([JSON.stringify(i)]);n.href=URL.createObjectURL(r),n.download="Sofill-ConfigData.json",n.click(),re(`导出 ${a}/${t}`),e&&document.body.classList.contains("user--Sub")&&e.writeFile(`${window.siyuan.config.system.dataDir}/snippets/Sofill-ConfigData__${Date.now()}.json`,JSON.stringify(i),"utf-8",(function(e){e?console.error(e):(console.log("Write successfully~~"),re(`【订阅用户权益生效提示】备份已保存到同步文件夹 ${window.siyuan.config.system.dataDir}/snippets/`))}))}})),document.getElementById("SC__importData").addEventListener("click",(async()=>{var e=document.querySelector("#SC__importData_i");e.onchange=()=>{if(""===this.value||this.files.length<1)return console.warn("Oops..."),!1;var e=0,n=0,t={},a=0,i=new FileReader;i.readAsText(this.files[0]),i.onload=async function(i){var o=i.target.result;try{o=JSON.parse(o)}catch(e){return void re(`无效数据 ${e}`,3e3)}for(var s in console.log(o),o)if(t[s]={},"winsay"===s)for(var r in o[s])e+=1,o[s][r]!==await he.getItem(r)&&(n+=1,t[s][r]=`${await he.getItem(r)} => ${o[s][r]}`);console.warn("================================ Changes Preview ================================"),console.log(t),console.warn("================================================================================");let l=new Ee({isCancel:!0,dragable:!1,XML:Ce,success(){for(var i in console.log("点击了确定"),o)if(t[i]={},"winsay"===i)for(var s in o[i])try{he.setItem(s,o[i][s]).then((e=>{a+=1,console.warn(`${s} updated`)}))}catch(e){console.error(e)}re(`导入成功 ${a}/${e}，覆盖 ${n} 项`)},cancel(){console.log("点击了取消")},maskable:!0});await l.open((()=>{document.getElementById("CoverWarming").innerHTML=`影响 ${n}/${e} 项`}))}},e.value=""})),document.getElementById("SC_winsay_cp__checkUpdateBtn").addEventListener("click",(async()=>{Le()}))}var Ne=Object.freeze({__proto__:null,CP:function(){async function e(){await async function(){await j("SC_winsay_cp_editor__block__popover--open__PinSense",(async function(e){if(T(e))g("--SCC-Variables-block__popover--open__PinSense_1","unset"),g("--SCC-Variables-block__popover--open__PinSense_2","var(--b3-dialog-shadow)");else switch(e){case"2":g("--SCC-Variables-block__popover--open__PinSense_2","var(--b3-theme-secondary) -2px -2px 5.8px 1px,var(--b3-theme-primary) 0 0 0 1px,var(--b3-theme-primary-light) 0 0 3px 1px,var(--b3-theme-primary-lighter) 0 0 13px 2px,var(--b3-theme-primary-lightest) 0 0 2px 4px"),g("--SCC-Variables-block__popover--open__PinSense_1","unset");break;case"1":g("--SCC-Variables-block__popover--open__PinSense_2","var(--b3-dialog-shadow)"),g("--SCC-Variables-block__popover--open__PinSense_1","var(--b3-theme-surface-lighter)")}})),await j("SC_winsay_cp_editor__BlockTable_MinWidth",(async function(e){T(e)?g("--SCC-Variables-BlockTable-minWidth","unset"):g("--SCC-Variables-BlockTable-minWidth",e)})),await j("SC_winsay_cp_editor__BlockTable_MaxWidth",(async function(e){T(e)?g("--SCC-Variables-BlockTable-maxWidth","unset"):g("--SCC-Variables-BlockTable-maxWidth",e)})),await j("SC_winsay_cp_editor__BlockTable_FontSize",(async function(e){T(e)?g("--SCC-Variables-BlockTable-fontSize","unset"):g("--SCC-Variables-BlockTable-fontSize",e)})),await j("SC_winsay_cp_editor__BlockTable_TextAlign",(async function(e){T(e)?g("--SCC-Variables-BlockTable-text_align","unset"):g("--SCC-Variables-BlockTable-text_align",e)})),await z(document.getElementById("SC_winsay_cp_editor__BlockTable_Margin"),(()=>{g("--SCC-Variables-BlockTable-margin","0 auto")}),(()=>{g("--SCC-Variables-BlockTable-margin","inherit")})),await j("SC_winsay_cp_editor__Block-List-LightUpLineMode",(async function(e){if(T(e))g("--SCC-Variables-BlockList__beforeColor","var(--b3-theme-surface-lighter)");else switch(e){case"1":g("--SCC-Variables-BlockList__beforeColor","var(--b3-theme-background-light)"),M("BlockListHoverALL","");break;case"2":g("--SCC-Variables-BlockList__beforeColor","var(--b3-theme-background-light)"),M("BlockListHoverALL",`${b}style/sweet/sugar/editor/Block-List-HoverALL.css`);break;case"3":g("--SCC-Variables-BlockList__beforeColor","var(--b3-scroll-color)");break;default:g("--SCC-Variables-BlockList__beforeColor","var(--b3-theme-surface-lighter)")}})),await j("SC_winsay_cp_editor__layout-center_protyle-toolbar_position",(async function(e){var n=T(e)?"":e;M("layout-center_protyle-toolbar_position",`${b}style/sweet/sugar/editor/${n}`)})),await j("SC_winsay_cp_editor__protyle-attr-scale",(async function(e){T(e)||g("--SCC-Variables-protyle-attr-scale",e)})),await j("SC_winsay_cp_editor__DocWidthMode",(async function(e){clearInterval(window.winsay.storage.It_DocWidthMode),T(e)?window.winsay.storage.SC_winsay_cp_editor__DocWidthMode__previousValue!==e&&e&&""!==e&&window.location.reload():(window.winsay.storage.SC_winsay_cp_editor__DocWidthMode__previousValue=e,window.winsay.storage.It_DocWidthMode=setInterval((()=>{var n=document.querySelectorAll("#layouts .layout__center .protyle-wysiwyg.protyle-wysiwyg--attr"),t=document.querySelectorAll("#layouts .layout__center .protyle-title.protyle-wysiwyg--attr");n.forEach((function(n){n.style.setProperty("padding",e),n.style.setProperty("margin","0 auto"),"1in 0.5in"===e?n.style.setProperty("width","800px"):"0.42in"===e||"0.41in"===e?n.style.setProperty("width","1118px"):"0.40in"===e?n.style.setProperty("width","1598px"):n.style.removeProperty("width")})),t.forEach((function(n){n.style.setProperty("margin",e)}))}),1e3))})),await j("SC_winsay_cp_editor__Doc_bgColor",(async function(e){clearInterval(window.winsay.storage.SC_winsay_cp_T__t2),T(e)?window.winsay.storage.SC_winsay_cp_editor__DocWidthMode__previousValue!==e&&e&&""!==e&&window.location.reload():window.winsay.storage.SC_winsay_cp_T__t2=setInterval((()=>{document.querySelectorAll("#layouts .layout__center .protyle-wysiwyg.protyle-wysiwyg--attr").forEach((n=>{n.style.setProperty("background-color",e)}))}),1e3)})),await j("SC_winsay_cp_editor__ListAutoIndent_mode",(async function(e){T(e)||"2"!==e?T(e)||"1"!==e?(g("--SCC-Variables-List-Item-margin","18px"),g("--SCC-Variables-List-Item-padding","16px")):(g("--SCC-Variables-List-Item-margin","max(min(18px,1cqw),8px)"),g("--SCC-Variables-List-Item-padding","min(16px,0.58cqw)")):(g("--SCC-Variables-List-Item-margin","max(min(18px,0.58em),8px)"),g("--SCC-Variables-List-Item-padding","min(16px,0.31em)"))})),await j("SC_winsay_cp_editor__img-bg-color",(async function(e){T(e)||("true"===await he.getItem("SC_winsay_cp_editor__img-bg-color_always")?(g("--SCC-Variables-IMG-bg-color_hover",e),g("--SCC-Variables-IMG-bg-color",e)):(g("--SCC-Variables-IMG-bg-color_hover",e),g("--SCC-Variables-IMG-bg-color","transparent")))})),await z(document.getElementById("SC_winsay_cp_editor__img-bg-color_always"),(async()=>{var e=await H("SC_winsay_cp_editor__img-bg-color");g("--SCC-Variables-IMG-bg-color_hover",e),g("--SCC-Variables-IMG-bg-color",e)}),(async()=>{var e=await H("SC_winsay_cp_editor__img-bg-color");g("--SCC-Variables-IMG-bg-color_hover",e),g("--SCC-Variables-IMG-bg-color","transparent")})),await z(document.getElementById("SC_winsay_cp_editor__HintHint-index"),(()=>{M("HintHint-index",`${b}style/sweet/sugar/editor/HintHint-index.css`)}),(()=>{L(`${b}style/sweet/sugar/editor/HintHint-index.css`,"css")})),await z(document.getElementById("SC_winsay_cp_editor__LH_Adaptive"),(()=>{M("LH_Adaptive",`${b}style/sweet/LH-Adaptive.css`),document.getElementById("BP__SC_winsay_cp_editor__LH_Adaptive").classList.add("fn__none")}),(()=>{L(`${b}style/sweet/LH-Adaptive.css`,"css"),document.getElementById("BP__SC_winsay_cp_editor__LH_Adaptive").classList.remove("fn__none")})),await z(document.getElementById("SC_winsay_cp_editor__BreadcrumbsMode-Adaptive"),(()=>{M("docBreadcrumb_Adaptive",`${b}style/sweet/MI-Breadcrumb-Adaptive.css`)}),(()=>{L(`${b}style/sweet/MI-Breadcrumb-Adaptive.css`,"css")})),await z(document.getElementById("SC_winsay_cp_editor__AreoBg-Filter"),(()=>{M("AreoBg-Filter",`${b}style/sweet/AreoBg-Filter.css`)}),(()=>{L(`${b}style/sweet/AreoBg-Filter.css`,"css")})),await j("SC_winsay_cp_editor__LH_Adaptive__pIndent",(async function(e){T(e)||(g("--SCC-Variables-MI-Doc-pIndent",`${A(-2,e,12)}rem`),document.getElementById("SC_winsay_cp_editor__LH_Adaptive__pIndent").value=A(-2,e,12).toString())})),await j("SC_winsay_cp_editor__dynamicLoadBlocks",(async function(e){T(e)||(window.siyuan.config.editor.dynamicLoadBlocks=A(48,e,1024),document.getElementById("SC_winsay_cp_editor__dynamicLoadBlocks").value=A(48,e,1024).toString())})),await j("SC_winsay_cp_editor__LH_Adaptive__LH",(async function(e){if(!T(e)){g("--SCC-Variables-MI-Doc-LH",`${e}`),document.getElementById("SC_winsay_cp_editor__LH_Adaptive__LH__label").setAttribute("aria-label",`${e}`),await he.setItem("SC_winsay_cp_editor__LH_Adaptive__LH__label",e);let n=document.querySelector("#SC-CP");"body--mobile"===f&&"none"!==n.style.display&&re(`新值：${e}`)}})),await j("SC_winsay_cp_editor__LH_Adaptive__marginTop",(async function(e){T(e)||(g("--SCC-Variables-MI-Doc-marginTop",A(10,e,500)/100+"rem"),document.getElementById("SC_winsay_cp_editor__LH_Adaptive__marginTop").value=A(10,e,500).toString())})),await j("SC_winsay_cp_editor__LH_Adaptive__marginBottom",(async function(e){T(e)||(g("--SCC-Variables-MI-Doc-marginBottom",A(10,e,500)/100+"rem"),document.getElementById("SC_winsay_cp_editor__LH_Adaptive__marginBottom").value=A(10,e,500).toString())})),await j("SC_winsay_cp_editor__LH_Adaptive__lSpacing",(async function(e){if(!T(e)){g("--SCC-Variables-MI-Doc-lSpacing",`${e}rem`),document.getElementById("SC_winsay_cp_editor__LH_Adaptive__lSpacing__label").setAttribute("aria-label",`${e}`),await he.setItem("SC_winsay_cp_editor__LH_Adaptive__lSpacing__label",e);let n=document.querySelector("#SC-CP");"body--mobile"===f&&"none"!==n.style.display&&re(`新值：${e}`)}})),await j("SC_winsay_cp_editor__BlockScrollBar-opacity",(async function(e){if(!T(e)){g("--SCC-Variables-MI-BlockScrollBar-opacity-hover",e);let n=document.querySelector("#editor .protyle-scroll");switch(g("--SCC-Variables-MI-BlockScrollBar-display","block"),e){case"0.88":n?M("Android-mobile-BlockScrollBarShow",`${b}style/sweet/sugar/editor/Android-mobile-BlockScrollBarFocusShow.css`):g("--SCC-Variables-MI-BlockScrollBar-opacity","0");break;case"1":n?M("Android-mobile-BlockScrollBarShow",`${b}style/sweet/sugar/editor/Android-mobile-BlockScrollBarAlwaysShow.css`):g("--SCC-Variables-MI-BlockScrollBar-opacity","0.58");break;case"-1":g("--SCC-Variables-MI-BlockScrollBar-display","none");break;default:g("--SCC-Variables-MI-BlockScrollBar-opacity","0");let e=document.querySelector("#Android-mobile-BlockScrollBarShow");e&&e.remove()}}})),await j("SC_winsay_cp_editor__BlockScrollBar_Hposition",(async function(e){if(!T(e))switch(e){case"L31":g("--SCC-Variables-MI-BlockScrollBar-right","unset"),g("--SCC-Variables-MI-BlockScrollBar-left","31px"),g("--SCC-Variables-MI-BlockScrollBar-tooltips-top","-100%");break;case"L13":g("--SCC-Variables-MI-BlockScrollBar-right","unset"),g("--SCC-Variables-MI-BlockScrollBar-left","13px"),g("--SCC-Variables-MI-BlockScrollBar-tooltips-top","-100%");break;case"R31":g("--SCC-Variables-MI-BlockScrollBar-right","31px"),g("--SCC-Variables-MI-BlockScrollBar-left","unset"),g("--SCC-Variables-MI-BlockScrollBar-tooltips-top","100%");break;default:g("--SCC-Variables-MI-BlockScrollBar-right","13px"),g("--SCC-Variables-MI-BlockScrollBar-left","unset"),g("--SCC-Variables-MI-BlockScrollBar-tooltips-top","100%")}})),await j("SC_winsay_cp_editor__Block-Inline-link__block-ref-content",(async function(e){if(T(e))g("--SCC-Variables-Block-Inline-link__block-ref__before","none"),g("--SCC-Variables-Block-Inline-link__block-ref__after","none");else{var n=e.split(" ")[0],t=e.split(" ")[1];g("--SCC-Variables-Block-Inline-link__block-ref__before",`'${n}'`),g("--SCC-Variables-Block-Inline-link__block-ref__after",`'${t}'`)}})),await j("SC_winsay_cp_editor__Block-List-Task__item-done__text-color",(async function(e){T(e)||"auto"!==e?(g("--SCC-Variables-Block-List-Task__item-done-color","var(--b3-theme-on-background)"),g("--SCC-Variables-Block-List-Task__item-done-backdrop-filter","none")):(g("--SCC-Variables-Block-List-Task__item-done-color","var(--b3-theme-secondary)"),g("--SCC-Variables-Block-List-Task__item-done-backdrop-filter","brightness(1.58) blur(13px)"))})),await z(document.getElementById("SC_winsay_cp_editor__FocusEnhanc_inlineCode"),(()=>{g("--SCC-Variables-Block-Inline-span__code__before-content","'<'"),g("--SCC-Variables-Block-Inline-span__code__after-content","'>'")}),(()=>{S("--SCC-Variables-Block-Inline-span__code__before-content"),S("--SCC-Variables-Block-Inline-span__code__after-content")})),await z(document.getElementById("SC_winsay_cp_editor__TapAlert_docReadOnly"),(()=>{window.winsay.cp.TapAlert_docReadOnly=!0}),(()=>{window.winsay.cp.TapAlert_docReadOnly=!1})),await z(document.getElementById("SC_winsay_cp_editor__FocusEnhanc_refWave"),(()=>{g("--SCC-Variables-span-ref-animation-icon","var(--SCC-baseComponent-span-ref-animation-icon)")}),(()=>{S("--SCC-Variables-span-ref-animation-icon")})),await z(document.getElementById("SC_winsay_cp_editor__FocusEnhanc_NodeHeading"),(()=>{M("FocusEnhanc_NodeHeading",`${b}style/sweet/sugar/editor/NodeHeading-FocusEnhanc.css`)}),(()=>{L(`${b}style/sweet/sugar/editor/NodeHeading-FocusEnhanc.css`,"css")})),await z(document.getElementById("SC_winsay_cp_editor__FocusEnhanc_DocNameArea"),(()=>{M("FocusEnhanc_DocNameArea",`${b}style/sweet/sugar/editor/MI-Dynamic.css`)}),(()=>{L(`${b}style/sweet/sugar/editor/MI-Dynamic.css`,"css")})),await z(document.getElementById("SC_winsay_cp_editor__FocusEnhanc_BlockHoverShadow"),(()=>{M("FocusEnhanc_BlockHoverShadow",`${b}style/sweet/sugar/editor/BlockHoverShadow.css`)}),(()=>{L(`${b}style/sweet/sugar/editor/BlockHoverShadow.css`,"css")})),await z(document.getElementById("SC_winsay_cp_editor__FocusEnhanc_SearchInputShadow"),(()=>{M("SearchInputShadow",`${b}style/sweet/sugar/editor/SearchInputShadow.css`)}),(()=>{L(`${b}style/sweet/sugar/editor/SearchInputShadow.css`,"css")})),await z(document.getElementById("SC_winsay_cp_editor__NodeHeadingFoldedShadow"),(()=>{M("NodeHeadingFoldedShadow",`${b}style/sweet/sugar/editor/NodeHeading-foldedShadow.css`)}),(()=>{L(`${b}style/sweet/sugar/editor/NodeHeading-foldedShadow.css`,"css")})),await z(document.getElementById("SC_winsay_cp_editor__ShowBreadcrumbAnytime"),(()=>{g("--SCC-Variables-breadcrumb--hide-opacity","1")}),(()=>{S("--SCC-Variables-breadcrumb--hide-opacity")})),await z(document.getElementById("SC_winsay_cp_editor__showDocCreatedDate"),(()=>{Promise.resolve().then((function(){return Ge}))}),(()=>{})),await j("SC_winsay_cp_editor__HintHintMaxWidth",(async function(e){T(e)||g("--SCC-Variables-HintHint-MaxWidth",`${e}`)})),await j("SC_winsay_cp_editor__HintHintMaxHeight",(async function(e){T(e)||g("--SCC-Variables-HintHint-MaxHeight",`${e}`)}))}(),await async function(){"body--mobile"!==f&&(await z(document.getElementById("NoSync__SC_winsay_cp_appearance__AutoTranslate"),(()=>{if(window.siyuan.config.lang){var e=document.getElementsByTagName("head")[0],n=document.createElement("script");n.type="text/javascript",n.async=!0,n.id="AutoTranslate",n.src="https://res.zvo.cn/translate/translate.js",n.onload=n.onratechange=()=>{let e;e.selectLanguageTag.show=!1,e.selectLanguageTag.languages="zh-CN,id,ms,el,it,es,pt-PT,ja,nl,en,ru,fr,se,sv,ko,zh-TW,pt-BR,cs,th,la,da",e.execute()},e.appendChild(n),document.getElementById("layouts").parentElement.style.visibility="hidden",document.getElementById("NoSync__SC_winsay_cp_appearance__AutoTranslate_label").style.display="flex"}}),(()=>{let e=document.getElementById("AutoTranslate");e&&(void 0).changeLanguage("zh-CN"),document.getElementById("layouts").parentElement.style.visibility="visible",document.querySelectorAll(".translateSelectLanguage").forEach((e=>{e.remove()})),document.getElementById("NoSync__SC_winsay_cp_appearance__AutoTranslate_label").style.display="none",e&&e.remove()})),await z(document.getElementById("SC_winsay_cp_appearance__DockBgColorFilter"),(()=>{let e=document.querySelector("#dockLeft"),n=document.querySelector("#dockRight"),t=document.querySelector("#status");e.style.setProperty("background-image","linear-gradient(to top,#cccccc16,#ffffff06)"),n.style.setProperty("background-image","linear-gradient(to top left,#cccccc16,#ffffff06)"),t.style.setProperty("background-image","linear-gradient(to top right,#cccccc16,#ffffff06)")}),(()=>{let e=document.querySelector("#dockLeft"),n=document.querySelector("#dockRight"),t=document.querySelector("#status");e.style.removeProperty("background-image"),n.style.removeProperty("background-image"),t.style.removeProperty("background-image")}))),await j("SC_winsay_cp_appearance__KeynesOpacity",(async function(e){T(e)||g("--SCC-Variables-KeynesOpacity",e)})),await j("SC_winsay_cp_appearance__TabBarSize",(async function(e){T(e)||(g("--SCC-Variables-MI-TabBar-FontSize",e),g("--SCC-Variables-MI-TabBar-MinHeight",3*parseInt(e)+""))})),await j("SC_winsay_cp_appearance__TabBarStyleFeel",(async function(e){if(T(e))g("--SCC-Variables-BlockList__beforeColor","var(--b3-theme-surface-lighter)");else switch(e){case"3":g("--SCC-Variables-TabBar-item__focus-box-shadow","rgba(131, 131, 131, 0.4) 0px 2px 4px, rgba(131, 131, 131, 0.3) 0px 7px 3px -3px, rgba(131, 131, 131, 0.2) 0px -3px 0px inset"),g("--SCC-Variables-TabBar-item-box-shadow","rgba(131, 131, 131, 0.4) 0px 2px 4px, rgba(131, 131, 131, 0.3) 0px 7px 3px -3px, rgba(131, 131, 131, 0.2) 0px -3px 0px inset"),g("--SCC-Variables-TabBar-V__item-box-shadow","rgb(131 131 131 / 30%) 0px 1px 1px, rgb(131 131 131 / 20%) 0px 2px 2px -2px, rgb(131 131 131 / 20%) 0px -1px 0px inset"),g("--SCC-Variables-TabBar-border-bottom","2px ridge var(--b3-theme-primary-light)"),g("--SCC-Variables-TabBar-margin-bottom","3px");break;case"2":g("--SCC-Variables-TabBar-item__focus-box-shadow","rgba(131, 131, 131, 0.4) 0px 2px 4px, rgba(131, 131, 131, 0.3) 0px 7px 3px -3px, rgba(131, 131, 131, 0.2) 0px -3px 0px inset"),g("--SCC-Variables-TabBar-item-box-shadow","rgba(131, 131, 131, 0.4) 0px 2px 4px, rgba(131, 131, 131, 0.3) 0px 7px 3px -3px, rgba(131, 131, 131, 0.2) 0px -3px 0px inset"),g("--SCC-Variables-TabBar-V__item-box-shadow","rgb(131 131 131 / 30%) 0px 1px 1px, rgb(131 131 131 / 20%) 0px 2px 2px -2px, rgb(131 131 131 / 20%) 0px -1px 0px inset"),g("--SCC-Variables-TabBar-border-bottom","none"),g("--SCC-Variables-TabBar-margin-bottom","3px");break;default:g("--SCC-Variables-TabBar-item__focus-box-shadow","rgb(131 131 131 / 1%) -1px 1px 1px, rgb(131 131 131 / 11%) -1px -2px 13px -1px, rgb(131 131 131 / 3%) 0px -1px 0px inset"),g("--SCC-Variables-TabBar-item-box-shadow","rgb(131 131 131 / 1%) -1px 1px 1px, rgb(131 131 131 / 11%) -1px -2px 13px -1px, rgb(131 131 131 / 3%) 0px -1px 0px inset"),g("--SCC-Variables-TabBar-V__item-box-shadow","none"),g("--SCC-Variables-TabBar-border-bottom","1px solid var(--b3-theme-primary-light)"),g("--SCC-Variables-TabBar-margin-bottom","0px")}})),await j("SC_winsay_cp_appearance__TabBar_item__textShadow",(async function(e){T(e)||g("--SCC-Variables-TabBar_item__textShadow","2"===e?"-1px 1px 13px var(--SCC-Orange-Windom)":"none")})),await j("SC_winsay_cp_appearance__TabBarMode",(async function(e){var n=T(e)?"MI-TabBar-D.css":e;M("TabBar",`${b}style/sweet/${n}`)})),await z(document.getElementById("SC_winsay_cp_appearance__TabBarV_AutoFolded"),(()=>{g("--SCC-Variables-MI-TabBarV_Auto-width","2rem")}),(()=>{g("--SCC-Variables-MI-TabBarV_Auto-width","max(186px, 13vw)")})),await z(document.getElementById("SC_winsay_cp_appearance__ToolBarMode"),(()=>{g("--SCC-Variables-MI-ToolBar-height-max","11px"),g("--SCC-Variables-MI-ToolBar-child-visibility","hidden"),g("--SCC-Variables-MI-ToolBar-svg-height","0px"),g("--SCC-Variables-MI-ToolBar-svg-hover-height","14px"),g("--SCC-Variables-MI-ToolBar-docName-opacity","0")}),(async()=>{g("--SCC-Variables-MI-ToolBar-height-max","unset"),g("--SCC-Variables-MI-ToolBar-child-visibility","visible");var e=await H("SC_winsay_cp_appearance__ToolBarMode__height");T(e)?(g("--SCC-Variables-MI-ToolBar-height","26px"),g("--SCC-Variables-MI-ToolBar-svg-height","14px"),g("--SCC-Variables-MI-ToolBar-svg-hover-height","14px")):(g("--SCC-Variables-MI-ToolBar-height",e),g("--SCC-Variables-MI-ToolBar-svg-height",parseInt(e)/2+1+"px"),g("--SCC-Variables-MI-ToolBar-svg-hover-height",parseInt(e)/2+1+"px")),g("--SCC-Variables-MI-ToolBar-docName-opacity","0.77")})),await j("SC_winsay_cp_appearance__ToolBarMode__height",(async function(e){T(e)||(g("--SCC-Variables-MI-ToolBar-height",e),g("--SCC-Variables-MI-ToolBar-svg-height",parseInt(e)/2+1+"px"),g("--SCC-Variables-MI-ToolBar-svg-hover-height",parseInt(e)/2+1+"px"))})),await j("SC_winsay_cp_appearance__ToolBarMode__NotFocus__bgColor",(async function(e){T(e)||g("--b3-toolbar-background",e)})),await z(document.getElementById("SC_winsay_cp_appearance__ToolBarMode__HideList__docName"),(()=>{g("--SCC-Variables-MI-ToolBar-docName-opacity","0")}),(()=>{g("--SCC-Variables-MI-ToolBar-docName-opacity","0.77")})),await z(document.getElementById("SC_winsay_cp_appearance__ToolBarMode__HideList__VIP"),(()=>{g("--SCC-Variables-MI-ToolBar-VIP-opacity","0")}),(()=>{g("--SCC-Variables-MI-ToolBar-VIP-opacity","0.77")})),await z(document.getElementById("SC_winsay_cp_appearance__ToolBarMode__HideList__windowX"),(()=>{g("--SCC-Variables-MI-ToolBar-windowX-opacity","0")}),(()=>{g("--SCC-Variables-MI-ToolBar-windowX-opacity","0.77")})),await z(document.getElementById("SC_winsay_cp_appearance__ToolBarMode__HideList__Other"),(()=>{g("--SCC-Variables-MI-ToolBar-Other-opacity","0")}),(()=>{g("--SCC-Variables-MI-ToolBar-Other-opacity","0.77")})),await z(document.getElementById("SC_winsay_cp_appearance__ShowWebIcon"),(()=>{M("ShowWebIcon",`${b}style/link/web.css`)}),(()=>{L(`${b}style/link/web.css`,"css")})),await z(document.getElementById("SC_winsay_cp_appearance__ShowFileIcon"),(()=>{M("ShowFileIcon",`${b}style/link/file.css`)}),(()=>{L(`${b}style/link/file.css`,"css")})),await j("SC_winsay_cp_appearance__status_msg_opacity",(async function(e){T(e)||g("--SCC-Variables-MI-status__msg_opacity",e)})),await z(document.getElementById("SC_winsay_cp_appearance__strengthen_backlinkList_panel_border"),(()=>{g("--SCC-Variables-backlinkList_panel_box-shadow","rgb(6 24 44 / 8%) -31px -13px 131px 12px, rgb(186 186 186 / 22%) 12px -23px 111px -5px inset")}),(()=>{S("--SCC-Variables-backlinkList_panel_box-shadow")})),await z(document.getElementById("SC_winsay_cp_appearance__strengthen_layout-tab-container"),(()=>{g("--SCC-Variables-MI-LayoutTabContainer_bgColor","linear-gradient(95deg, transparent, var(--b3-theme-surface-lighter), transparent)")}),(()=>{S("--SCC-Variables-MI-LayoutTabContainer_bgColor")})),await z(document.getElementById("SC_winsay_cp_appearance__SYSetting-AssetsIMG-Sticky"),(()=>{M("SYSetting-AssetsIMG-Sticky",`${b}style/sweet/sugar/appearance/SYSetting-AssetsIMG-Sticky.css`)}),(()=>{let e=document.getElementById("SYSetting-AssetsIMG-Sticky");e&&e.remove()}))}(),await async function(){await j("SC_winsay_cp_about__checkTime",(async function(e){T(e)||"Once"!==e||(await Ae("Sofill-"),"none"===document.querySelector("#SC-CP").style.display&&"true"===await H("SC_winsay_cp_about__AutoCheckSilently")?setTimeout((()=>{Le(!0)}),31e3):setTimeout((()=>{Le(!1)}),13e3))})),await j("SC_winsay_cp_about__checkAPI",(async function(e){if(!T(e)){let e=await De();e&&(document.querySelector("#SC_winsay_cp_version > span").innerHTML=e)}}))}(),await async function(){await j("SC_winsay_cp_custom__EXTmaxOpenTabCount",(async function(e){if(T(e)){let e=await he.getItem("SC_winsay_cp_custom__EXTmaxOpenTabCount__origin");T(e)||(window.siyuan.config.fileTree.maxOpenTabCount=parseInt(e),he.removeItem("SC_winsay_cp_custom__EXTmaxOpenTabCount__origin"))}else T(await he.getItem("SC_winsay_cp_custom__EXTmaxOpenTabCount__origin"))&&await he.setItem("SC_winsay_cp_custom__EXTmaxOpenTabCount__origin",window.siyuan.config.fileTree.maxOpenTabCount),window.siyuan.config.fileTree.maxOpenTabCount=parseInt(e)})),await j("SC_winsay_cp_custom__root_filter_light",(async function(e){if(!T(e))switch(e){case"5":g("--SCC-Variables-root-filter-light","brightness(0.6) opacity(0.85) grayscale(0.13) saturate(1.31) contrast(1.31)");break;case"4":g("--SCC-Variables-root-filter-light","brightness(0.7) opacity(0.88) grayscale(0.3) saturate(1.31) contrast(1.86)");break;case"3":g("--SCC-Variables-root-filter-light","brightness(0.9) grayscale(1) contrast(1.1)");break;case"2":g("--SCC-Variables-root-filter-light","saturate(1.3) brightness(0.77) contrast(1.58)");break;case"1":g("--SCC-Variables-root-filter-light","brightness(0.9) saturate(1.31) contrast(1.31)");break;default:g("--SCC-Variables-root-filter-light","none")}})),await j("SC_winsay_cp_custom__root_filter_dark",(async function(e){if(!T(e))switch(e){case"5":g("--SCC-Variables-root-filter-dark","invert(77%) contrast(1.13) brightness(0.99)");break;case"4":g("--SCC-Variables-root-filter-dark","brightness(0.58) opacity(0.98) saturate(1.38) contrast(0.97)");break;case"3":g("--SCC-Variables-root-filter-dark","brightness(0.9) grayscale(1) contrast(1.1)");break;case"2":g("--SCC-Variables-root-filter-dark","saturate(1.58) brightness(1.05) contrast(0.95)");break;case"1":g("--SCC-Variables-root-filter-dark","brightness(1.05) saturate(1.13) contrast(1.03)");break;default:g("--SCC-Variables-root-filter-dark","none")}})),await z(document.getElementById("SC_winsay_cp_custom__filter_timer"),(async()=>{window.winsay.storage.It_filterTimer&&clearInterval(window.winsay.storage.It_filterTimer),window.winsay.storage.It_filterTimer=setInterval((async()=>{if($.isDuringTime("18:00","6:00")){let e=document.documentElement.style.getPropertyValue("--SCC-Variables-root-filter-light"),n=document.documentElement.style.getPropertyValue("--SCC-Variables-root-filter-dark");await he.setItem("SC_winsay_cp_custom__root_Lfilter_daily",e),await he.setItem("SC_winsay_cp_custom__root_Dfilter_daily",n),g("--SCC-Variables-root-filter-light",await he.getItem("SC_winsay_cp_custom__root_Lfilter_daily")),g("--SCC-Variables-root-filter-dark",await he.getItem("SC_winsay_cp_custom__root_Dfilter_daily"))}else g("--SCC-Variables-root-filter-light",""),g("--SCC-Variables-root-filter-dark","")}),3e3)}),(()=>{window.winsay.storage.It_filterTimer&&clearInterval(window.winsay.storage.It_filterTimer);let e=document.querySelector("#SC_winsay_cp_custom__root_filter_light"),n=document.querySelector("#SC_winsay_cp_custom__root_filter_dark");if(!T(e)&&!T(n)){let t=new Event("change",{bubbles:!0}),a=e._valueTracker;a&&a.setValue(""),e.dispatchEvent(t);let i=new Event("change",{bubbles:!0}),o=n._valueTracker;o&&o.setValue(""),n.dispatchEvent(i)}})),await j("SC_winsay_cp_custom__defaultS",(async function(e){})),await j("SC_winsay_cp_custom__LS",(async function(e){T(e)||("light"===E?await he.setItem(c,e).then((e=>{Promise.resolve().then((function(){return Re})).then((async e=>{await e.iterLC()}))})):await he.getItem("SC_winsay_cp_custom__defaultS_auto"))})),await j("SC_winsay_cp_custom__DS",(async function(e){"dark"!==E||T(e)||await he.setItem(_,e).then((e=>{Promise.resolve().then((function(){return Re})).then((async e=>{await e.iterDC()}))}))}))}(),await async function(){await j("SC_winsay_cp_assets__PCards",(async function(e){T(e)&&document.getElementById("assets__PCards")?document.getElementById("assets__PCards").remove():M("assets__PCards",`${b}style/sweet/sugar/assets/${e}`)}))}(),await async function(){await z(document.getElementById("SC_winsay_cp_filetree__Hide_untitle"),(()=>{g("--SCC-Variables-MI-DocTree-Untitle-opacity","0")}),(()=>{g("--SCC-Variables-MI-DocTree-Untitle-opacity","1")})),await z(document.getElementById("SC_winsay_cp_filetree__Hide_item_action_more"),(()=>{g("--SCC-Variables-MI-DocTree-item-action-more-display","none")}),(()=>{S("--SCC-Variables-MI-DocTree-item-action-more-display")})),await z(document.getElementById("SC_winsay_cp_filetree__HideSomeIcon2SeeSee"),(()=>{g("--SCC-Varibales-DocTree-icon-MaxWidth","0")}),(()=>{S("--SCC-Varibales-DocTree-icon-MaxWidth")})),await z(document.getElementById("SC_winsay_cp_filetree__ChangeIconAvailability"),(()=>{g("--SCC-Variables-ChangeIconAvailability","none")}),(()=>{S("--SCC-Variables-ChangeIconAvailability")})),await z(document.getElementById("SC_winsay_cp_filetree__DyeingNameAvailability"),(()=>{S("--SCC-Variables-DyeingName-Notebook"),S("--SCC-Variables-DyeingName-Doc")}),(()=>{g("--SCC-Variables-DyeingName-Notebook","var(--SCC-baseComponent-text-color-2)"),g("--SCC-Variables-DyeingName-Doc","var(--SCC-baseComponent-text-color-1)")})),await z(document.getElementById("SC_winsay_cp_filetree__Adaptive_display"),(()=>{M("MI-DocTree-Adaptive",`${b}style/sweet/MI-DocTree-Adaptive.css`),document.getElementById("BP__SC_winsay_cp_filetree__Adaptive_display").classList.add("fn__none")}),(()=>{L(`${b}style/sweet/MI-DocTree-Adaptive.css`,"css"),document.getElementById("BP__SC_winsay_cp_filetree__Adaptive_display").classList.remove("fn__none")})),await j("SC_winsay_cp_filetree__docFontsize",(async function(e){T(e)||(g("--SCC-Variables-MI-DocTree-docFontsize",`${e}pt`),document.getElementById("SC_winsay_cp_filetree__docFontsize__label").setAttribute("aria-label",`${e}`),await he.setItem("SC_winsay_cp_filetree__docFontsize__label",e))})),await j("SC_winsay_cp_filetree__nbFontsize",(async()=>{var e=await H("SC_winsay_cp_filetree__nbFontsize");T(e)||(g("--SCC-Variables-MI-DocTree-nbFontsize",`${e}pt`),document.getElementById("SC_winsay_cp_filetree__nbFontsize__label").setAttribute("aria-label",`${e}`),await he.setItem("SC_winsay_cp_filetree__nbFontsize__label",e))})),await j("SC_winsay_cp_filetree__nbMargin",(async function(e){T(e)||(g("--SCC-Variables-MI-DocTree-nbMargin",`${e}em`),document.getElementById("SC_winsay_cp_filetree__nbMargin__label").setAttribute("aria-label",`${e}`),await he.setItem("SC_winsay_cp_filetree__nbMargin__label",e))}))}(),await async function(){await j("SC_winsay_cp_search__layout",(async function(e){T(e)&&document.getElementById("search__layout")?document.getElementById("search__layout").remove():M("search__layout",`${b}style/sweet/sugar/search/${e}`)})),await z(document.getElementById("SC_winsay_cp_search__index"),(()=>{M("search__index",`${b}style/sweet/sugar/search/index.css`)}),(()=>{L(`${b}style/sweet/sugar/search/index.css`,"css")})),await z(document.getElementById("SC_winsay_cp_search__disable_tips"),(()=>{var e=document.getElementById("search__disable_tips");e&&e.remove()}),(()=>{M("search__disable_tips",`${b}style/sweet/sugar/search/tips.css`)}))}(),await async function(){await z(document.getElementById("SC_winsay_cp_system__SelfProtection"),(()=>{let e=null;window.winsay.storage.It_SelfProtector&&clearInterval(window.winsay.storage.It_SelfProtector),window.winsay.storage.It_SelfProtector=setInterval((async()=>{window.siyuan.config.appearance.hideStatusBar&&(null==document.getElementById("Info")&&(e=new Ee({isCancel:!0,dragable:!1,XML:ke,success(){console.log("点击了确定");let e=!1,n=document.querySelector("#toolbar #barSetting"),t=document.querySelector('.b3-tab-bar:not(.sc-custom-nav) [data-name="appearance"]');null==t&&(e=!0),e&&n.click(),t.click(),setTimeout((()=>{document.querySelector("#hideStatusBar").click()}),200),e&&setTimeout((()=>{document.elementFromPoint(1,1).click()}),200)},cancel(){console.log("点击了取消")},maskable:!0})),e&&await e.open((()=>{document.getElementById("Info").innerHTML="检测到底部状态栏被隐藏，主题设置入口不可用！是否立即开启？",document.getElementById("CoverWarming").innerHTML="若要禁用此提醒，请在主题设置中关闭【主题自我保护】"})));try{T("")}catch(e){console.error(e),alert("主题自我保护检测到异常：Sofill- 内核已被篡改，若重载无效请重新安装")}}),3e4)}),(()=>{window.winsay.storage.It_SelfProtector&&clearInterval(window.winsay.storage.It_SelfProtector)})),await z(document.getElementById("SC_winsay_cp_system__Ball"),(()=>{if("body--mobile"===f){let e=document.querySelector("#Sofill-MobileBall");e&&(e.style.display="none")}}),(()=>{if("body--mobile"===f){let e=document.querySelector("#Sofill-MobileBall");e?e.style.display="block":re("Sofill-MobileBall not found")}}))}()}async function n(){!function(){var e=null;if(null==document.getElementById("SC-CP")&&(e=new Te({isCancel:!0,dragable:!1,maskable:!0})),"body--mobile"===f){const n=document.getElementById("sidebar"),t=document.getElementById("menu");if(null==document.getElementById("Sofill-CDUI-1")){const a=document.createElement("svg");a.setAttribute("data-type",""),a.id="Sofill-CDUI-1",a.className="Sofill-CDUI-btn toolbar__icon",a.innerHTML='<svg id="CP_ep1" viewBox="0 0 32 32">\n      <path d="M25.143 10.667h-1.524v-3.048c0-4.206-3.413-7.619-7.619-7.619s-7.619 3.413-7.619 7.619v3.048h-1.524c-1.676 0-3.048 1.371-3.048 3.048v15.238c0 1.676 1.371 3.048 3.048 3.048h18.286c1.676 0 3.048-1.371 3.048-3.048v-15.238c0-1.676-1.371-3.048-3.048-3.048zM11.428 7.619c0-2.53 2.042-4.571 4.571-4.571s4.571 2.042 4.571 4.571v3.048h-9.143v-3.048zM25.143 28.952h-18.286v-15.238h18.286v15.238zM16 24.381c1.676 0 3.048-1.371 3.048-3.048s-1.371-3.048-3.048-3.048-3.048 1.371-3.048 3.048 1.371 3.048 3.048 3.048z"></path>\n    </svg>';const i=document.createElement("div");i.id="Sofill-CDUI-2",i.className="Sofill-CDUI-btn b3-list-item b3-list-item--big",i.innerHTML='<span class="b3-list-item__icon b3-list-item__graphic">🏳️&zwj;🌈</span><span class="b3-list-item__text">主题设置</span>',n.children[0].insertAdjacentElement("beforeend",a),document.querySelector("#Sofill-CDUI-1").addEventListener("click",(async n=>{e.open(),await Ae("Sofill-"),n.stopPropagation()})),document.querySelector("#toolbarMore").addEventListener("click",(n=>{setTimeout((()=>{t.insertBefore(i,t.children[0]),document.querySelector("#Sofill-CDUI-2").addEventListener("click",(async n=>{e.open(),await Ae("Sofill-")}))}),100)}))}}else{var n=document.querySelector("#barHelp");if(n&&(n.addEventListener("click",(e=>{let n=e.target,t=n.parentNode,a=t.parentNode,i=a.parentNode;"toolbarVIP"===a.id||"toolbarVIP"===i.id?(document.querySelector("#toolbar #barSetting").click(),document.querySelector('.b3-tab-bar:not(.sc-custom-nav) [data-name="account"]').click(),e.stopPropagation()):"barMode"===t.id||"barMode"===a.id?(document.querySelector("#toolbar #barMode").click(),e.stopPropagation()):t.classList.contains("b3-menu__item")||a.classList.contains("b3-menu__item")?console.log(n.innerHTML):"barTopHelp"===n.id||"barTopHelp"===t.id?n.id="barHelp":e.stopPropagation()}),!0),n.setAttribute("class","toolbar__item"),n.children[0].innerHTML='<use xlink:href="#iconMore"></use>',async function(n,t,a,i){if(null==document.getElementById(a)){const o=document.createElement("button");o.id=a,o.className=i,o.ariaLabel="主题设置（实验性）",o.style.paddingRight="0",o.innerHTML='<svg class="b3-menu__icon Sofill-CDUI-btn__icon" "=""><use xlink:href="#iconSettings"></use></svg><span class="b3-menu__label">主题设置</span>',n.insertAdjacentElement(t,o),document.getElementById(a).onclick=async()=>{e.open(),await Ae("Sofill-"),document.getElementById("sofill_preview").setAttribute("src",`${b}preview.png`)}}}(n.children[1],"beforeend","Sofill-CDUI-1","Sofill-CDUI-btn b3-menu__item")),n&&null==document.getElementById("sc_drawer")){var t=document.createElement("div");t.id="sc_drawer",t.style.display="flex",t.style.flexDirection="row-reverse",t.style.borderBottom="2px dashed var(--b3-theme-surface-lighter)",t.style.minHeight="2rem",setTimeout((()=>{t.setAttribute("data-themeInfo",`${a}`)}),1e3),n.children[1].insertAdjacentElement("afterbegin",t)}if(document.querySelector("body.android.body--desktop")){let e='<svg><use xlink:href="#iconQuit"></use></svg>',n=document.querySelector("#toolbar"),t=document.createElement("div");t.id="barQuit",t.className="toolbar__item b3-tooltips b3-tooltips__sw",t.setAttribute("aria-label","退出 Quit"),t.innerHTML=e,n.insertAdjacentElement("beforeend",t),t.onclick=()=>{document.body.classList.contains("client--browser")?(document.querySelector("#toolbar #barSetting").click(),document.querySelector('.b3-tab-bar:not(.sc-custom-nav) [data-name="about"]').click(),setTimeout((()=>{document.querySelector("#menuSafeQuit").click(),document.elementFromPoint(1,1).click()}),500)):window.location.href="siyuan://api/system/exit"}}}}(),await async function(){const e=await he.getItem("SC_winsay_cp_custom-nav-bind-id");T(e)||(document.getElementById(e).checked=!0);document.querySelectorAll("input[id^='sc-custom-nav-bind-id'][type='radio']").forEach((async e=>{e.addEventListener("click",(async()=>{e.checked&&!0===e.checked&&await he.setItem("SC_winsay_cp_custom-nav-bind-id",e.id)}))}))}(),await e(),await async function(){const e=document.querySelector("#SC-CP");e?await P(e):console.error("CP_dialog not found")}(),await Me()}ve()&&(require("fs"),require("path")),window.winsay.localVersion={},window.winsay.localVersion.version="",window.winsay.localVersion.useBazaar="",window.winsay.localVersion.useGithub="",window.winsay.localVersion.vinfoHTML="",window.winsay.storage.SC_winsay_cp_editor__DocWidthMode__previousValue="null",window.winsay.storage.SC_winsay_cp_T__t2=null,window.winsay.storage.It_DocWidthMode=null,window.winsay.storage.It_SelfProtector=null,window.winsay.storage.It_filterTimer=null,setTimeout((async()=>{await n()}),0)}});async function Oe(){await he.getItem(_).then((e=>{T(e)&&(e=l,console.warn(e)),M(i.STYLE_COLOR,`${v}${e}`);for(let n=0;n<r.length&&window.winsay.storage.iterDC.next().value!==e;++n);}))}async function Ve(){await he.getItem(c).then((e=>{T(e)&&(e=s,console.warn(e)),M(i.STYLE_COLOR,`${v}${e}`);for(let n=0;n<o.length&&window.winsay.storage.iterLC.next().value!==e;++n);}))}var Re=Object.freeze({__proto__:null,iterDC:Oe,iterLC:Ve});async function Pe(){if("dark"===E)await Oe();else await Ve();"body--mobile"===f?(await async function(){if("body--mobile"===f){var e=document.getElementById("SofillToolbar");null==e&&((e=fe(document.getElementById("toolbarEdit"),"div","SofillToolbar")).style.position="relative",e.style.height="25px",e.style.overflowY="scroll",e.style.paddingTop="7px",e.style.marginRight="3px",e.style.marginLeft="10px")}}(),await async function(){if("body--mobile"!==f)return;if(document.getElementById(i.BUTTON_TOOLBAR_CHANGE_COLOR))return;const e=y(document.getElementById("SofillToolbar"),"div");e.id=i.BUTTON_TOOLBAR_CHANGE_COLOR,e.style.width="17px",e.style.height="100%",e.style.float="left",e.style.marginLeft="10px",e.style.backgroundImage=`url(${b}src/icon/S2.svg)`,e.style.backgroundRepeat="no-repeat",e.style.backgroundPosition="left top",e.style.backgroundSize="100%",e.addEventListener("click",(async e=>{let n=null;var t;"dark"===E?(n=window.winsay.storage.iterDC.next().value,(t=document.getElementById("SC_winsay_cp_custom__DS"))&&(t.bindIDB=n)):(n=window.winsay.storage.iterLC.next().value,(t=document.getElementById("SC_winsay_cp_custom__LS"))&&(t.bindIDB=n)),M(i.STYLE_COLOR,`${v}${n}`)}))}()):await async function(){ve()&&require("fs");const n=document.getElementById("drag");if(e){const e=document.createElement("button");e.id=i.BUTTON_TOOLBAR_CHANGE_COLOR,e.className="toolbar__item b3-tooltips b3-tooltips__sw",e.ariaLabel="形态切换（实验性）",e.innerHTML='<svg><use xlink:href="#iconTheme"></use></svg>',e.addEventListener("click",(async e=>{let n=null;var t;"dark"===E?(n=window.winsay.storage.iterDC.next().value,(t=document.getElementById("SC_winsay_cp_custom__DS"))&&(t.bindIDB=n)):(n=window.winsay.storage.iterLC.next().value,(t=document.getElementById("SC_winsay_cp_custom__LS"))&&(t.bindIDB=n)),M(i.STYLE_COLOR,`${v}${n}`)})),null==document.getElementById(i.BUTTON_TOOLBAR_CHANGE_COLOR)&&n.insertAdjacentElement("afterend",e)}}()}ve()&&require("fs"),setTimeout((()=>{!async function(){let e=null;"light"===E?(e=`${v}root-base-light.css`,L(`${v}root-base-dark.css`,"css")):(e=`${v}root-base-dark.css`,L(`${v}root-base-light.css`,"css"));setTimeout((()=>{M(n,e)}),100),await Pe()}()}),0);var He=Object.freeze({__proto__:null}),je=document.createElement("div");je.id="Sofill-MobileBall",je.style.visibility="hidden",je.innerHTML='<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Canonical</title><path d="M24 12c0 6.627-5.373 12-12 12-6.628 0-12-5.373-12-12C0 5.372 5.372 0 12 0c6.627 0 12 5.372 12 12zM12 2.92A9.08 9.08 0 002.92 12 9.08 9.08 0 0012 21.08 9.08 9.08 0 0021.081 12 9.08 9.08 0 0012 2.92zm0 16.722A7.64 7.64 0 014.36 12 7.64 7.64 0 0112 4.36 7.64 7.64 0 0119.641 12a7.64 7.64 0 01-7.64 7.641z"/></svg>',document.body.appendChild(je),window.winsay.history=[];class ze{static hammerIt(e){const n=e;console.log("hammerIt begin elm",n);const t=new Hammer(n,{touchAction:"pan-x pan-y"});t.get("pinch").set({enable:!0}),console.log("hammertime",t);let a=0,i=0,o=1,s=1,r=0,l=0,c=0,_=0,d="";const u=n;t.on("panleft panright panup pandown tap press pdoubletap pan pinch panend pinchend",(function(e){if(console.log(e.type+" gesture detected."),"true"!==n.childNodes[1].getAttribute("contenteditable")){if("tap"===e.type&&!0===window.winsay.cp.TapAlert_docReadOnly&&re("当前只读模式"),"doubletap"===e.type){d="translate3d(0, 0, 0) scale3d(2, 2, 1) ",o=2,s=2;try{"matrix(1, 0, 0, 1, 0, 0)"!==window.getComputedStyle(u,null).getPropertyValue("-webkit-transform").toString()&&(d="translate3d(0, 0, 0) scale3d(1, 1, 1) ",o=1,s=1)}catch(e){}u.style.webkitTransform=d,d=""}1!==o&&(a=r+e.deltaX,i=l+e.deltaY,c=Math.ceil((o-1)*u.clientWidth/2),_=Math.ceil((o-1)*u.clientHeight/2),a>c&&(a=c),a<-c&&(a=-c),i>_&&(i=_),i<-_&&(i=-_)),"pinch"===e.type&&(o=Math.max(.999,Math.min(s*e.scale,4))),"pinchend"===e.type&&(s=o),"panend"===e.type&&(r=a<c?a:c,l=i<_?i:_),1!==o&&(d="translate3d("+a+"px,"+i+"px, 0) scale3d("+o+", "+o+", 1)"),d&&(u.style.webkitTransform=d)}else n.style.transform=""}))}}setTimeout((()=>{je.style.visibility="visible";var e=new Hammer.Manager(je);e.add(new Hammer.Press),e.add(new Hammer.Tap({event:"doubletap",taps:2})),e.add(new Hammer.Tap({event:"singletap"})),e.get("doubletap").recognizeWith("singletap"),e.get("singletap").requireFailure("doubletap"),e.on("doubletap",(function(e){document.body.classList.contains("music-mode")?document.body.classList.remove("music-mode"):document.body.classList.add("music-mode")})).on("singletap",(function(e){re(X())})).on("press",(function(e){console.log(e),window.location.reload()}));var n=document.querySelector("#editor>.protyle-content");ze.hammerIt(n)}),1e3),setTimeout((()=>{const e=document.querySelector("#editor>.protyle-content>.protyle-background"),n=document.querySelector(".toolbar"),t={attributes:!0,childList:!0,subtree:!0,attributeOldValue:!0},a=new MutationObserver((function(e,n){for(let n of e)if("childList"===n.type)console.log("A child node has been added or removed.");else if("attributes"===n.type&&(console.log("The "+n.attributeName+" attribute was modified."),console.log(n),"data-node-id"===n.attributeName&&null!=n.oldValue&&(window.winsay.history.push(n.oldValue),console.warn(window.winsay.history)),"href"===n.attributeName)){let e=document.querySelector("#toolbarEdit");"#iconEdit"===n.oldValue?(e.style.color="var(--b3-font-color1)",e.style.filter="saturate(5.8) brightness(0.58)"):(e.style.color="var(--b3-theme-on-surface)",e.style.filter="none")}}));a.observe(e,t),a.observe(n,t)}),1e3),je.addEventListener("touchstart",(function(e){e.stopPropagation(),this.style.transition="none",this.style.opacity="1",clearTimeout(this.timer),this.l=this.offsetLeft,this.x=e.targetTouches[0].clientX,this.h=this.offsetTop,this.y=e.targetTouches[0].clientY}));const $e=function(e){e.stopPropagation(),this._x=e.targetTouches[0].clientX,this._y=e.targetTouches[0].clientY;let n=this._x-(this.x-this.l),t=this._y-(this.y-this.h);this.style.left=n+"px",this.style.top=t+"px"};je.addEventListener("touchmove",(function(e){this.fn||(this.fn=function(e,n,t){let a=0;return function(...i){const o=+new Date;o-a>=n&&(e.apply(t,i),a=o)}}($e,10,this)),this.fn(e)})),je.addEventListener("touchend",(function(e){e.stopPropagation(),this.style.transition="all 0.3s ease";const n=this.offsetWidth,t=this.offsetHeight,a=this.offsetLeft,i=this.offsetTop,o=document.documentElement.clientWidth,s=document.documentElement.clientHeight;a<=0&&(this.style.left="0px"),a>=o-n&&(this.style.left=o-n+"px"),i<=0?this.style.top="0px":i>=s-t?this.style.top=s-t+"px":this.style.left=a<=(o-n)/2?"0px":o-n+"px",this.timer=setTimeout((()=>{this.style.opacity=.31}),3e3)}));var Fe=Object.freeze({__proto__:null});function qe(){var e=document.querySelectorAll(".protyle-title__input");for(let i=0;i<e.length;i++){const o=e[i];var n=We(o.parentElement),t=n.innerText;if(""===t||"日期获取中……"===t){var a=Ue(o);n.innerText=a}}}function We(e){var n=e.children;for(let e=0;e<n.length;e++){const t=n[e];if(null!=t.getAttribute("documentCreatTimeElement"))return t}var t=y(e,"span");return t.setAttribute("documentCreatTimeElement","true"),t.style.display="block",t.style.marginLeft="7px",t.style.marginBottom="0px",t.style.fontSize="70%",t.style.color="#484550",t.style.opacity="0.58",t}function Ue(e){var n=e.parentElement.previousElementSibling.getAttribute("data-node-id");if(null==n)return"";var t=n.substring(0,4),a=n.substring(4,6),i=n.substring(6,8);return n.substring(8,10),n.substring(10,12),n.substring(12,14),"since "+t+"-"+a+"-"+i}"body--mobile"!==f&&setTimeout((()=>{setInterval(qe,300)}),500);var Ge=Object.freeze({__proto__:null});
/*!
* https://github.com/Hi-Windom

  ▄         ▄  ▄▄▄▄▄▄▄▄▄▄▄       ▄         ▄  ▄▄▄▄▄▄▄▄▄▄▄  ▄▄        ▄  ▄▄▄▄▄▄▄▄▄▄   ▄▄▄▄▄▄▄▄▄▄▄  ▄▄       ▄▄
  ▐░▌       ▐░▌▐░░░░░░░░░░░▌     ▐░▌       ▐░▌▐░░░░░░░░░░░▌▐░░▌      ▐░▌▐░░░░░░░░░░▌ ▐░░░░░░░░░░░▌▐░░▌     ▐░░▌
  ▐░▌       ▐░▌ ▀▀▀▀█░█▀▀▀▀      ▐░▌       ▐░▌ ▀▀▀▀█░█▀▀▀▀ ▐░▌░▌     ▐░▌▐░█▀▀▀▀▀▀▀█░▌▐░█▀▀▀▀▀▀▀█░▌▐░▌░▌   ▐░▐░▌
  ▐░▌       ▐░▌     ▐░▌          ▐░▌       ▐░▌     ▐░▌     ▐░▌▐░▌    ▐░▌▐░▌       ▐░▌▐░▌       ▐░▌▐░▌▐░▌ ▐░▌▐░▌
  ▐░█▄▄▄▄▄▄▄█░▌     ▐░▌          ▐░▌   ▄   ▐░▌     ▐░▌     ▐░▌ ▐░▌   ▐░▌▐░▌       ▐░▌▐░▌       ▐░▌▐░▌ ▐░▐░▌ ▐░▌
  ▐░░░░░░░░░░░▌     ▐░▌          ▐░▌  ▐░▌  ▐░▌     ▐░▌     ▐░▌  ▐░▌  ▐░▌▐░▌       ▐░▌▐░▌       ▐░▌▐░▌  ▐░▌  ▐░▌
  ▐░█▀▀▀▀▀▀▀█░▌     ▐░▌          ▐░▌ ▐░▌░▌ ▐░▌     ▐░▌     ▐░▌   ▐░▌ ▐░▌▐░▌       ▐░▌▐░▌       ▐░▌▐░▌   ▀   ▐░▌
  ▐░▌       ▐░▌     ▐░▌          ▐░▌▐░▌ ▐░▌▐░▌     ▐░▌     ▐░▌    ▐░▌▐░▌▐░▌       ▐░▌▐░▌       ▐░▌▐░▌       ▐░▌
  ▐░▌       ▐░▌ ▄▄▄▄█░█▄▄▄▄      ▐░▌░▌   ▐░▐░▌ ▄▄▄▄█░█▄▄▄▄ ▐░▌     ▐░▐░▌▐░█▄▄▄▄▄▄▄█░▌▐░█▄▄▄▄▄▄▄█░▌▐░▌       ▐░▌
  ▐░▌       ▐░▌▐░░░░░░░░░░░▌     ▐░░▌     ▐░░▌▐░░░░░░░░░░░▌▐░▌      ▐░░▌▐░░░░░░░░░░▌ ▐░░░░░░░░░░░▌▐░▌       ▐░▌
  ▀         ▀  ▀▀▀▀▀▀▀▀▀▀▀       ▀▀       ▀▀  ▀▀▀▀▀▀▀▀▀▀▀  ▀        ▀▀  ▀▀▀▀▀▀▀▀▀▀   ▀▀▀▀▀▀▀▀▀▀▀  ▀         ▀

* https://github.com/Hi-Windom
*/
