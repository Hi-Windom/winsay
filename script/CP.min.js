import{ConfirmDialog,CPDialog}from"./module/CPM.js";import{ConfirmDialog1,ConfirmDialog2,ConfirmDialog3,ConfirmDialog4}from"./module/XML/ConfirmDialog.js";import*as API from"./utils/api.min.js";import*as config from"./config.js";var barhelp=document.querySelector("#barHelp");barhelp.addEventListener("click",(e=>{"toolbarVIP"==e.target.parentNode.parentNode.id||"toolbarVIP"==e.target.parentNode.parentNode.parentNode.id?(document.getElementById("barSetting").click(),document.querySelector('.b3-tab-bar [data-name="account"]').click(),e.stopPropagation()):e.target.parentNode.classList.contains("b3-menu__item")||e.target.parentNode.parentNode.classList.contains("b3-menu__item")||("barTopHelp"==e.target.id||"barTopHelp"==e.target.parentNode.id?e.target.id="barHelp":e.stopPropagation())}),!0),barhelp.setAttribute("class","toolbar__item"),barhelp.children[0].innerHTML='<use xlink:href="#iconMore"></use>';var drawer=document.createElement("div");drawer.id="sc_drawer",drawer.style.display="flex",drawer.style.flexDirection="row-reverse",drawer.style.borderBottom="2px dashed var(--b3-theme-surface-lighter)",drawer.style.minHeight="2rem",barhelp.children[1].insertAdjacentElement("afterbegin",drawer);var localVersion="0.0.0";if(new Promise((function(e){var t=new XMLHttpRequest;t.open("POST","http://127.0.0.1:6806/api/file/getFile",!0),t.setRequestHeader("Content-type","application/json");t.send(JSON.stringify({path:"/conf/appearance/themes/Sofill-/theme.json"})),t.onreadystatechange=function(){if(4==t.readyState&&200==t.status){var a=t.responseText;e(JSON.parse(a))}}})).then((function(e){localVersion=e.version})),API.isPhone()){const e=document.getElementById("sidebar");if(null==document.getElementById("Sofill-CDUI-1")){const t=document.createElement("svg");t.id="Sofill-CDUI-1",t.className="Sofill-CDUI-btn toolbar__icon",t.innerHTML='<use xlink:href="#iconSettings"></use>',t.style.width="17px",t.style.height="100%",t.style.marginLeft="5px",e.children[0].insertAdjacentElement("beforeend",t);let a=new CPDialog({isCancel:!0,dragable:!1,maskable:!0});document.querySelector("#Sofill-CDUI-1").onclick=function(){a.open()}}}else{const e=document.getElementById("barHelp");if(null==document.getElementById("Sofill-CDUI-1")){const t=document.createElement("button");t.id="Sofill-CDUI-1",t.className="Sofill-CDUI-btn b3-menu__item",t.ariaLabel="主题设置（实验性）",t.innerHTML='<svg class="b3-menu__icon Sofill-CDUI-btn__icon" "=""><use xlink:href="#iconSettings"></use></svg><span class="b3-menu__label">主题设置</span>',e.children[1].insertAdjacentElement("beforeend",t);let a=new CPDialog({isCancel:!0,dragable:!1,maskable:!0});document.querySelector("#Sofill-CDUI-1").onclick=function(){a.open(),document.getElementById("sc-custom-container-placehold").children[0].innerHTML=`Sofill- v${localVersion} CP`,document.getElementById("SC_winsay_cp_version").innerHTML=`当前版本 v${localVersion}\n      <div class="b3-label__text"><a href="https://gitee.com/soltus/Sofill/blob/main/CHANGELOG/winsay.md" target="_blank">浏览更新历史</a></div>`}}}async function checkUpdateViaGithub(e){await getBazaarTheme(window.location.host,"",{}),await getInstalledTheme(window.location.host,"",{});new Promise((function(e){var t=new XMLHttpRequest;t.open("GET","https://api.github.com/repos/Hi-Windom/winsay/releases/latest",!0),t.setRequestHeader("Content-type","application/json"),t.send(null),t.onreadystatechange=function(){if(4==t.readyState&&200==t.status){var a=t.responseText;e(JSON.parse(a))}}})).then((async function(t){let a=t.tag_name;if(1==API.compareVersion(a,e)){let o=new ConfirmDialog({isCancel:!0,dragable:!1,XML:ConfirmDialog4,success(){window.open(`https://github.com/Hi-Windom/winsay/releases/download/${a}/Sofill-__${a}.zip`,"_blank"),window.open(`https://github.com/Hi-Windom/winsay/releases/tag/${a}`,"_blank")},cancel(){},maskable:!0});await o.open((()=>{document.getElementById("UpdateInfo").innerHTML=`${e} => ${a}<br><span class="fn__space"></span><pre class="b3-typography" style="max-height: 288px;">${t.body}</pre>`,document.getElementById("CoverWarming").innerHTML="下载链接能否访问取决于你的网络"})),localStorage.setItem("SC_winsay_latest_checked_version",a)}else API.通知("真棒👍，主题已是最新版本",800)}))}async function checkUpdateViaBazaar(e){let t=await getBazaarTheme(window.location.host,"",{}),a={};t.data.packages.forEach((e=>{"Sofill-"==e.name&&(a=e)})),1==API.compareVersion(a.version,e)?(localStorage.setItem("SC_winsay_latest_checked_version",a.version),API.通知(`集市有新版本发布：<br>${e} => ${a.version}<br> `)):API.通知("真棒👍，主题已是最新版本",800)}async function getBazaarTheme(e,t,a){let o="http://"+e+"/api/bazaar/getBazaarTheme";return API.request(o,t,a)}async function getInstalledTheme(e,t,a){let o="http://"+e+"/api/bazaar/getInstalledTheme";return API.request(o,t,a)}async function checkUpdate(){switch(localStorage.getItem("SC_winsay_cp_search__about_checkAPI")){case"Github":await checkUpdateViaGithub(localVersion);break;default:await checkUpdateViaBazaar(localVersion);break}}var obj={};function bindDomWithObject(e){var t=document.getElementById(e.id),a=e.obj,o=e.prop,n=e.callback,r=e.type,l=e.updated;Object.defineProperty(a,o,{get:function(){return t.value},set:function(e){t.value=e,localStorage.setItem(o,e)},configurable:!0}),t.addEventListener(r,(function(){a[o]=a[o],"function"==typeof l&&l(a,o,t)})),"function"==typeof n&&n(e,a,t)}function propInit(e,t){bindDomWithObject({id:e,obj:obj,prop:e,type:t,callback:function(t,a,o){API.isEmpty(localStorage.getItem(e))||(a[t.prop]=localStorage.getItem(e))}})}function propChange(e,t){bindDomWithObject({id:e,obj:obj,prop:e,type:"change",updated:t}),t()}function checkedInit(e){"true"===localStorage.getItem(e.id)?e.checked=!0:e.checked=!1}function checkedChange(e,t,a){e.checked&&!0===e.checked?(localStorage.setItem(e.id,"true"),t()):(localStorage.setItem(e.id,"false"),a()),e.addEventListener("click",(function(){!0===e.checked?(localStorage.setItem(e.id,"true"),t()):(localStorage.setItem(e.id,"false"),a())}))}let selectList=document.querySelectorAll("select[id^='SC_winsay_cp']");selectList.forEach((function(e){propInit(e.id,"change")}));let rangeSliderList=document.querySelectorAll("input[id^='SC_winsay_cp'][type='range']");rangeSliderList.forEach((function(e){propInit(e.id,"change")}));let checkboxList=document.querySelectorAll("input[id^='SC_winsay_cp'][type='checkbox']");checkboxList.forEach((function(e){checkedInit(e)}));let navLatest=localStorage.getItem("SC_winsay_cp_custom-nav-bind-id");API.isEmpty(navLatest)||(document.getElementById(navLatest).checked="true");let navList=document.querySelectorAll("input[id^='sc-custom-nav-bind-id'][type='radio']");navList.forEach((function(e){checkedChange(e,(()=>{localStorage.setItem("SC_winsay_cp_custom-nav-bind-id",e.id)}),(()=>{}))})),document.getElementById("SC_winsay_cp_system__ClearlocalStorage").addEventListener("click",(function(){new ConfirmDialog({isCancel:!0,dragable:!1,XML:ConfirmDialog1,success(){for(var e=0,t=0;t<localStorage.length;t++){((a=localStorage.key(t)).startsWith("winsay_")||a.startsWith("SC_winsay_"))&&(localStorage.removeItem(a),e++)}for(t=0;t<localStorage.length;t++){var a;((a=localStorage.key(t)).startsWith("winsay_")||a.startsWith("SC_winsay_"))&&(localStorage.removeItem(a),e++)}API.通知(`已清理 ${e} 项<br>页面即将刷新`),setTimeout((()=>{window.location.reload()}),3e3)},cancel(){},maskable:!0}).open()})),document.getElementById("SC_winsay_cp_system__ResetAllSettings").addEventListener("click",(function(){new ConfirmDialog({isCancel:!0,dragable:!1,XML:ConfirmDialog2,success(){for(var e=0,t=0;t<localStorage.length;t++){(a=localStorage.key(t)).startsWith("SC_winsay_cp")&&(localStorage.removeItem(a),e++)}for(t=0;t<localStorage.length;t++){var a;(a=localStorage.key(t)).startsWith("SC_winsay_cp")&&(localStorage.removeItem(a),e++)}API.通知(`已重置 ${e} 项<br>页面即将刷新`),setTimeout((()=>{window.location.reload()}),3e3)},cancel(){},maskable:!0}).open()})),document.getElementById("SC_winsay_cp_system__Refresh").addEventListener("click",(function(){setTimeout((()=>{window.location.reload()}),300)})),document.getElementById("SC__exportData").addEventListener("click",(function(){for(var e=document.querySelector("#SC__exportData_a"),t=0,a=0,o={},n=0;n<localStorage.length;n++){var r=localStorage.key(n);if(r.startsWith("winsay_")||r.startsWith("SC_winsay_"))try{o[r]=localStorage.getItem(r),a++}catch(e){o[r]=null}finally{t++}}var l=new Blob([JSON.stringify(o)]);e.href=URL.createObjectURL(l),e.download="Sofill-ConfigData.json",e.click(),API.通知(`导出成功 ${a}/${t}`)})),document.getElementById("SC__importData").addEventListener("click",(function(){var e=document.querySelector("#SC__importData_i");e.onchange=function(){if(""===this.value||this.files.length<1)return!1;var e=0,t=0,a={},o=0,n=new FileReader;n.readAsText(this.files[0]),n.onload=async function(n){var r=n.target.result;try{r=JSON.parse(r)}catch(e){return void API.通知(`无效数据 ${e}`,3e3)}for(var l in r)e+=1,r[l]!=localStorage.getItem(l)&&(t+=1,a[l]=`${localStorage.getItem(l)} => ${r[l]}`);for(var l in a)0;let c=new ConfirmDialog({isCancel:!0,dragable:!1,XML:ConfirmDialog3,success(){for(var a in r)try{localStorage.setItem(a,r[a]),o+=1}catch(e){}API.通知(`导入成功 ${o}/${e}，覆盖 ${t} 项`),t>0&&setTimeout((()=>{window.location.reload()}),1e3)},cancel(){},maskable:!0});await c.open((()=>{document.getElementById("CoverWarming").innerHTML=`影响 ${t}/${e} 项`}))}},e.value=""})),document.getElementById("SC_winsay_cp__checkUpdateBtn").addEventListener("click",(function(){checkUpdate()})),checkedChange(document.getElementById("SC_winsay_cp_appearance__CoolToolBar"),(()=>{API.MoveDOM("#barTopHelp","#sc_drawer"),API.MoveDOM("#toolbarVIP","#sc_drawer")}),(()=>{document.querySelector("#barSetting").insertAdjacentElement("afterend",document.querySelector("#barTopHelp")),document.querySelector("#toolbar").insertAdjacentElement("afterbegin",document.querySelector("#toolbarVIP"))})),propChange("SC_winsay_cp_appearance__TabBarSize",(function(){var e=localStorage.getItem("SC_winsay_cp_appearance__TabBarSize");API.isEmpty(e)||(document.documentElement.style.setProperty("--SCC-Variables-MI-TabBar-FontSize",e),document.documentElement.style.setProperty("--SCC-Variables-MI-TabBar-MinHeight",3*parseInt(e)))})),propChange("SC_winsay_cp_editor__BlockTable_MinWidth",(function(){var e=localStorage.getItem("SC_winsay_cp_editor__BlockTable_MinWidth");API.isEmpty(e)?document.documentElement.style.setProperty("--SCC-Variables-BlockTable-minWidth","unset"):document.documentElement.style.setProperty("--SCC-Variables-BlockTable-minWidth",e)})),propChange("SC_winsay_cp_editor__BlockTable_MaxWidth",(function(){var e=localStorage.getItem("SC_winsay_cp_editor__BlockTable_MaxWidth");API.isEmpty(e)?document.documentElement.style.setProperty("--SCC-Variables-BlockTable-maxWidth","unset"):document.documentElement.style.setProperty("--SCC-Variables-BlockTable-maxWidth",e)})),propChange("SC_winsay_cp_editor__BlockTable_FontSize",(function(){var e=localStorage.getItem("SC_winsay_cp_editor__BlockTable_FontSize");API.isEmpty(e)?document.documentElement.style.setProperty("--SCC-Variables-BlockTable-fontSize","unset"):document.documentElement.style.setProperty("--SCC-Variables-BlockTable-fontSize",e)})),propChange("SC_winsay_cp_editor__BlockTable_TextAlign",(function(){var e=localStorage.getItem("SC_winsay_cp_editor__BlockTable_TextAlign");API.isEmpty(e)?document.documentElement.style.setProperty("--SCC-Variables-BlockTable-text_align","unset"):document.documentElement.style.setProperty("--SCC-Variables-BlockTable-text_align",e)})),checkedChange(document.getElementById("SC_winsay_cp_editor__BlockTable_Margin"),(()=>{document.documentElement.style.setProperty("--SCC-Variables-BlockTable-margin","0 auto")}),(()=>{document.documentElement.style.setProperty("--SCC-Variables-BlockTable-margin","inherit")})),propChange("SC_winsay_cp_search__about_checkTime",(function(){var e=localStorage.getItem("SC_winsay_cp_search__about_checkTime");if(!API.isEmpty(e))switch(e){case"Once":"none"==document.querySelector("#SC-CP").style.display&&setTimeout((()=>{checkUpdate()}),3100);break;default:break}})),propChange("SC_winsay_cp_appearance__TabBarStyleFeel",(function(){var e=localStorage.getItem("SC_winsay_cp_appearance__TabBarStyleFeel");if(API.isEmpty(e))document.documentElement.style.setProperty("--SCC-Variables-BlockList__beforeColor","var(--b3-theme-surface-lighter)");else switch(e){case"3":document.documentElement.style.setProperty("--SCC-Variables-TabBar-item__focus-box-shadow","rgba(131, 131, 131, 0.4) 0px 2px 4px, rgba(131, 131, 131, 0.3) 0px 7px 3px -3px, rgba(131, 131, 131, 0.2) 0px -3px 0px inset"),document.documentElement.style.setProperty("--SCC-Variables-TabBar-item-box-shadow","rgba(131, 131, 131, 0.4) 0px 2px 4px, rgba(131, 131, 131, 0.3) 0px 7px 3px -3px, rgba(131, 131, 131, 0.2) 0px -3px 0px inset"),document.documentElement.style.setProperty("--SCC-Variables-TabBar-V__item-box-shadow","rgb(131 131 131 / 30%) 0px 1px 1px, rgb(131 131 131 / 20%) 0px 2px 2px -2px, rgb(131 131 131 / 20%) 0px -1px 0px inset"),document.documentElement.style.setProperty("--SCC-Variables-TabBar-border-bottom","2px ridge var(--b3-theme-primary-light)"),document.documentElement.style.setProperty("--SCC-Variables-TabBar-margin-bottom","3px");break;case"2":document.documentElement.style.setProperty("--SCC-Variables-TabBar-item__focus-box-shadow","rgba(131, 131, 131, 0.4) 0px 2px 4px, rgba(131, 131, 131, 0.3) 0px 7px 3px -3px, rgba(131, 131, 131, 0.2) 0px -3px 0px inset"),document.documentElement.style.setProperty("--SCC-Variables-TabBar-item-box-shadow","rgba(131, 131, 131, 0.4) 0px 2px 4px, rgba(131, 131, 131, 0.3) 0px 7px 3px -3px, rgba(131, 131, 131, 0.2) 0px -3px 0px inset"),document.documentElement.style.setProperty("--SCC-Variables-TabBar-V__item-box-shadow","rgb(131 131 131 / 30%) 0px 1px 1px, rgb(131 131 131 / 20%) 0px 2px 2px -2px, rgb(131 131 131 / 20%) 0px -1px 0px inset"),document.documentElement.style.setProperty("--SCC-Variables-TabBar-border-bottom","none"),document.documentElement.style.setProperty("--SCC-Variables-TabBar-margin-bottom","3px");break;case"1":default:document.documentElement.style.setProperty("--SCC-Variables-TabBar-item__focus-box-shadow","rgb(131 131 131 / 1%) -1px 1px 1px, rgb(131 131 131 / 11%) -1px -2px 13px -1px, rgb(131 131 131 / 3%) 0px -1px 0px inset"),document.documentElement.style.setProperty("--SCC-Variables-TabBar-item-box-shadow","rgb(131 131 131 / 1%) -1px 1px 1px, rgb(131 131 131 / 11%) -1px -2px 13px -1px, rgb(131 131 131 / 3%) 0px -1px 0px inset"),document.documentElement.style.setProperty("--SCC-Variables-TabBar-V__item-box-shadow","none"),document.documentElement.style.setProperty("--SCC-Variables-TabBar-border-bottom","1px solid var(--b3-theme-primary-light)"),document.documentElement.style.setProperty("--SCC-Variables-TabBar-margin-bottom","0px");break}})),propChange("SC_winsay_cp_appearance__TabBar_item__textShadow",(function(){var e=localStorage.getItem("SC_winsay_cp_appearance__TabBar_item__textShadow");if(!API.isEmpty(e))switch(e){case"2":document.documentElement.style.setProperty("--SCC-Variables-TabBar_item__textShadow","-1px 1px 13px var(--SCC-Orange-Windom)");break;case"1":default:document.documentElement.style.setProperty("--SCC-Variables-TabBar_item__textShadow","none");break}})),propChange("SC_winsay_cp_editor__Block-List-LightUpLineMode",(function(){var e=localStorage.getItem("SC_winsay_cp_editor__Block-List-LightUpLineMode");if(API.isEmpty(e))document.documentElement.style.setProperty("--SCC-Variables-BlockList__beforeColor","var(--b3-theme-surface-lighter)");else switch(e){case"1":document.documentElement.style.setProperty("--SCC-Variables-BlockList__beforeColor","var(--b3-theme-background-light)"),window.funs.updateStyle("BlockListHoverALL","");break;case"2":document.documentElement.style.setProperty("--SCC-Variables-BlockList__beforeColor","var(--b3-theme-background-light)"),window.funs.updateStyle("BlockListHoverALL","/appearance/themes/Sofill-/style/sweet/sugar/editor/Block-List-HoverALL.css");break;case"3":document.documentElement.style.setProperty("--SCC-Variables-BlockList__beforeColor","var(--b3-scroll-color)");break;case"4":default:document.documentElement.style.setProperty("--SCC-Variables-BlockList__beforeColor","var(--b3-theme-surface-lighter)");break}})),propChange("SC_winsay_cp_appearance__TabBarMode",(function(){var e=localStorage.getItem("SC_winsay_cp_appearance__TabBarMode"),t=API.isEmpty(e)?"sweet/MI-TabBar-D.css":e;window.funs.updateStyle("TabBar",`/appearance/themes/Sofill-/style/${t}`)})),checkedChange(document.getElementById("SC_winsay_cp_appearance__TabBarV_AutoFolded"),(()=>{document.documentElement.style.setProperty("--SCC-Variables-MI-TabBarV_Auto-width","2rem")}),(()=>{document.documentElement.style.setProperty("--SCC-Variables-MI-TabBarV_Auto-width","max(186px, 13vw)")})),propChange("SC_winsay_cp_search__layout",(function(){var e=localStorage.getItem("SC_winsay_cp_search__layout"),t=API.isEmpty(e)?"layout-Auto.css":e;window.funs.updateStyle("search__layout",`/appearance/themes/Sofill-/style/sweet/sugar/search/${t}`)})),checkedChange(document.getElementById("SC_winsay_cp_appearance__ToolBarMode"),(()=>{document.documentElement.style.setProperty("--SCC-Variables-MI-ToolBar-height-max","11px"),document.documentElement.style.setProperty("--SCC-Variables-MI-ToolBar-child-visibility","hidden"),document.documentElement.style.setProperty("--SCC-Variables-MI-ToolBar-svg-height","0px")}),(()=>{document.documentElement.style.setProperty("--SCC-Variables-MI-ToolBar-height-max","37px"),document.documentElement.style.setProperty("--SCC-Variables-MI-ToolBar-child-visibility","visible"),document.documentElement.style.setProperty("--SCC-Variables-MI-ToolBar-svg-height","14px")})),propChange("SC_winsay_cp_appearance__ToolBarMode__height",(function(){var e=localStorage.getItem("SC_winsay_cp_appearance__ToolBarMode__height");API.isEmpty(e)||(document.documentElement.style.setProperty("--SCC-Variables-MI-ToolBar-height",e),document.documentElement.style.setProperty("--SCC-Variables-MI-ToolBar-svg-height",parseInt(e)/2+1+"px"),document.documentElement.style.setProperty("--SCC-Variables-MI-ToolBar-svg-hover-height",parseInt(e)/2+1+"px"))})),propChange("SC_winsay_cp_appearance__ToolBarMode__NotFocus__bgColor",(function(){var e=localStorage.getItem("SC_winsay_cp_appearance__ToolBarMode__NotFocus__bgColor");API.isEmpty(e)||document.documentElement.style.setProperty("--b3-toolbar-background",e)}));var t=null,SC_winsay_cp_editor__DocWidthMode__previousValue="null";propChange("SC_winsay_cp_editor__DocWidthMode",(function(){var e=localStorage.getItem("SC_winsay_cp_editor__DocWidthMode");clearInterval(t),API.isEmpty(e)?SC_winsay_cp_editor__DocWidthMode__previousValue!=e&&null!=e&&window.location.reload():(SC_winsay_cp_editor__DocWidthMode__previousValue=e,t=setInterval((function(){var t=document.querySelectorAll("#layouts .layout__center .protyle-wysiwyg.protyle-wysiwyg--attr"),a=document.querySelectorAll("#layouts .layout__center .protyle-title.protyle-wysiwyg--attr");t.forEach((function(t){t.style.setProperty("padding",e)})),a.forEach((function(t){t.style.setProperty("margin",e)}))}),1e3))})),checkedChange(document.getElementById("SC_winsay_cp_appearance__DockBgColorFilter"),(()=>{document.querySelector("#dockLeft").style.setProperty("background-image","linear-gradient(to top,#cccccc16,#ffffff06)"),document.querySelector("#dockRight").style.setProperty("background-image","linear-gradient(to top left,#cccccc16,#ffffff06)"),document.querySelector("#status").style.setProperty("background-image","linear-gradient(to top right,#cccccc16,#ffffff06)")}),(()=>{document.querySelector("#dockLeft").style.removeProperty("background-image"),document.querySelector("#dockRight").style.removeProperty("background-image"),document.querySelector("#status").style.removeProperty("background-image")})),checkedChange(document.getElementById("SC_winsay_cp_appearance__ToolBarMode__HideList__docName"),(()=>{document.documentElement.style.setProperty("--SCC-Variables-MI-ToolBar-docName-opacity","0")}),(()=>{document.documentElement.style.setProperty("--SCC-Variables-MI-ToolBar-docName-opacity","0.77")})),checkedChange(document.getElementById("SC_winsay_cp_appearance__ToolBarMode__HideList__VIP"),(()=>{document.documentElement.style.setProperty("--SCC-Variables-MI-ToolBar-VIP-opacity","0")}),(()=>{document.documentElement.style.setProperty("--SCC-Variables-MI-ToolBar-VIP-opacity","0.77")})),checkedChange(document.getElementById("SC_winsay_cp_appearance__ToolBarMode__HideList__windowX"),(()=>{document.documentElement.style.setProperty("--SCC-Variables-MI-ToolBar-windowX-opacity","0")}),(()=>{document.documentElement.style.setProperty("--SCC-Variables-MI-ToolBar-windowX-opacity","0.77")})),checkedChange(document.getElementById("SC_winsay_cp_appearance__ToolBarMode__HideList__Other"),(()=>{document.documentElement.style.setProperty("--SCC-Variables-MI-ToolBar-Other-opacity","0")}),(()=>{document.documentElement.style.setProperty("--SCC-Variables-MI-ToolBar-Other-opacity","0.77")})),checkedChange(document.getElementById("SC_winsay_cp_editor__ListAutoIndent"),(()=>{document.documentElement.style.setProperty("--SCC-Variables-List-Item-margin","max(min(18px,0.88cqw),8px)"),document.documentElement.style.setProperty("--SCC-Variables-List-Item-padding","min(16px,0.58cqw)")}),(()=>{document.documentElement.style.setProperty("--SCC-Variables-List-Item-margin","18px"),document.documentElement.style.setProperty("--SCC-Variables-List-Item-padding","16px")})),propChange("SC_winsay_cp_editor__img-bg-color",(function(){var e=localStorage.getItem("SC_winsay_cp_editor__img-bg-color");if(!API.isEmpty(e))switch(localStorage.getItem("SC_winsay_cp_editor__img-bg-color_always")){case"true":document.documentElement.style.setProperty("--SCC-Variables-IMG-bg-color_hover",e),document.documentElement.style.setProperty("--SCC-Variables-IMG-bg-color",e);break;default:document.documentElement.style.setProperty("--SCC-Variables-IMG-bg-color_hover",e),document.documentElement.style.setProperty("--SCC-Variables-IMG-bg-color","transparent")}})),checkedChange(document.getElementById("SC_winsay_cp_editor__img-bg-color_always"),(()=>{var e=localStorage.getItem("SC_winsay_cp_editor__img-bg-color");document.documentElement.style.setProperty("--SCC-Variables-IMG-bg-color_hover",e),document.documentElement.style.setProperty("--SCC-Variables-IMG-bg-color",e)}),(()=>{var e=localStorage.getItem("SC_winsay_cp_editor__img-bg-color");document.documentElement.style.setProperty("--SCC-Variables-IMG-bg-color_hover",e),document.documentElement.style.setProperty("--SCC-Variables-IMG-bg-color","transparent")})),checkedChange(document.getElementById("SC_winsay_cp_filetree__Hide_untitle"),(()=>{document.documentElement.style.setProperty("--SCC-Variables-MI-DocTree-Untitle-opacity","0")}),(()=>{document.documentElement.style.setProperty("--SCC-Variables-MI-DocTree-Untitle-opacity","1")})),checkedChange(document.getElementById("SC_winsay_cp_search__index"),(()=>{window.funs.updateStyle("search__index","/appearance/themes/Sofill-/style/sweet/sugar/search/index.css")}),(()=>{API.removejscssfile(`${config.THEME_ROOT}style/sweet/sugar/search/index.css`,"css")})),checkedChange(document.getElementById("SC_winsay_cp_editor__HintHint-index"),(()=>{window.funs.updateStyle("HintHint-index","/appearance/themes/Sofill-/style/sweet/sugar/editor/HintHint-index.css")}),(()=>{API.removejscssfile(`${config.THEME_ROOT}style/sweet/sugar/editor/HintHint-index.css`,"css")})),checkedChange(document.getElementById("SC_winsay_cp_editor__LH_Adaptive"),(()=>{window.funs.updateStyle("LH_Adaptive","/appearance/themes/Sofill-/style/sweet/LH-Adaptive.css")}),(()=>{API.removejscssfile(`${config.THEME_ROOT}style/sweet/LH-Adaptive.css`,"css")})),checkedChange(document.getElementById("SC_winsay_cp_editor__BreadcrumbsMode-Adaptive"),(()=>{window.funs.updateStyle("docBreadcrumb_Adaptive","/appearance/themes/Sofill-/style/sweet/MI-Breadcrumb-Adaptive.css")}),(()=>{API.removejscssfile(`${config.THEME_ROOT}style/sweet/MI-Breadcrumb-Adaptive.css`,"css")})),checkedChange(document.getElementById("SC_winsay_cp_editor__AreoBg-Filter"),(()=>{window.funs.updateStyle("AreoBg-Filter","/appearance/themes/Sofill-/style/sweet/AreoBg-Filter.css")}),(()=>{API.removejscssfile(`${config.THEME_ROOT}style/sweet/AreoBg-Filter.css`,"css")})),checkedChange(document.getElementById("SC_winsay_cp_appearance__ShowWebIcon"),(()=>{window.funs.updateStyle("ShowWebIcon","/appearance/themes/Sofill-/style/link/web.css")}),(()=>{API.removejscssfile(`${config.THEME_ROOT}style/link/web.css`,"css")})),checkedChange(document.getElementById("SC_winsay_cp_appearance__ShowFileIcon"),(()=>{window.funs.updateStyle("ShowFileIcon","/appearance/themes/Sofill-/style/link/file.css")}),(()=>{API.removejscssfile(`${config.THEME_ROOT}style/link/file.css`,"css")})),propChange("SC_winsay_cp_editor__Block-Inline-link__block-ref-content",(function(){var e=localStorage.getItem("SC_winsay_cp_editor__Block-Inline-link__block-ref-content");if(API.isEmpty(e))document.documentElement.style.setProperty("--SCC-Variables-Block-Inline-link__block-ref__before","none"),document.documentElement.style.setProperty("--SCC-Variables-Block-Inline-link__block-ref__after","none");else{var t=e.split(" ")[0],a=e.split(" ")[1];document.documentElement.style.setProperty("--SCC-Variables-Block-Inline-link__block-ref__before",`'${t}'`),document.documentElement.style.setProperty("--SCC-Variables-Block-Inline-link__block-ref__after",`'${a}'`)}})),propChange("SC_winsay_cp_editor__Block-List-Task__item-done__text-color",(function(){var e=localStorage.getItem("SC_winsay_cp_editor__Block-List-Task__item-done__text-color");API.isEmpty(e)||"auto"!=e?(document.documentElement.style.setProperty("--SCC-Variables-Block-List-Task__item-done-color","var(--b3-theme-on-background)"),document.documentElement.style.setProperty("--SCC-Variables-Block-List-Task__item-done-backdrop-filter","none")):(document.documentElement.style.setProperty("--SCC-Variables-Block-List-Task__item-done-color","var(--b3-theme-secondary)"),document.documentElement.style.setProperty("--SCC-Variables-Block-List-Task__item-done-backdrop-filter","brightness(1.58) blur(13px)"))})),propChange("SC_winsay_cp_appearance__status_msg_opacity",(function(){var e=localStorage.getItem("SC_winsay_cp_appearance__status_msg_opacity");API.isEmpty(e)||document.documentElement.style.setProperty("--SCC-Variables-MI-status__msg_opacity",e)})),propChange("SC_winsay_cp_editor__LH_Adaptive__pIndent",(function(){var e=localStorage.getItem("SC_winsay_cp_editor__LH_Adaptive__pIndent");API.isEmpty(e)||(document.documentElement.style.setProperty("--SCC-Variables-MI-Doc-pIndent",`${API.RangeLimitedInt(-5,e,20)}rem`),document.getElementById("SC_winsay_cp_editor__LH_Adaptive__pIndent").value=API.RangeLimitedInt(-5,e,20))})),propChange("SC_winsay_cp_editor__LH_Adaptive__LH",(function(){var e=localStorage.getItem("SC_winsay_cp_editor__LH_Adaptive__LH");API.isEmpty(e)||(document.documentElement.style.setProperty("--SCC-Variables-MI-Doc-LH",`${e}`),document.getElementById("SC_winsay_cp_editor__LH_Adaptive__LH__label").setAttribute("aria-label",`${e}`),localStorage.setItem("SC_winsay_cp_editor__LH_Adaptive__LH__label",e))})),propChange("SC_winsay_cp_editor__LH_Adaptive__marginTop",(function(){var e=localStorage.getItem("SC_winsay_cp_editor__LH_Adaptive__marginTop");API.isEmpty(e)||(document.documentElement.style.setProperty("--SCC-Variables-MI-Doc-marginTop",API.RangeLimitedInt(100,e,500)/100+"rem"),document.getElementById("SC_winsay_cp_editor__LH_Adaptive__marginTop").value=API.RangeLimitedInt(100,e,500))})),propChange("SC_winsay_cp_editor__LH_Adaptive__marginBottom",(function(){var e=localStorage.getItem("SC_winsay_cp_editor__LH_Adaptive__marginBottom");API.isEmpty(e)||(document.documentElement.style.setProperty("--SCC-Variables-MI-Doc-marginBottom",API.RangeLimitedInt(100,e,500)/100+"rem"),document.getElementById("SC_winsay_cp_editor__LH_Adaptive__marginBottom").value=API.RangeLimitedInt(100,e,500))})),propChange("SC_winsay_cp_editor__LH_Adaptive__lSpacing",(function(){var e=localStorage.getItem("SC_winsay_cp_editor__LH_Adaptive__lSpacing");API.isEmpty(e)||(document.documentElement.style.setProperty("--SCC-Variables-MI-Doc-lSpacing",`${e}rem`),document.getElementById("SC_winsay_cp_editor__LH_Adaptive__lSpacing__label").setAttribute("aria-label",`${e}`),localStorage.setItem("SC_winsay_cp_editor__LH_Adaptive__lSpacing__label",e))})),propChange("SC_winsay_cp_editor__BlockScrollBar-opacity",(function(){var e=localStorage.getItem("SC_winsay_cp_editor__BlockScrollBar-opacity");if(!API.isEmpty(e))switch(document.documentElement.style.setProperty("--SCC-Variables-MI-BlockScrollBar-opacity-hover",e),e){case"0.58":document.documentElement.style.setProperty("--SCC-Variables-MI-BlockScrollBar-opacity","0.58");break;default:document.documentElement.style.setProperty("--SCC-Variables-MI-BlockScrollBar-opacity","0");break}})),propChange("SC_winsay_cp_editor__BlockScrollBar_Hposition",(function(){var e=localStorage.getItem("SC_winsay_cp_editor__BlockScrollBar_Hposition");if(!API.isEmpty(e))switch(e){case"L31":document.documentElement.style.setProperty("--SCC-Variables-MI-BlockScrollBar-right","unset"),document.documentElement.style.setProperty("--SCC-Variables-MI-BlockScrollBar-left","31px"),document.documentElement.style.setProperty("--SCC-Variables-MI-BlockScrollBar-tooltips-top","-100%");break;case"L13":document.documentElement.style.setProperty("--SCC-Variables-MI-BlockScrollBar-right","unset"),document.documentElement.style.setProperty("--SCC-Variables-MI-BlockScrollBar-left","13px"),document.documentElement.style.setProperty("--SCC-Variables-MI-BlockScrollBar-tooltips-top","-100%");break;case"R31":document.documentElement.style.setProperty("--SCC-Variables-MI-BlockScrollBar-right","31px"),document.documentElement.style.setProperty("--SCC-Variables-MI-BlockScrollBar-left","unset"),document.documentElement.style.setProperty("--SCC-Variables-MI-BlockScrollBar-tooltips-top","100%");break;case"R13":default:document.documentElement.style.setProperty("--SCC-Variables-MI-BlockScrollBar-right","13px"),document.documentElement.style.setProperty("--SCC-Variables-MI-BlockScrollBar-left","unset"),document.documentElement.style.setProperty("--SCC-Variables-MI-BlockScrollBar-tooltips-top","100%");break}})),checkedChange(document.getElementById("SC_winsay_cp_filetree__Adaptive_display"),(()=>{window.funs.updateStyle("MI-DocTree-Adaptive","/appearance/themes/Sofill-/style/sweet/MI-DocTree-Adaptive.css")}),(()=>{API.removejscssfile(`${config.THEME_ROOT}style/sweet/MI-DocTree-Adaptive.css`,"css")})),propChange("SC_winsay_cp_filetree__docFontsize",(function(){var e=localStorage.getItem("SC_winsay_cp_filetree__docFontsize");API.isEmpty(e)||(document.documentElement.style.setProperty("--SCC-Variables-MI-DocTree-docFontsize",`${e}pt`),document.getElementById("SC_winsay_cp_filetree__docFontsize__label").setAttribute("aria-label",`${e}`),localStorage.setItem("SC_winsay_cp_filetree__docFontsize__label",e))})),propChange("SC_winsay_cp_filetree__nbFontsize",(function(){var e=localStorage.getItem("SC_winsay_cp_filetree__nbFontsize");API.isEmpty(e)||(document.documentElement.style.setProperty("--SCC-Variables-MI-DocTree-nbFontsize",`${e}pt`),document.getElementById("SC_winsay_cp_filetree__nbFontsize__label").setAttribute("aria-label",`${e}`),localStorage.setItem("SC_winsay_cp_filetree__nbFontsize__label",e))})),propChange("SC_winsay_cp_filetree__nbMargin",(function(){var e=localStorage.getItem("SC_winsay_cp_filetree__nbMargin");API.isEmpty(e)||(document.documentElement.style.setProperty("--SCC-Variables-MI-DocTree-nbMargin",`${e}em`),document.getElementById("SC_winsay_cp_filetree__nbMargin__label").setAttribute("aria-label",`${e}`),localStorage.setItem("SC_winsay_cp_filetree__nbMargin__label",e))})),checkedChange(document.getElementById("SC_winsay_cp_editor__FocusEnhanc_inlineCode"),(()=>{document.documentElement.style.setProperty("--SCC-Variables-Block-Inline-span__code__before-content","'<'"),document.documentElement.style.setProperty("--SCC-Variables-Block-Inline-span__code__after-content","'>'")}),(()=>{document.documentElement.style.removeProperty("--SCC-Variables-Block-Inline-span__code__before-content"),document.documentElement.style.removeProperty("--SCC-Variables-Block-Inline-span__code__after-content")})),checkedChange(document.getElementById("SC_winsay_cp_appearance__strengthen_backlinkList_panel_border"),(()=>{document.documentElement.style.setProperty("--SCC-Variables-backlinkList_panel_box-shadow","rgb(6 24 44 / 8%) -31px -13px 131px 12px, rgb(186 186 186 / 22%) 12px -23px 111px -5px inset")}),(()=>{document.documentElement.style.removeProperty("--SCC-Variables-backlinkList_panel_box-shadow")})),checkedChange(document.getElementById("SC_winsay_cp_appearance__strengthen_layout-tab-container"),(()=>{document.documentElement.style.setProperty("--SCC-Variables-MI-LayoutTabContainer_bgColor","linear-gradient(95deg, transparent, var(--b3-theme-surface-lighter), transparent)")}),(()=>{document.documentElement.style.removeProperty("--SCC-Variables-MI-LayoutTabContainer_bgColor")}));