import{ConfirmDialog,CPDialog}from"./module/CPM.js";import{ConfirmDialog1}from"./module/XML/ConfirmDialog.js";import*as API from"./utils/api.min.js";import*as config from"./config.js";if(API.isPhone()){const e=document.getElementById("sidebar");if(null==document.getElementById("Sofill-CDUI-1")){const t=document.createElement("svg");t.id="Sofill-CDUI-1",t.className="Sofill-CDUI-btn1 toolbar__icon",t.innerHTML='<use xlink:href="#iconSettings"></use>',t.style.width="17px",t.style.height="100%",t.style.marginLeft="5px",e.children[0].insertAdjacentElement("beforeend",t);let o=new CPDialog({isCancel:!0,dragable:!1,maskable:!0});document.querySelector(".Sofill-CDUI-btn1").onclick=function(){o.open()}}}else{const e=document.getElementById("barHelp");if(null==document.getElementById("Sofill-CDUI-1")){const t=document.createElement("button");t.id="Sofill-CDUI-1",t.className="Sofill-CDUI-btn1 b3-menu__item",t.ariaLabel="主题设置（实验性）",t.innerHTML='<svg class="b3-menu__icon" "=""><use xlink:href="#iconSettings"></use></svg><span class="b3-menu__label">主题设置</span>',e.children[1].insertAdjacentElement("afterbegin",t);let o=new CPDialog({isCancel:!0,dragable:!1,maskable:!0});document.querySelector(".Sofill-CDUI-btn1").onclick=function(){o.open()}}}var obj={};function bindDomWithObject(e){var t=document.getElementById(e.id),o=e.obj,n=e.prop,a=e.callback,c=e.type,l=e.updated;Object.defineProperty(o,n,{get:function(){return t.value},set:function(e){t.value=e,localStorage.setItem(n,e)},configurable:!0}),t.addEventListener(c,(function(){o[n]=o[n],"function"==typeof l&&l(o,n,t)})),"function"==typeof a&&a(e,o,t)}function propInit(e,t){bindDomWithObject({id:e,obj:obj,prop:e,type:t,callback:function(t,o,n){API.isEmpty(localStorage.getItem(e))||(o[t.prop]=localStorage.getItem(e))}})}function propChange(e,t){bindDomWithObject({id:e,obj:obj,prop:e,type:"change",updated:t}),t()}function checkedInit(e){"true"===localStorage.getItem(e.id)?e.checked=!0:e.checked=!1}function checkedChange(e,t,o){!0===e.checked?(localStorage.setItem(e.id,"true"),t()):(localStorage.setItem(e.id,"false"),o()),e.addEventListener("click",(function(){!0===e.checked?(localStorage.setItem(e.id,"true"),t()):(localStorage.setItem(e.id,"false"),o())}))}let selectList=document.querySelectorAll("select[id^='SC_winsay_cp']");selectList.forEach((function(e){propInit(e.id,"change")}));let rangeSliderList=document.querySelectorAll("input[id^='SC_winsay_cp'][type='range']");rangeSliderList.forEach((function(e){propInit(e.id,"change")}));let checkboxList=document.querySelectorAll("input[id^='SC_winsay_cp'][type='checkbox']");checkboxList.forEach((function(e){checkedInit(e)})),propChange("SC_winsay_cp_appearance__TabBarMode",(function(){var e=localStorage.getItem("SC_winsay_cp_appearance__TabBarMode"),t=API.isEmpty(e)?"sweet/MI-TabBar-D.css":e;window.funs.updateStyle("TabBar",`/appearance/themes/Sofill-/style/${t}`)})),checkedChange(document.getElementById("SC_winsay_cp_appearance__ToolBarMode"),(()=>{document.documentElement.style.setProperty("--SCC-Variables-MI-ToolBar-height-max","11px"),document.documentElement.style.setProperty("--SCC-Variables-MI-ToolBar-child-visibility","hidden"),document.documentElement.style.setProperty("--SCC-Variables-MI-ToolBar-svg-height","0px")}),(()=>{document.documentElement.style.setProperty("--SCC-Variables-MI-ToolBar-height-max","37px"),document.documentElement.style.setProperty("--SCC-Variables-MI-ToolBar-child-visibility","visible"),document.documentElement.style.setProperty("--SCC-Variables-MI-ToolBar-svg-height","14px")})),propChange("SC_winsay_cp_appearance__ToolBarMode__height",(function(){var e=localStorage.getItem("SC_winsay_cp_appearance__ToolBarMode__height");API.isEmpty(e)||(document.documentElement.style.setProperty("--SCC-Variables-MI-ToolBar-height",e),document.documentElement.style.setProperty("--SCC-Variables-MI-ToolBar-svg-height",parseInt(e)/2+1+"px"),document.documentElement.style.setProperty("--SCC-Variables-MI-ToolBar-svg-hover-height",parseInt(e)/2+1+"px"))})),propChange("SC_winsay_cp_appearance__ToolBarMode__NotFocus__bgColor",(function(){var e=localStorage.getItem("SC_winsay_cp_appearance__ToolBarMode__NotFocus__bgColor");API.isEmpty(e)||document.documentElement.style.setProperty("--b3-toolbar-background",e)})),checkedChange(document.getElementById("SC_winsay_cp_appearance__DockBgColorFilter"),(()=>{document.querySelector("#dockLeft").style.setProperty("background-image","linear-gradient(to top,#cccccc16,#ffffff06)"),document.querySelector("#dockRight").style.setProperty("background-image","linear-gradient(to top left,#cccccc16,#ffffff06)"),document.querySelector("#status").style.setProperty("background-image","linear-gradient(to top right,#cccccc16,#ffffff06)")}),(()=>{document.querySelector("#dockLeft").style.setProperty("background-image","none"),document.querySelector("#dockRight").style.setProperty("background-image","none"),document.querySelector("#status").style.setProperty("background-image","none")})),checkedChange(document.getElementById("SC_winsay_cp_appearance__ToolBarMode__HideList__docName"),(()=>{document.documentElement.style.setProperty("--SCC-Variables-MI-ToolBar-docName-opacity","0")}),(()=>{document.documentElement.style.setProperty("--SCC-Variables-MI-ToolBar-docName-opacity","0.77")})),checkedChange(document.getElementById("SC_winsay_cp_appearance__ToolBarMode__HideList__VIP"),(()=>{document.documentElement.style.setProperty("--SCC-Variables-MI-ToolBar-VIP-opacity","0")}),(()=>{document.documentElement.style.setProperty("--SCC-Variables-MI-ToolBar-VIP-opacity","0.77")})),checkedChange(document.getElementById("SC_winsay_cp_appearance__ToolBarMode__HideList__windowX"),(()=>{document.documentElement.style.setProperty("--SCC-Variables-MI-ToolBar-windowX-opacity","0")}),(()=>{document.documentElement.style.setProperty("--SCC-Variables-MI-ToolBar-windowX-opacity","0.77")})),checkedChange(document.getElementById("SC_winsay_cp_appearance__ToolBarMode__HideList__Other"),(()=>{document.documentElement.style.setProperty("--SCC-Variables-MI-ToolBar-Other-opacity","0")}),(()=>{document.documentElement.style.setProperty("--SCC-Variables-MI-ToolBar-Other-opacity","0.77")})),checkedChange(document.getElementById("SC_winsay_cp_filetree__Hide_untitle"),(()=>{document.documentElement.style.setProperty("--SCC-Variables-MI-DocTree-Untitle-opacity","0")}),(()=>{document.documentElement.style.setProperty("--SCC-Variables-MI-DocTree-Untitle-opacity","1")})),checkedChange(document.getElementById("SC_winsay_cp_filetree__Adaptive_display"),(()=>{window.funs.updateStyle("MI-DocTree-Adaptive","/appearance/themes/Sofill-/style/sweet/MI-DocTree-Adaptive.css")}),(()=>{API.removejscssfile(`${config.THEME_ROOT}style/sweet/MI-DocTree-Adaptive.css`,"css")})),propChange("SC_winsay_cp_filetree__docFontsize",(function(){var e=localStorage.getItem("SC_winsay_cp_filetree__docFontsize");API.isEmpty(e)||(document.documentElement.style.setProperty("--SCC-Variables-MI-DocTree-docFontsize",`${e}pt`),document.getElementById("SC_winsay_cp_filetree__docFontsize__label").setAttribute("aria-label",`${e}`),localStorage.setItem("SC_winsay_cp_filetree__docFontsize__label",e))})),propChange("SC_winsay_cp_filetree__nbFontsize",(function(){var e=localStorage.getItem("SC_winsay_cp_filetree__nbFontsize");API.isEmpty(e)||(document.documentElement.style.setProperty("--SCC-Variables-MI-DocTree-nbFontsize",`${e}pt`),document.getElementById("SC_winsay_cp_filetree__nbFontsize__label").setAttribute("aria-label",`${e}`),localStorage.setItem("SC_winsay_cp_filetree__nbFontsize__label",e))})),propChange("SC_winsay_cp_filetree__nbMargin",(function(){var e=localStorage.getItem("SC_winsay_cp_filetree__nbMargin");API.isEmpty(e)||(document.documentElement.style.setProperty("--SCC-Variables-MI-DocTree-nbMargin",`${e}em`),document.getElementById("SC_winsay_cp_filetree__nbMargin__label").setAttribute("aria-label",`${e}`),localStorage.setItem("SC_winsay_cp_filetree__nbMargin__label",e))})),document.getElementById("SC_winsay_cp_system__ClearlocalStorage").addEventListener("click",(function(){new ConfirmDialog({isCancel:!0,dragable:!1,XML:ConfirmDialog1,success(){for(var e=0,t=0;t<localStorage.length;t++){((o=localStorage.key(t)).startsWith("winsay_")||o.startsWith("SC_winsay_"))&&(localStorage.removeItem(o),e++)}for(t=0;t<localStorage.length;t++){var o;((o=localStorage.key(t)).startsWith("winsay_")||o.startsWith("SC_winsay_"))&&(localStorage.removeItem(o),e++)}API.通知(`已清理 ${e} 项<br>页面即将刷新`),setTimeout((()=>{window.location.reload()}),3e3)},cancel(){},maskable:!0}).open()})),checkedChange(document.getElementById("SC_winsay_cp_editor__FocusEnhanc_inlineCode"),(()=>{document.documentElement.style.setProperty("--SCC-Variables-Block-Inline-span__code__before-content","'<'"),document.documentElement.style.setProperty("--SCC-Variables-Block-Inline-span__code__after-content","'>'")}),(()=>{document.documentElement.style.setProperty("--SCC-Variables-Block-Inline-span__code__before-content",""),document.documentElement.style.setProperty("--SCC-Variables-Block-Inline-span__code__after-content","")}));